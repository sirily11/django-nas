(this["webpackJsonpelectron-react-template"]=this["webpackJsonpelectron-react-template"]||[]).push([[0],{517:function(e,t,a){e.exports=a(842)},522:function(e,t,a){},842:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),l=a.n(c),o=a(19),i=(a(522),a(151)),s=a(96),u=(a(523),a(12)),d=a.n(u),m=a(23),p=a(923),f=a(922),h=a(276),v=a(114),E=a(889),b=a(845),g=a(895),x=a(894),w=a(275),k=a.n(w),O=a(893),y=a(896),j=a(468),F=a(890),C=a(469),S=a(38),M=a.n(S);const D="/api/folder/";var I=a(51),U=a.n(I);class N{constructor(){var e=this;this.menus=void 0,this.currentFolder=void 0,this.searchedFiles=void 0,this.errorMsg=void 0,this.moveFileTo=function(){var t=Object(m.a)(d.a.mark((function t(a,n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentFolder){t.next=7;break}return r="".concat("/api/file/").concat(a,"/"),t.next=5,M.a.patch(r,{parent:n});case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}(),this.moveFolderTo=function(){var t=Object(m.a)(d.a.mark((function t(a,n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentFolder){t.next=7;break}return r="".concat(D).concat(a,"/"),t.next=5,M.a.patch(r,{parent:n});case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}(),this.rename=function(){var t=Object(m.a)(d.a.mark((function t(a,n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentFolder){t.next=7;break}return r="".concat("/api/file/").concat(a,"/"),t.next=5,M.a.patch(r,{filename:n});case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}(),this.search=function(){var t=Object(m.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="".concat("/api/file?search=").concat(a),t.next=4,M.a.get(n);case 4:r=t.sent,e.searchedFiles=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.errorMsg=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),this.getContent=function(){var t=Object(m.a)(d.a.mark((function t(a){var n,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a?"".concat(D).concat(a,"/"):D,t.next=4,M.a.get(n);case 4:r=t.sent,c=r.data,e.menus=c.parents,e.currentFolder=c,e.errorMsg=void 0,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),e.errorMsg=t.t0,e.currentFolder=void 0;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),this.uploadFile=function(){var t=Object(m.a)(d.a.mark((function t(a,n,r){var c,l,o,i,s,u,m,p;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,c=0,l=!0,o=!1,i=void 0,t.prev=5,s=a[Symbol.iterator]();case 7:if(l=(u=s.next()).done){t.next=27;break}if(m=u.value,!e.currentFolder){t.next=23;break}if(r(c,0,0,m.size),!n){t.next=17;break}return t.next=14,e.getUploadFileAndCreateFolder(m);case 14:t.t0=t.sent,t.next=18;break;case 17:t.t0=e.getSingleUploadFile(m);case 18:return p=t.t0,t.next=21,M.a.post("/api/file/",p,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{let t=Math.round(100*e.loaded/e.total);r(c,t,m.size*e.loaded,e.total)}});case 21:return t.next=23,e.getContent(e.currentFolder.id);case 23:c+=1;case 24:l=!0,t.next=7;break;case 27:t.next=33;break;case 29:t.prev=29,t.t1=t.catch(5),o=!0,i=t.t1;case 33:t.prev=33,t.prev=34,l||null==s.return||s.return();case 36:if(t.prev=36,!o){t.next=39;break}throw i;case 39:return t.finish(36);case 40:return t.finish(33);case 41:r(c,100,0,0),t.next=48;break;case 44:t.prev=44,t.t2=t.catch(0),console.log(t.t2),alert("Upload Failed: "+t.t2.toString());case 48:case"end":return t.stop()}}),t,null,[[0,44],[5,29,33,41],[34,,36,40]])})));return function(e,a,n){return t.apply(this,arguments)}}(),this.deleteFile=function(){var t=Object(m.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!window.confirm("Are you sure you want to delete this file?")||!e.currentFolder){t.next=7;break}return t.next=5,M.a.delete("".concat("/api/file/").concat(a,"/"));case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert("Upload Failed: "+t.t0.toString());case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),this.deleteFolder=function(){var t=Object(m.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!window.confirm("Are you sure you want to delete this folder?")||!e.currentFolder){t.next=7;break}return t.next=5,M.a.delete("".concat(D).concat(a,"/"));case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert("Upload Failed: "+t.t0.toString());case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),this.createNewFolder=function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFolder){t.next=7;break}return t.next=3,M.a.post(D,{name:a,parent:e.currentFolder.id?e.currentFolder.id:null});case 3:n=t.sent,e.currentFolder.folders.push(n.data),t.next=8;break;case 7:alert("Create new folder error: empty parent folder");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.renameFolder=function(){var t=Object(m.a)(d.a.mark((function t(a,n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFolder){t.next=8;break}return t.next=3,M.a.patch("".concat(D).concat(a,"/"),{name:n});case 3:r=t.sent,(c=e.currentFolder.folders.findIndex(e=>e.id===a))>-1&&(e.currentFolder.folders[c]=r.data),t.next=9;break;case 8:alert("Rename new folder error: empty parent folder");case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.getDocument=function(){var e=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("".concat("/api/document/").concat(t,"/"));case 2:return a=e.sent,e.abrupt("return",Promise.resolve(Object(C.a)({},a.data,{content:JSON.parse(a.data.content)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createNewDocument=function(){var t=Object(m.a)(d.a.mark((function t(a,n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.a.post("/api/document/",{name:a,parent:e.currentFolder&&e.currentFolder.id?e.currentFolder.id:null,content:JSON.stringify(n.ops)});case 2:r=t.sent,e.currentFolder&&e.currentFolder.documents.push(r.data);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.updateDocument=function(){var t=Object(m.a)(d.a.mark((function t(a,n,r){var c,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.a.patch("".concat("/api/document/").concat(a,"/"),{name:n,content:JSON.stringify(r.ops)});case 2:c=t.sent,e.currentFolder&&(l=e.currentFolder.documents.findIndex(e=>e.id===a))>-1&&(e.currentFolder.documents[l]=c.data);case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),this.deleteDocument=function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFolder){t.next=13;break}if(!window.confirm("Do you want to delete this document?")){t.next=11;break}return t.next=5,M.a.delete("".concat("/api/document/").concat(a,"/"));case 5:return n=t.sent,t.next=8,e.getContent(e.currentFolder.id);case 8:return t.abrupt("return",Promise.resolve(n.data));case 11:t.next=15;break;case 13:return alert("Create new folder error: empty parent folder"),t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.menus=[],this.searchedFiles=[]}getSingleUploadFile(e){if(this.currentFolder){let t=new FormData;return t.append("file",e),this.currentFolder.id&&t.append("parent",this.currentFolder.id.toString()),t}}getUploadFileAndCreateFolder(e){var t=this;return Object(m.a)(d.a.mark((function a(){var n,r,c,l,o,i,s,u,m,p,f,h,v,E;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.currentFolder){a.next=35;break}r=I.dirname(e.webkitRelativePath).split(I.sep),l=!0,o=!1,i=void 0,a.prev=5,s=r[Symbol.iterator]();case 7:if(l=(u=s.next()).done){a.next=16;break}return h=u.value,a.next=11,M.a.post(D,{parent:null!==(m=null!==(p=null===(f=c)||void 0===f?void 0:f.id)&&void 0!==p?p:t.currentFolder.id)&&void 0!==m?m:null,name:h});case 11:v=a.sent,c=v.data;case 13:l=!0,a.next=7;break;case 16:a.next=22;break;case 18:a.prev=18,a.t0=a.catch(5),o=!0,i=a.t0;case 22:a.prev=22,a.prev=23,l||null==s.return||s.return();case 25:if(a.prev=25,!o){a.next=28;break}throw i;case 28:return a.finish(25);case 29:return a.finish(22);case 30:return(E=new FormData).append("file",e),console.log("parent",c),c&&c.id&&E.append("parent","".concat(null===(n=c)||void 0===n?void 0:n.id)),a.abrupt("return",E);case 35:case"end":return a.stop()}}),a,null,[[5,18,22,30],[23,,25,29]])})))()}}class R extends n.Component{constructor(e){var t;super(e),t=this,this.selectDocument=e=>{this.setState({selectedDocument:e})},this.updateUploadInfo=e=>{this.setState({uploadInfo:e})},this.setUploadInfo=e=>{this.setState({uploadFiles:e})},this.fetch=function(){var e=Object(m.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({isLoading:!0}),n=t.state.nas,e.next=4,n.getContent(a);case 4:t.setState({nas:n,isLoading:!1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.update=()=>{this.setState({nas:this.state.nas})},this.state={nas:new N,selectDocument:this.selectDocument,updateUploadInfo:this.updateUploadInfo,setUploadInfo:this.setUploadInfo,update:this.update,isLoading:!1}}componentDidUpdate(e){var t=this;return Object(m.a)(d.a.mark((function a(){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.props.match.params.id===e.match.params.id){a.next=4;break}return n=t.props.match.params.id,a.next=4,t.fetch(n);case 4:case"end":return a.stop()}}),a)})))()}componentWillMount(){var e=this;return Object(m.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,e.fetch(a);case 3:case"end":return t.stop()}}),t)})))()}render(){return r.a.createElement(P.Provider,{value:this.state},this.props.children)}}const B={nas:new N,update:()=>{},selectDocument:()=>{},updateUploadInfo:e=>{},setUploadInfo:e=>{},isLoading:!1},P=r.a.createContext(B);var T=a(190),A=a.n(T),L=(a(304),a(196)),z=a.n(L),W=a(880),Y=a(884),J=a(885),G=a(886),H=a(928),K=a(918),_=a(891),V=a(892);function X(e){var t;const a=Object(n.useContext)(P).nas,c=Object(n.useState)(-1),l=Object(o.a)(c,2),i=l[0],s=l[1];return console.log(i),r.a.createElement(W.a,{open:e.open,fullWidth:!0},r.a.createElement(Y.a,null,"Move File To"),r.a.createElement(J.a,null,r.a.createElement(G.a,{fullWidth:!0},r.a.createElement(H.a,null,"Destnation"),r.a.createElement(K.a,{color:"secondary",value:i,onChange:e=>{let t=e.target.value;s(t)},fullWidth:!0},a.currentFolder&&r.a.createElement(F.a,{value:null!==(t=a.currentFolder.parent)&&void 0!==t?t:-1},"Parent Folder"),a.currentFolder&&a.currentFolder.folders.filter(t=>"folder"!==e.type||e.selectedFile.id!==t.id).map(e=>r.a.createElement(F.a,{key:e.id,value:e.id},e.name))))),r.a.createElement(_.a,null,r.a.createElement(V.a,{onClick:()=>{s(-1),e.onClose()}},"cancel"),r.a.createElement(V.a,{onClick:Object(m.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=10;break}n=-1===i?null:i,t.t0=e.type,t.next="file"===t.t0?5:"folder"===t.t0?8:10;break;case 5:return t.next=7,a.moveFileTo(e.selectedFile.id,n);case 7:return t.abrupt("break",10);case 8:return t.next=10,a.moveFolderTo(e.selectedFile.id,n);case 10:s(-1),e.onClose();case 12:case"end":return t.stop()}}),t)})))},"ok")))}var q=a(930);function Z(e){const t=Object(n.useContext)(P).nas,a=Object(n.useState)((()=>{switch(e.type){case"file":let t=I.extname(e.selectedFile.filename);return I.basename(e.selectedFile.filename,t);case"folder":default:return e.selectedFile.name}})()),c=Object(o.a)(a,2),l=c[0],i=c[1];return console.log(e.selectedFile),r.a.createElement(W.a,{open:e.open,fullWidth:!0},r.a.createElement(Y.a,null,"Rename"),r.a.createElement(J.a,null,r.a.createElement(q.a,{color:"secondary",fullWidth:!0,value:l,onChange:e=>{i(e.target.value)}})),r.a.createElement(_.a,null,r.a.createElement(V.a,{onClick:()=>{e.onClose(),i("")}},"cancel"),r.a.createElement(V.a,{onClick:Object(m.a)(d.a.mark((function a(){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!l){a.next=10;break}a.t0=e.type,a.next="file"===a.t0?4:"folder"===a.t0?8:10;break;case 4:return n=I.extname(e.selectedFile.filename),a.next=7,t.rename(e.selectedFile.id,"".concat(l).concat(n));case 7:return a.abrupt("break",10);case 8:return a.next=10,t.renameFolder(e.selectedFile.id,l);case 10:e.onClose();case 11:case"end":return a.stop()}}),a)})))},"ok")))}function $(){const e=Object(n.useContext)(P),t=e.nas,a=(e.isLoading,e.update),c=Object(n.useState)(!1),l=Object(o.a)(c,2),s=l[0],u=l[1],w=Object(n.useState)(!1),C=Object(o.a)(w,2),S=C[0],M=C[1],D=Object(n.useState)(void 0),I=Object(o.a)(D,2),U=I[0],N=I[1],R=r.a.useState(null),B=Object(o.a)(R,2),T=B[0],L=B[1],W=()=>{L(null)};return r.a.createElement("div",{style:{overflow:"auto",overflowX:"hidden",height:"100%",color:"blue"}},r.a.createElement(E.a,null,r.a.createElement(p.a,{centered:!0},r.a.createElement(p.a.Row,{verticalAlign:"middle"},r.a.createElement(p.a.Column,{width:5},t.currentFolder&&t.currentFolder.parent?r.a.createElement(i.b,{to:"/home/".concat(t.currentFolder.parent)},r.a.createElement(O.a,null,r.a.createElement(k.a,null))):r.a.createElement(O.a,null,r.a.createElement(i.b,{to:"/home"},r.a.createElement(k.a,null))," ")),r.a.createElement(p.a.Column,{width:11},r.a.createElement("div",{style:{color:"black"}},t.currentFolder&&t.currentFolder.name)))),t.errorMsg&&r.a.createElement(f.a,{error:!0},r.a.createElement(h.a,null,"Network Error"),r.a.createElement("div",null,t.errorMsg.toString())),t.currentFolder&&t.currentFolder.folders.map((e,t)=>r.a.createElement(b.a,{button:!0,key:"folder-".concat(e.id)},r.a.createElement(x.a,null,r.a.createElement(v.a,{name:"folder",size:"large",color:"grey"})),r.a.createElement(g.a,{onClick:()=>{window.location.href="#/home/".concat(e.id)},style:{color:"black"},primary:e.name,secondary:A()(e.modified_at).format("MMM DD, YYYY")}),r.a.createElement(y.a,null,r.a.createElement(O.a,{onClick:t=>{L(t.currentTarget),N(e)}},r.a.createElement(z.a,null)))))),r.a.createElement(j.a,{id:"simple-menu",anchorEl:T,keepMounted:!0,open:Boolean(T),onClose:W},r.a.createElement(F.a,{onClick:()=>{M(!0),W()}},"Rename"),r.a.createElement(F.a,{onClick:Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=6;break}return e.next=3,t.deleteFolder(U.id);case 3:W(),a(),N(void 0);case 6:case"end":return e.stop()}}),e)})))},"Delete"),r.a.createElement(F.a,{onClick:()=>{W(),u(!0)}},"Move To")),U&&S&&r.a.createElement(Z,{type:"folder",selectedFile:U,open:S,onClose:()=>{N(void 0),M(!1)}}),U&&s&&r.a.createElement(X,{type:"folder",selectedFile:U,open:s,onClose:()=>{u(!1),N(void 0)}}))}var Q=a(924),ee=a(280),te=a(917),ae=a(897),ne=a(921);function re(e){const t=Object(n.useContext)(P),a=t.nas,c=t.update,l=t.uploadInfo,o=t.setUploadInfo,i=t.uploadFiles,s=t.updateUploadInfo,u=e=>{let t=e.target.files;if(t){let e=[];for(var a=0;a<t.length;a++)e.push(t[a]);o(e)}};return r.a.createElement(te.a,{open:e.open},r.a.createElement(te.a.Header,null,"Select ",e.isDir?"Folder":"Files"," "),r.a.createElement(te.a.Content,null,r.a.createElement(p.a.Row,null,e.isDir?r.a.createElement("input",{type:"file",multiple:!0,webkitdirectory:"",name:"Upload file",onChange:u}):r.a.createElement("input",{type:"file",multiple:!0,name:"Upload file",onChange:u})),l&&r.a.createElement(p.a.Row,{style:{marginTop:20}},r.a.createElement(Q.a,null,r.a.createElement(ae.a,{percent:l.progress,attached:"top",color:"green",active:!0}),l.currentName," ",l.currentIndex,"/",l.total," --- ",l.progress," %",r.a.createElement(ae.a,{percent:l.currentIndex/l.total*100,attached:"bottom",color:"blue",active:!0})))),r.a.createElement(te.a.Actions,null,r.a.createElement(ne.a,{basic:!0,color:"red",onClick:()=>e.setOpen(!1)},r.a.createElement(v.a,{name:"remove"})," ",l?"Minimize":"Close"),r.a.createElement(ne.a,{disabled:void 0===i,color:"green",loading:void 0!==l,inverted:!0,onClick:Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=5;break}return t.next=3,a.uploadFile(i,e.isDir,(e,t,a,n)=>{s({total:i.length,currentIndex:e,currentName:i[e]?i[e].name:"Finished",progress:t,uploadedDataSize:a,totalDataSize:n})});case 3:c(),setTimeout(()=>{e.setOpen(!1),o(void 0),s(void 0)},300);case 5:case"end":return t.stop()}}),t)})))},r.a.createElement(v.a,{name:"checkmark"})," Upload")))}let ce;!function(e){e.text="text",e.number="number",e.datetime="datetime",e.foreignkey="foreignkey",e.unknown="unknown",e.select="select",e.tomanyTable="tomany-table"}(ce||(ce={}));ce.text;function le(e){const t=Object(n.useContext)(P),a=t.nas,c=t.update,l=Object(n.useState)(""),i=Object(o.a)(l,2),s=i[0],u=i[1],p=Object(n.useState)(!1),f=Object(o.a)(p,2),h=f[0],E=f[1];return r.a.createElement(W.a,{open:e.open,fullWidth:!0},r.a.createElement(Y.a,null,"New Folder"),r.a.createElement(J.a,null,r.a.createElement(q.a,{onChange:e=>{u(e.target.value)},value:s,color:"secondary",fullWidth:!0,label:"Folder Name",required:!0})),r.a.createElement(_.a,null,r.a.createElement(ne.a,{basic:!0,color:"red",onClick:()=>e.setOpen(!1)},r.a.createElement(v.a,{name:"remove"})," No"),r.a.createElement(ne.a,{basic:!0,color:"green",onClick:Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(!0),t.next=3,a.createNewFolder(s);case 3:c(),E(!1),e.setOpen(!1);case 6:case"end":return t.stop()}}),t)}))),loading:h},r.a.createElement(v.a,{name:"add"})," Create")))}a(685);var oe=a(451),ie=a.n(oe);function se(e){const t=Object(n.useState)(),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(),s=Object(o.a)(i,2),u=s[0],p=s[1],f=Object(n.useState)(!1),h=Object(o.a)(f,2),v=h[0],E=(h[1],Object(n.useState)(!1)),b=Object(o.a)(E,2),g=b[0],x=b[1],w=e.document,k=Object(n.useContext)(P),O=k.nas,y=k.update;return void 0===u&&p(w?w.name:""),r.a.createElement(te.a,{open:e.open,centered:!1},r.a.createElement(te.a.Header,null,r.a.createElement(q.a,{value:u,label:"You Document Title",onChange:e=>{p(e.target.value)},fullWidth:!0})),r.a.createElement(te.a.Content,null,r.a.createElement(ie.a,{ref:e=>l(null!=e?e:void 0),defaultValue:w&&w.content})),r.a.createElement(te.a.Actions,null,r.a.createElement(ne.a,{onClick:()=>{if(v){window.confirm("Are you sure you want to exit? You will lose unsave data.")&&e.setOpen(!1)}else e.setOpen(!1)}},"close"),r.a.createElement(ne.a,{loading:g,color:"blue",onClick:Object(m.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,x(!0),!c||!u){t.next=19;break}if(a=c.getEditor().getContents(),!w){t.next=9;break}return t.next=7,O.updateDocument(w.id,u,a);case 7:t.next=15;break;case 9:if(""===u){t.next=14;break}return t.next=12,O.createNewDocument(u,a);case 12:t.next=15;break;case 14:throw"Name should not be empty";case 15:y(),p(void 0),e.setOpen(!1),x(!1);case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(0),alert(t.t0.toString()),x(!1);case 25:case"end":return t.stop()}}),t,null,[[0,21]])})))},"Save")))}var ue=a(113),de=a(925);function me(){Object(n.useContext)(P).nas;const e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(o.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)(!1),m=Object(o.a)(d,2),p=m[0],f=m[1],h=Object(n.useState)(!1),v=Object(o.a)(h,2),E=v[0],b=v[1];return r.a.createElement("div",null,r.a.createElement(ue.a,{id:"folder"},r.a.createElement(de.a,{id:"folder",vertical:!0},r.a.createElement(ue.c,{onClick:()=>{f(!0)}},r.a.createElement(ee.a,null,"New Folder")))),r.a.createElement(ue.a,{id:"files"},r.a.createElement(de.a,{vertical:!0},r.a.createElement(ee.a,{onClick:()=>b(!0)},"New Document"),r.a.createElement(ee.a,{onClick:()=>{c(!0)}},"Upload Files"),r.a.createElement(ee.a,{onClick:()=>{u(!0)}},"Upload Folder"))),r.a.createElement(re,{isDir:!1,open:a,setOpen:c}),r.a.createElement(re,{isDir:!0,open:s,setOpen:u}),r.a.createElement(le,{open:p,setOpen:f}),r.a.createElement(se,{open:E,setOpen:b}))}class pe extends n.Component{constructor(e){super(e),this.fetchSystemInfo=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("/system/");case 2:return t=e.sent,e.abrupt("return",Promise.resolve(t.data));case 4:case"end":return e.stop()}}),e)}))),this.state={}}componentDidMount(){var e=this;return Object(m.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchSystemInfo();case 2:(a=t.sent)&&e.setState({systemInfo:a});case 4:case"end":return t.stop()}}),t)})))()}render(){return r.a.createElement(fe.Provider,{value:this.state},this.props.children)}}const fe=r.a.createContext({});function he(e,t=2){if(0===e)return"0 Bytes";const a=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}function ve(){const e=Object(n.useContext)(fe).systemInfo;return void 0===e?r.a.createElement(f.a,null,r.a.createElement("p",null,"No Info Avaliable currently")):r.a.createElement("div",null,r.a.createElement("span",null,"Used Sapce: ",he(e.disk.used),"/",he(e.disk.total)),r.a.createElement(ae.a,{percent:(e.disk.used/e.disk.total*100).toFixed(2),size:"tiny",color:"green"}))}var Ee=a(467),be=a(207),ge=a(898),xe=a(899),we=a(900),ke=a(901),Oe=a(902),ye=a(903),je=a(904),Fe=a(905),Ce=a(906),Se=a(907),Me=a(453),De=a.n(Me),Ie=a(927),Ue=a(926);function Ne(){const e=Object(n.useContext)(P),t=e.nas,a=(e.update,e.selectedDocument,e.selectDocument),c=Object(n.useState)(!1),l=Object(o.a)(c,2),i=(l[0],l[1],Object(n.useState)()),s=Object(o.a)(i,2),u=s[0],f=s[1];return r.a.createElement("div",{style:{width:"100%",margin:"20px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Row,null,t.currentFolder&&t.currentFolder.documents.map((e,n)=>r.a.createElement(p.a.Column,{computer:4,mobile:8,style:{padding:10}},r.a.createElement("div",{onMouseOver:()=>f(n),onMouseOut:()=>f(void 0),style:{cursor:"grab"}},r.a.createElement(Ie.a,{style:{height:130},raised:u===n},r.a.createElement(Ie.a.Content,null,r.a.createElement(Ue.a,{icon:!0,style:{padding:10},size:"small"},r.a.createElement(v.a,{onClick:Object(m.a)(d.a.mark((function n(){var r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getDocument(e.id);case 2:r=n.sent,a(r);case 4:case"end":return n.stop()}}),n)}))),name:"file pdf",color:"red"}),e.name,r.a.createElement(O.a,{onClick:Object(m.a)(d.a.mark((function a(){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.deleteDocument(e.id);case 2:case"end":return a.stop()}}),a)})))},r.a.createElement(De.a,null))))))))),r.a.createElement(p.a.Row,null,r.a.createElement("h3",null,"Files"))))}const Re=a(706).Player,Be=[".jpg",".png",".bmp",".JPG",".gif",".jpeg",".JPEG"],Pe=[".mov",".mp4",".avi",".m4v",".MOV",".MP4"];function Te(){const e=Object(n.useContext)(P),t=e.nas,a=(e.isLoading,e.update),c=e.selectedDocument,l=e.selectDocument,i=r.a.useState(null),s=Object(o.a)(i,2),u=s[0],f=s[1],h=Object(n.useState)(),E=Object(o.a)(h,2),b=E[0],g=E[1],x=Object(n.useState)(),w=Object(o.a)(x,2),k=w[0],y=w[1],C=Object(n.useState)(!1),S=Object(o.a)(C,2),M=S[0],D=S[1],I=Object(n.useState)(!1),N=Object(o.a)(I,2),R=N[0],B=N[1],T=Object(n.useState)(void 0),L=Object(o.a)(T,2),W=L[0],Y=L[1],J=Object(n.useState)(void 0),G=Object(o.a)(J,2),H=G[0],K=G[1],_=r.a.useState(null),V=Object(o.a)(_,2),q=V[0],$=V[1],Q=()=>{$(null)};function ee(e){return Be.includes(U.a.extname(e))}function ae(e){return Pe.includes(U.a.extname(e))}return r.a.createElement("div",{id:"file-list"},r.a.createElement(p.a,null,r.a.createElement(Ne,null),r.a.createElement(p.a.Row,{style:{overflow:"auto",overflowX:"hidden"}},t.currentFolder&&t.currentFolder.files.length>0&&r.a.createElement(ge.a,null,r.a.createElement(xe.a,null,r.a.createElement(we.a,null,r.a.createElement(ke.a,null,r.a.createElement(Oe.a,null,"Name"),r.a.createElement(Oe.a,null,"Last Modify"),r.a.createElement(Oe.a,null,"Size"),r.a.createElement(Oe.a,null,"Actions"))),r.a.createElement(ye.a,null,t.currentFolder.files.map((e,t)=>{return r.a.createElement(ke.a,{hover:!0},r.a.createElement(Oe.a,{style:{cursor:"grab"},onMouseOver:t=>{f(t.currentTarget),g(e)},onMouseLeave:()=>{f(null),g(void 0)},onClick:()=>{if(ee(e.file))Y(e.file);else if(ae(e.file)){var t;K({src:null!==(t=e.transcode_filepath)&&void 0!==t?t:e.file,cover:e.cover})}}},r.a.createElement(v.a,{name:(a=e.file,ee(a)?"images":ae(a)?"file video":"file"),size:"large",color:"teal"}),U.a.basename(e.filename)),r.a.createElement(Oe.a,null,A()(e.modified_at).format("MMM DD, YYYY")),r.a.createElement(Oe.a,null,he(e.size)),r.a.createElement(Oe.a,null,r.a.createElement(O.a,{onClick:t=>{y(e),$(t.currentTarget)}},r.a.createElement(z.a,null))));var a}))))),r.a.createElement(j.a,{id:"simple-menu",anchorEl:q,keepMounted:!0,open:Boolean(q),onClose:Q},r.a.createElement(F.a,{onClick:()=>{if(k){const e=document.createElement("a");e.href="".concat(k.file),document.body.appendChild(e),e.click(),document.body.removeChild(e)}Q()}},"Download"),r.a.createElement(F.a,{onClick:Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k&&(Q(),D(!0));case 1:case"end":return e.stop()}}),e)})))},"Rename"),r.a.createElement(F.a,{onClick:Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=5;break}return e.next=3,t.deleteFile(k.id);case 3:Q(),a();case 5:case"end":return e.stop()}}),e)})))},"Delete"),r.a.createElement(F.a,{onClick:Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k&&(Q(),B(!0));case 1:case"end":return e.stop()}}),e)})))},"Move To")),c&&r.a.createElement(se,{open:void 0!==c,setOpen:e=>{!e&&l(void 0)},document:c}),r.a.createElement(te.a,{open:void 0!==W,onClose:()=>Y(void 0)},r.a.createElement(Ee.a,{src:W,fluid:!0})),r.a.createElement(te.a,{open:void 0!==H,onClose:()=>K(void 0)},r.a.createElement(Re,{poster:H&&H.cover},r.a.createElement("source",{src:H&&H.src}))),k&&r.a.createElement(X,{type:"file",open:R,selectedFile:k,onClose:()=>{B(!1)}}),k&&r.a.createElement(Z,{type:"file",open:M,selectedFile:k,onClose:()=>{D(!1),y(void 0)}})),r.a.createElement(je.a,{open:Boolean(u),anchorEl:u},b&&r.a.createElement(Fe.a,{style:{padding:10}},ee(b.filename)&&r.a.createElement(Ce.a,{style:{height:140,width:140},image:b.file}),ae(b.filename)&&(b.cover?r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{style:{height:140,width:140},image:b.cover}),r.a.createElement(be.a,null," ",he(b.size))):r.a.createElement("div",null,b.filename," - ",he(b.size))))))}var Ae=a(457),Le=a.n(Ae),ze=a(908),We=a(909);function Ye(){const e=Object(n.useContext)(P),t=e.uploadFiles,a=e.uploadInfo,c=Object(n.useContext)(fe).systemInfo;return r.a.createElement(E.a,null,c&&r.a.createElement(p.a,{style:{height:"100%",marginTop:10}},r.a.createElement(p.a.Row,{style:{height:40}},r.a.createElement(p.a.Column,{width:8},r.a.createElement("div",null,"CPU"),r.a.createElement(ze.a,{color:"secondary",variant:"determinate",value:c.cpu})),r.a.createElement(p.a.Column,{width:8},r.a.createElement("div",null,"Memory"),r.a.createElement(ze.a,{title:"Memory",color:"secondary",variant:"determinate",value:c.memory.used/c.memory.total*100})))),t?t.map((e,t)=>r.a.createElement(b.a,null,r.a.createElement(We.a,null,r.a.createElement(v.a,{name:"file"})),r.a.createElement(g.a,{primary:e.name,secondary:r.a.createElement(ze.a,{color:"secondary",variant:a&&a.currentIndex===t?"determinate":"indeterminate",value:a&&a.currentIndex===t?a.progress:void 0})}))):r.a.createElement(p.a,{style:{height:"100%"},centered:!0,verticalAlign:"middle"},r.a.createElement("div",{style:{marginTop:"10px",marginBottom:"auto"}},"No Pending Uploads")))}var Je=a(466),Ge=a(910),He=a(932),Ke=a(30),_e=a(913),Ve=a(914),Xe=a(915),qe=a(920),Ze=a(155),$e=a(933),Qe=a(911),et=a(471),tt=a(912),at=a(283),nt=a(456),rt=a.n(nt);const ct=Object(Ge.a)(e=>Object(He.a)({popper:{marginTop:10,marginRight:15,width:"40ch",maxHeight:400,overflow:"auto"},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Ke.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Ke.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}}));function lt(){const e=ct(),t=Object(n.useContext)(P),a=t.nas,c=t.update,l=Object(n.useState)(!1),i=Object(o.a)(l,2),s=i[0],u=i[1],p=r.a.useState(null),f=Object(o.a)(p,2),h=f[0],v=f[1],E=Object(n.useState)(""),b=Object(o.a)(E,2),g=b[0],x=b[1],w=()=>{v(null)};return r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},s?r.a.createElement(Qe.a,{size:20,color:"inherit"}):r.a.createElement(rt.a,null)),r.a.createElement(et.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},onClick:e=>v(e.currentTarget),onChange:function(){var e=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,x(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onKeyDown:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=6;break}return u(!0),e.next=4,a.search(g);case 4:c(),u(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement(je.a,{open:Boolean(h),anchorEl:h},r.a.createElement(tt.a,{onClickAway:w},r.a.createElement(at.a,{className:e.popper},0===a.searchedFiles.length&&r.a.createElement(F.a,null,"No File. Press Enter to search"),a.searchedFiles.map(e=>r.a.createElement(F.a,{key:e.id,onClick:()=>{window.location.href="#/home/".concat(e.parent),w()}},U.a.basename(e.filename)))))))}const ot=Object(Je.a)({palette:{primary:{main:"#fafafa"}}}),it=Object(Ge.a)(e=>Object(He.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,display:"none",[e.breakpoints.up("sm")]:{display:"block"}},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Ke.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Ke.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}}));function st(){const e=Object(n.useContext)(P),t=(e.nas,e.isLoading),a=(e.update,Object(n.useState)(!1)),c=Object(o.a)(a,2),l=c[0],i=c[1],s=it();return r.a.createElement(_e.a,{theme:ot},r.a.createElement("div",{id:"home",style:{height:"100%",overflow:"hidden"}},r.a.createElement(Ve.a,{position:"static"},r.a.createElement(Xe.a,null,r.a.createElement(qe.a,{mdUp:!0},r.a.createElement(O.a,{className:s.menuButton,color:"inherit",onClick:()=>{i(!0)}},r.a.createElement(Le.a,null))),r.a.createElement(Ze.a,{className:s.title,variant:"h6",noWrap:!0},"Django Nas"),r.a.createElement(lt,null))),r.a.createElement($e.a,{open:l,onClose:()=>i(!1)},r.a.createElement("div",{style:{width:300,height:"100%"}},r.a.createElement($,null))),r.a.createElement(Q.a,{loading:t,style:{height:"100%",margin:0}},r.a.createElement(p.a,{style:{height:"100%",overflow:"hidden",position:"relative"}},r.a.createElement(p.a.Row,{style:{height:"100%",paddingTop:0,paddingBottom:0}},r.a.createElement(qe.a,{smDown:!0,implementation:"js"},r.a.createElement(p.a.Column,{computer:3,style:{height:"100%",backgroundColor:"#fcfcfc"}},r.a.createElement(ue.b,{id:"folder"},r.a.createElement(p.a.Row,{style:{height:"92%"}},r.a.createElement($,null)),r.a.createElement(p.a.Row,null,r.a.createElement(ve,null))))),r.a.createElement(p.a.Column,{computer:10,mobile:16,tablet:16,style:{height:"100%"}},r.a.createElement(ue.b,{id:"files"},r.a.createElement(Te,null))),r.a.createElement(qe.a,{smDown:!0,implementation:"js"},r.a.createElement(p.a.Column,{computer:3,style:{height:"100%",backgroundColor:"#fcfcfc"}},r.a.createElement(Ye,null)))))),r.a.createElement(me,null)))}var ut=a(916),dt=a(115);function mt(e){const t=e.title,a=e.used,n=e.total,c=e.color,l=e.color2;let o=[{name:"Used",value:a},{name:"Available",value:n-a}];return r.a.createElement(Q.a,null,r.a.createElement(dt.d,{minHeight:300,height:"100%",width:"100%",minWidth:200},r.a.createElement(dt.c,null,r.a.createElement(dt.b,{data:o,dataKey:"value",label:!0,fill:c,isAnimationActive:!1},r.a.createElement(dt.a,{fill:c}),r.a.createElement(dt.a,{fill:l})),r.a.createElement(dt.e,null))),r.a.createElement("span",null,t))}function pt(){const e=Object(n.useContext)(fe).systemInfo;return void 0===e?r.a.createElement("div",null,"Infomation Not Available"):r.a.createElement("div",{id:"home",style:{width:"100%",color:"black"}},r.a.createElement(ut.a,null,r.a.createElement("h1",null,"System Info"),r.a.createElement(p.a,{columns:2},r.a.createElement(p.a.Column,null,r.a.createElement(mt,{used:Math.round(e.disk.used/1024/1024),total:Math.round(e.disk.total/1024/1024),title:"Disk(MB)",color:"#0088FE",color2:"orange"})),r.a.createElement(p.a.Column,null,r.a.createElement(mt,{used:Math.round(e.memory.used/1024/1024),total:Math.round(e.memory.total/1024/1024),title:"Memory(MB)",color:"#0088FE",color2:"orange"})),r.a.createElement(p.a.Column,null,r.a.createElement(mt,{used:e.cpu,total:100,title:"CPU Usage(Percentage)",color:"#0088FE",color2:"orange"})),r.a.createElement(p.a.Column,null,r.a.createElement(Q.a,{style:{height:"100%"}},r.a.createElement("h4",null,"Temperature"),r.a.createElement("h1",null,e.temperature?e.temperature.toFixed(1):"None"))),r.a.createElement(p.a.Column,null,r.a.createElement(Q.a,{style:{height:"100%"}},r.a.createElement("h4",null,"Humidity"),r.a.createElement("h1",null,e.humidity?e.humidity.toFixed(1):"None"))),r.a.createElement(p.a.Column,null,r.a.createElement(Q.a,{style:{height:"100%"}},r.a.createElement("h4",null,"Pressure"),r.a.createElement("h1",null,e.pressure?e.pressure.toFixed(2):"None"))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ft=a(465);l.a.render(r.a.createElement(ft.I18nProvider,{catalogs:{}},r.a.createElement((function(){const e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=(t[0],t[1],Object(n.useState)(!1)),c=Object(o.a)(a,2),l=(c[0],c[1]);return r.a.createElement(pe,null,r.a.createElement(i.a,null,r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(s.b,{exact:!0,path:"/",component:()=>r.a.createElement(s.a,{to:"/home"})}),r.a.createElement(s.b,{exact:!0,path:"/home/:id?",component:e=>(l(!0),r.a.createElement(R,e,r.a.createElement(st,null)))}),r.a.createElement(s.b,{exact:!0,path:"/info",component:e=>(l(!0),r.a.createElement(pt,null))}))))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[517,1,2]]]);
//# sourceMappingURL=main.55edc064.chunk.js.map