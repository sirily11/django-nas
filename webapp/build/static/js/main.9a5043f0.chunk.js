(this["webpackJsonpelectron-react-template"]=this["webpackJsonpelectron-react-template"]||[]).push([[0],{1020:function(e,t,a){},1086:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),o=a.n(c),l=a(12),i=(a(633),a(55)),s=a(117),u=(a(634),a(3)),m=a.n(u),d=a(11),p=a(1182),f=a(1181),v=a(338),h=a(140),E=a(1136),b=a(1088),g=a(1145),x=a(1149),w=a(135),k=a.n(w),O=a(1141),y=a(1142),j=a(1150),C=a(578),S=a(1151),F=a(1129),M=a(579),D=a(34),L=a.n(D);const N="/api/folder/",T="/api/document/",R="/api/music/";class I{constructor(){var e=this;this.menus=void 0,this.currentFolder=void 0,this.searchedFiles=void 0,this.errorMsg=void 0,this.moveFileTo=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentFolder){t.next=7;break}return r="".concat("/api/file/").concat(a,"/"),t.next=5,L.a.patch(r,{parent:n});case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}(),this.fetchMusicList=Object(d.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="".concat(R),t.next=4,L.a.get(a);case 4:return n=t.sent,t.abrupt("return",n.data);case 8:t.prev=8,t.t0=t.catch(0),console.log("err"),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),this.moveDocument=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentFolder){t.next=7;break}return r="".concat(T).concat(a,"/"),t.next=5,L.a.patch(r,{parent:n});case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}(),this.moveFolderTo=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentFolder){t.next=7;break}return r="".concat(N).concat(a,"/"),t.next=5,L.a.patch(r,{parent:n});case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}(),this.rename=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentFolder){t.next=7;break}return r="".concat("/api/file/").concat(a,"/"),t.next=5,L.a.patch(r,{filename:n});case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}(),this.search=function(){var t=Object(d.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="".concat("/api/file?search=").concat(a),t.next=4,L.a.get(n);case 4:r=t.sent,e.searchedFiles=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.errorMsg=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),this.getContent=function(){var t=Object(d.a)(m.a.mark((function t(a){var n,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a?"".concat(N).concat(a,"/"):N,t.next=4,L.a.get(n);case 4:r=t.sent,c=r.data,e.menus=c.parents,e.currentFolder=c,e.errorMsg=void 0,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),e.errorMsg=t.t0,e.currentFolder=void 0;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),this.uploadFile=function(){var t=Object(d.a)(m.a.mark((function t(a,n,r,c){var o,l,i,s,u,d,p,f,v;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,o=0,l=!0,i=!1,s=void 0,t.prev=5,u=a[Symbol.iterator]();case 7:if(l=(d=u.next()).done){t.next=29;break}if(p=d.value,!e.currentFolder){t.next=25;break}if(r(o,0,0,p.size),!n){t.next=17;break}return t.next=14,e.getUploadFileAndCreateFolder(p);case 14:t.t0=t.sent,t.next=18;break;case 17:t.t0=e.getSingleUploadFile(p);case 18:return v=t.t0,t.next=21,L.a.post("/api/file/",v,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{let t=Math.round(100*e.loaded/e.total);r(o,t,p.size*e.loaded,e.total)}});case 21:return t.next=23,e.getContent(null===(f=e.currentFolder)||void 0===f?void 0:f.id);case 23:return t.next=25,c(p);case 25:o+=1;case 26:l=!0,t.next=7;break;case 29:t.next=35;break;case 31:t.prev=31,t.t1=t.catch(5),i=!0,s=t.t1;case 35:t.prev=35,t.prev=36,l||null==u.return||u.return();case 38:if(t.prev=38,!i){t.next=41;break}throw s;case 41:return t.finish(38);case 42:return t.finish(35);case 43:r(o,100,0,0),t.next=50;break;case 46:t.prev=46,t.t2=t.catch(0),console.log(t.t2),alert("Upload Failed: "+t.t2.toString());case 50:case"end":return t.stop()}}),t,null,[[0,46],[5,31,35,43],[36,,38,42]])})));return function(e,a,n,r){return t.apply(this,arguments)}}(),this.deleteFile=function(){var t=Object(d.a)(m.a.mark((function t(a,n=!0){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(!n||window.confirm("Are you sure you want to delete this file?"))||!e.currentFolder){t.next=7;break}return t.next=5,L.a.delete("".concat("/api/file/").concat(a,"/"));case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert("Upload Failed: "+t.t0.toString());case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),this.deleteFolder=function(){var t=Object(d.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!window.confirm("Are you sure you want to delete this folder?")||!e.currentFolder){t.next=7;break}return t.next=5,L.a.delete("".concat(N).concat(a,"/"));case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert("Upload Failed: "+t.t0.toString());case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),this.createNewFolder=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFolder){t.next=7;break}return t.next=3,L.a.post(N,{name:a,parent:e.currentFolder.id?e.currentFolder.id:null});case 3:n=t.sent,e.currentFolder.folders.push(n.data),t.next=8;break;case 7:alert("Create new folder error: empty parent folder");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.renameFolder=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFolder){t.next=8;break}return t.next=3,L.a.patch("".concat(N).concat(a,"/"),{name:n});case 3:r=t.sent,(c=e.currentFolder.folders.findIndex(e=>e.id===a))>-1&&(e.currentFolder.folders[c]=r.data),t.next=9;break;case 8:alert("Rename new folder error: empty parent folder");case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.renameDocument=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFolder){t.next=8;break}return t.next=3,L.a.patch("".concat(T).concat(a,"/"),{name:n});case 3:r=t.sent,(c=e.currentFolder.documents.findIndex(e=>e.id===a))>-1&&(e.currentFolder.documents[c]=r.data),t.next=9;break;case 8:alert("Rename new document error");case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.getDocument=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("".concat(T).concat(t,"/"));case 2:return a=e.sent,e.abrupt("return",Promise.resolve(Object(M.a)({},a.data,{content:JSON.parse(a.data.content)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createNewDocument=function(){var t=Object(d.a)(m.a.mark((function t(a,n,r){var c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.a.post(T,{name:a,parent:e.currentFolder&&e.currentFolder.id?e.currentFolder.id:r,content:n?JSON.stringify(n.ops):void 0});case 2:return c=t.sent,e.currentFolder&&e.currentFolder.documents.push(c.data),t.abrupt("return",c.data);case 5:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),this.updateDocument=function(){var t=Object(d.a)(m.a.mark((function t(a,n,r){var c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.a.patch("".concat(T).concat(a,"/"),{name:n,content:JSON.stringify(null===r||void 0===r?void 0:r.ops)});case 2:c=t.sent,e.currentFolder&&(o=e.currentFolder.documents.findIndex(e=>e.id===a))>-1&&(e.currentFolder.documents[o]=c.data);case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),this.deleteDocument=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFolder){t.next=13;break}if(!window.confirm("Do you want to delete this document?")){t.next=11;break}return t.next=5,L.a.delete("".concat(T).concat(a,"/"));case 5:return n=t.sent,t.next=8,e.getContent(e.currentFolder.id);case 8:return t.abrupt("return",Promise.resolve(n.data));case 11:t.next=15;break;case 13:return alert("Create new folder error: empty parent folder"),t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.menus=[],this.searchedFiles=[]}getSingleUploadFile(e){if(this.currentFolder){let t=new FormData;return t.append("file",e),this.currentFolder.id&&t.append("parent",this.currentFolder.id.toString()),t}}getUploadFileAndCreateFolder(e){var t=this;return Object(d.a)(m.a.mark((function a(){var n,r,c;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.currentFolder){a.next=8;break}return r=e.webkitRelativePath,c=new FormData,console.log(t.currentFolder),c.append("file",e),t.currentFolder.id&&c.append("parent","".concat(null===(n=t.currentFolder)||void 0===n?void 0:n.id)),c.append("paths",r),a.abrupt("return",c);case 8:case"end":return a.stop()}}),a)})))()}}class U extends n.Component{constructor(e){var t;super(e),t=this,this.setUploadedFile=e=>{this.setState({uploadedFiles:e})},this.selectDocument=e=>{this.setState({selectedDocument:e})},this.updateUploadInfo=e=>{this.setState({uploadInfo:e})},this.setUploadInfo=e=>{this.setState({uploadFiles:e})},this.fetch=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({isLoading:!0}),n=t.state.nas,e.next=4,n.getContent(a);case 4:t.setState({nas:n,isLoading:!1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.update=()=>{this.setState({nas:this.state.nas})},this.state={nas:new I,selectDocument:this.selectDocument,updateUploadInfo:this.updateUploadInfo,setUploadInfo:this.setUploadInfo,update:this.update,uploadedFiles:[],setUploadedFiles:this.setUploadedFile,isLoading:!1}}componentDidUpdate(e){var t=this;return Object(d.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.props.match.params.id===e.match.params.id){a.next=4;break}return n=t.props.match.params.id,a.next=4,t.fetch(n);case 4:case"end":return a.stop()}}),a)})))()}componentWillMount(){var e=this;return Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,e.fetch(a);case 3:case"end":return t.stop()}}),t)})))()}render(){return r.a.createElement(P.Provider,{value:this.state},this.props.children)}}const z={nas:new I,uploadedFiles:[],setUploadedFiles:e=>{},update:()=>{},selectDocument:()=>{},updateUploadInfo:e=>{},setUploadInfo:e=>{},isLoading:!1},P=r.a.createContext(z);var W=a(99),B=a.n(W),_=(a(369),a(250)),A=a.n(_),q=a(39),H=a.n(q),Y=a(1133),G=a(1134),J=a(1173),K=a(1137),Q=a(1138);function V(e){const t=Object(n.useContext)(P).nas,a=Object(n.useState)((()=>{switch(e.type){case"file":let t=q.extname(e.selectedFile.filename);return q.basename(e.selectedFile.filename,t);case"folder":default:return e.selectedFile.name}})()),c=Object(l.a)(a,2),o=c[0],i=c[1];return r.a.createElement(F.a,{open:e.open,fullWidth:!0},r.a.createElement(Y.a,null,"Rename"),r.a.createElement(G.a,null,r.a.createElement(J.a,{color:"secondary",fullWidth:!0,value:o,onChange:e=>{i(e.target.value)}})),r.a.createElement(K.a,null,r.a.createElement(Q.a,{onClick:()=>{e.onClose(),i("")}},"cancel"),r.a.createElement(Q.a,{onClick:Object(d.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!o){a.next=14;break}a.t0=e.type,a.next="file"===a.t0?4:"folder"===a.t0?8:"document"===a.t0?11:14;break;case 4:return n=q.extname(e.selectedFile.filename),a.next=7,t.rename(e.selectedFile.id,"".concat(o).concat(n));case 7:return a.abrupt("break",14);case 8:return a.next=10,t.renameFolder(e.selectedFile.id,o);case 10:return a.abrupt("break",14);case 11:return a.next=13,t.renameDocument(e.selectedFile.id,o);case 13:return a.abrupt("break",14);case 14:e.onClose();case 15:case"end":return a.stop()}}),a)})))},"ok")))}var X=a(1139),Z=a(1140),$=a(1143),ee=a(1144),te=a(1146),ae=a(1147),ne=a(1187),re=a(248),ce=a.n(re),oe=a(520),le=a.n(oe),ie=a(1179);class se extends n.Component{constructor(e){super(e),this.update=()=>{this.setState({nas:this.state.nas})},this.state={nas:new I,update:this.update}}render(){return r.a.createElement(me.Provider,{value:this.state},this.props.children)}}const ue={nas:new I,update:()=>{}},me=r.a.createContext(ue);function de(e){var t,a,c,o,i;const s=Object(n.useContext)(me),u=s.nas,p=s.update,f=e.currentFile,v=e.onMove,h=e.onClose,x=Object(n.useState)(!1),w=Object(l.a)(x,2),j=w[0],C=w[1],S=Object(n.useState)(void 0===u.currentFolder),F=Object(l.a)(S,2),M=F[0],D=F[1];return u.currentFolder||u.getContent(f.parent).then(()=>{D(!1)}).catch(e=>{alert("".concat(e)),D(!1)}),r.a.createElement(X.a,{style:{width:"400px"}},r.a.createElement(Z.a,null,r.a.createElement("div",null,r.a.createElement(O.a,{disabled:void 0===(null===(t=u.currentFolder)||void 0===t?void 0:t.parent),onClick:Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,u.getContent(null===(t=u.currentFolder)||void 0===t?void 0:t.parent);case 3:p(),setTimeout(()=>{D(!1)},500);case 5:case"end":return e.stop()}}),e)})))},r.a.createElement(k.a,null)),null!==(a=null===(c=u.currentFolder)||void 0===c?void 0:c.name)&&void 0!==a?a:"root"),r.a.createElement(y.a,{in:M,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement($.a,{style:{backgroundColor:"#47bcff"}})),r.a.createElement(y.a,{in:!M,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(E.a,{style:{padding:0,maxHeight:400,overflowY:"auto"}},null===(o=u.currentFolder)||void 0===o||null===(i=o.folders)||void 0===i?void 0:i.map((e,t)=>r.a.createElement(b.a,{key:"folder-".concat(t),button:!0,onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D(!0),t.next=3,u.getContent(e.id);case 3:p(),setTimeout(()=>{D(!1)},500);case 5:case"end":return t.stop()}}),t)})))},r.a.createElement(ee.a,null,r.a.createElement(ce.a,null)),r.a.createElement(g.a,{primary:e.name}))))),r.a.createElement(te.a,null)),r.a.createElement(ae.a,{disableSpacing:!0},r.a.createElement(ne.a,{title:"New Folder"},r.a.createElement(O.a,null,r.a.createElement(le.a,null))),r.a.createElement(ie.a,{loading:j,color:"blue",style:{marginLeft:"auto"},size:"tiny",onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f||!u.currentFolder){e.next=12;break}return e.prev=1,C(!0),e.next=5,v(f,u.currentFolder);case 5:setTimeout(()=>{C(!1),p(),h(),u.currentFolder=void 0},400),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Cannot move to this location"),C(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))},"Move Here")))}function pe(){const e=Object(n.useContext)(P),t=e.nas,a=e.isLoading,c=e.update,o=Object(n.useState)(!1),s=Object(l.a)(o,2),u=s[0],w=s[1],M=Object(n.useState)(!1),D=Object(l.a)(M,2),N=D[0],T=D[1],R=Object(n.useState)(void 0),I=Object(l.a)(R,2),U=I[0],z=I[1],W=r.a.useState(null),_=Object(l.a)(W,2),q=_[0],H=_[1],Y=()=>{H(null)};return r.a.createElement("div",{style:{overflow:"auto",overflowX:"hidden",height:"100%",color:"blue"}},r.a.createElement(E.a,null,r.a.createElement(p.a,{centered:!0},r.a.createElement(p.a.Row,{verticalAlign:"middle"},r.a.createElement(p.a.Column,{width:5},t.currentFolder&&t.currentFolder.parent?r.a.createElement(i.b,{to:"/home/".concat(t.currentFolder.parent)},r.a.createElement(O.a,null,r.a.createElement(k.a,null))):r.a.createElement(O.a,null,r.a.createElement(i.b,{to:"/home"},r.a.createElement(k.a,null))," ")),r.a.createElement(p.a.Column,{width:11},r.a.createElement("div",{style:{color:"black"}},t.currentFolder&&t.currentFolder.name)))),t.errorMsg&&r.a.createElement(f.a,{error:!0},r.a.createElement(v.a,null,"Network Error"),r.a.createElement("div",null,t.errorMsg.toString())),r.a.createElement(y.a,{in:!a,timeout:300},t.currentFolder&&t.currentFolder.folders.map((e,t)=>r.a.createElement(b.a,{button:!0,key:"folder-".concat(e.id)},r.a.createElement(x.a,null,r.a.createElement(h.a,{name:"folder",size:"large",color:"grey"})),r.a.createElement(g.a,{onClick:()=>{window.location.href="#/home/".concat(e.id)},style:{color:"black"},primary:e.name,secondary:B()(e.modified_at).format("MMM DD, YYYY")}),r.a.createElement(j.a,null,r.a.createElement(O.a,{onClick:t=>{H(t.currentTarget),z(e)}},r.a.createElement(A.a,null))))))),r.a.createElement(C.a,{id:"simple-menu",anchorEl:q,keepMounted:!0,open:Boolean(q),onClose:Y},r.a.createElement(S.a,{onClick:()=>{T(!0),Y()}},"Rename"),r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=10;break}return e.next=3,L.a.post("".concat("/api/download/").concat(U.id));case 3:t=e.sent,(a=document.createElement("a")).href="".concat(t.data.download_url),console.log(a.href),document.body.appendChild(a),a.click(),document.body.removeChild(a);case 10:case"end":return e.stop()}}),e)})))},"Download Folder"),r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=6;break}return e.next=3,t.deleteFolder(U.id);case 3:Y(),c(),z(void 0);case 6:case"end":return e.stop()}}),e)})))},"Delete"),r.a.createElement(S.a,{onClick:()=>{Y(),w(!0)}},"Move To")),U&&N&&r.a.createElement(V,{type:"folder",selectedFile:U,open:N,onClose:()=>{z(void 0),T(!1)}}),U&&u&&r.a.createElement(F.a,{open:u,onClose:()=>{w(!1),z(void 0)}},r.a.createElement(de,{currentFile:U,onClose:()=>{w(!1),z(void 0)},onMove:function(){var e=Object(d.a)(m.a.mark((function e(a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.id!==n.id){e.next=2;break}throw Error("Cannot move to this place");case 2:return e.next=4,t.moveFolderTo(a.id,n.id);case 4:c();case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})))}var fe=a(1183),ve=a(340),he=a(1174),Ee=a(1152);function be(e){const t=Object(n.useContext)(P),a=t.nas,c=t.update,o=t.uploadInfo,l=t.setUploadInfo,i=t.uploadFiles,s=t.updateUploadInfo,u=(t.setUploadedFiles,t.uploadedFiles),f=e=>{let t=e.target.files;if(t){let e=[];for(var a=0;a<t.length;a++)e.push(t[a]);l(e)}};return r.a.createElement(he.a,{open:e.open},r.a.createElement(he.a.Header,null,"Select ",e.isDir?"Folder":"Files"," "),r.a.createElement(he.a.Content,null,r.a.createElement(p.a.Row,null,e.isDir?r.a.createElement("input",{type:"file",multiple:!0,webkitdirectory:"",name:"Upload file",onChange:f}):r.a.createElement("input",{type:"file",multiple:!0,name:"Upload file",onChange:f})),o&&r.a.createElement(p.a.Row,{style:{marginTop:20}},r.a.createElement(fe.a,null,r.a.createElement(Ee.a,{percent:o.progress,attached:"top",color:"green",active:!0}),o.currentName," ",o.currentIndex,"/",o.total," --- ",o.progress," %",r.a.createElement(Ee.a,{percent:o.currentIndex/o.total*100,attached:"bottom",color:"blue",active:!0})))),r.a.createElement(he.a.Actions,null,r.a.createElement(ie.a,{basic:!0,color:"red",onClick:()=>e.setOpen(!1)},r.a.createElement(h.a,{name:"remove"})," ",o?"Minimize":"Close"),r.a.createElement(ie.a,{disabled:void 0===i,color:"green",loading:void 0!==o,inverted:!0,onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=5;break}return t.next=3,a.uploadFile(i,e.isDir,(e,t,a,n)=>{s({total:i.length,currentIndex:e,currentName:i[e]?i[e].name:"Finished",progress:t,uploadedDataSize:a,totalDataSize:n})},function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.push(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:c(),setTimeout(()=>{e.setOpen(!1),l(void 0),s(void 0)},300);case 5:case"end":return t.stop()}}),t)})))},r.a.createElement(h.a,{name:"checkmark"})," Upload")))}let ge;!function(e){e.text="text",e.number="number",e.datetime="datetime",e.foreignkey="foreignkey",e.unknown="unknown",e.select="select",e.tomanyTable="tomany-table"}(ge||(ge={}));ge.text;function xe(e){const t=Object(n.useContext)(P),a=t.nas,c=t.update,o=Object(n.useState)(""),i=Object(l.a)(o,2),s=i[0],u=i[1],p=Object(n.useState)(!1),f=Object(l.a)(p,2),v=f[0],E=f[1];return r.a.createElement(F.a,{open:e.open,fullWidth:!0},r.a.createElement(Y.a,null,"New Folder"),r.a.createElement(G.a,null,r.a.createElement(J.a,{onChange:e=>{u(e.target.value)},value:s,color:"secondary",fullWidth:!0,label:"Folder Name",required:!0})),r.a.createElement(K.a,null,r.a.createElement(ie.a,{basic:!0,color:"red",onClick:()=>e.setOpen(!1)},r.a.createElement(h.a,{name:"remove"})," No"),r.a.createElement(ie.a,{basic:!0,color:"green",onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(!0),t.next=3,a.createNewFolder(s);case 3:c(),E(!1),e.setOpen(!1);case 6:case"end":return t.stop()}}),t)}))),loading:v},r.a.createElement(h.a,{name:"add"})," Create")))}var we=a(139),ke=a(1184);function Oe(e){const t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(l.a)(i,2),u=s[0],p=s[1],f=(e.document,Object(n.useContext)(P)),v=f.nas,h=f.update;return r.a.createElement(F.a,{open:e.open,onClose:()=>e.setOpen(!1),fullWidth:!0},r.a.createElement(Y.a,null,"Document"),r.a.createElement(G.a,null,r.a.createElement(J.a,{color:"secondary",value:c,label:"You Document Title",onChange:e=>{o(e.target.value)},fullWidth:!0})),r.a.createElement(K.a,null,r.a.createElement(ie.a,{onClick:()=>{e.setOpen(!1)}},"close"),r.a.createElement(ie.a,{loading:u,color:"blue",onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,p(!0),!c){t.next=9;break}return t.next=5,v.createNewDocument(c,void 0);case 5:h(),o(void 0),e.setOpen(!1),p(!1);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0.toString()),p(!1);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))},"Create")))}function ye(){Object(n.useContext)(P).nas;const e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(l.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(!1),d=Object(l.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(!1),h=Object(l.a)(v,2),E=h[0],b=h[1];return r.a.createElement("div",null,r.a.createElement(we.a,{id:"folder"},r.a.createElement(ke.a,{id:"folder",vertical:!0},r.a.createElement(we.c,{onClick:()=>{f(!0)}},r.a.createElement(ve.a,null,"New Folder")))),r.a.createElement(we.a,{id:"files"},r.a.createElement(ke.a,{vertical:!0},r.a.createElement(ve.a,{onClick:()=>b(!0)},"New Document"),r.a.createElement(ve.a,{onClick:()=>{c(!0)}},"Upload Files"),r.a.createElement(ve.a,{onClick:()=>{u(!0)}},"Upload Folder"))),r.a.createElement(be,{isDir:!1,open:a,setOpen:c}),r.a.createElement(be,{isDir:!0,open:s,setOpen:u}),r.a.createElement(xe,{open:p,setOpen:f}),r.a.createElement(Oe,{open:E,setOpen:b}))}class je extends n.Component{constructor(e){super(e),this.fetchSystemInfo=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("/system/");case 2:return t=e.sent,e.abrupt("return",Promise.resolve(t.data));case 4:case"end":return e.stop()}}),e)}))),this.state={}}componentDidMount(){var e=this;return Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchSystemInfo();case 2:(a=t.sent)&&e.setState({systemInfo:a});case 4:case"end":return t.stop()}}),t)})))()}render(){return r.a.createElement(Ce.Provider,{value:this.state},this.props.children)}}const Ce=r.a.createContext({});function Se(e,t=2){if(0===e)return"0 Bytes";const a=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}function Fe(){const e=Object(n.useContext)(Ce).systemInfo;return void 0===e?r.a.createElement(f.a,null,r.a.createElement("p",null,"No Info Avaliable currently")):r.a.createElement("div",null,r.a.createElement("span",null,"Used Sapce: ",Se(e.disk.used),"/",Se(e.disk.total)),r.a.createElement(Ee.a,{percent:(e.disk.used/e.disk.total*100).toFixed(2),size:"tiny",color:"green"}))}var Me=a(576),De=a(1180),Le=a(251),Ne=a.n(Le),Te=a(1155),Re=a(1156),Ie=a(1157),Ue=a(1158),ze=a(1159),Pe=a(1160),We=a(1177),Be=a(1161),_e=a(1148),Ae=a(1154),qe=a(1153),He=(a(803),a(116)),Ye=a.n(He);function Ge(e){const t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(),s=Object(l.a)(i,2),u=s[0],p=s[1],f=Object(n.useState)(!1),v=Object(l.a)(f,2),h=v[0],E=(v[1],Object(n.useState)(!1)),b=Object(l.a)(E,2),g=b[0],x=b[1],w=e.document,k=Object(n.useContext)(P),O=k.nas,y=k.update;return void 0===u&&p(w?w.name:""),r.a.createElement(he.a,{open:e.open,centered:!1},r.a.createElement(he.a.Header,null,r.a.createElement(J.a,{value:u,label:"You Document Title",onChange:e=>{p(e.target.value)},fullWidth:!0})),r.a.createElement(he.a.Content,null,r.a.createElement(Ye.a,{ref:e=>o(null!=e?e:void 0),defaultValue:w&&w.content})),r.a.createElement(he.a.Actions,null,r.a.createElement(ie.a,{onClick:()=>{if(h){window.confirm("Are you sure you want to exit? You will lose unsave data.")&&e.setOpen(!1)}else e.setOpen(!1)}},"close"),r.a.createElement(ie.a,{loading:g,color:"blue",onClick:Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,x(!0),!c||!u){t.next=19;break}if(a=c.getEditor().getContents(),!w){t.next=9;break}return t.next=7,O.updateDocument(w.id,u,a);case 7:t.next=15;break;case 9:if(""===u){t.next=14;break}return t.next=12,O.createNewDocument(u,a);case 12:t.next=15;break;case 14:throw"Name should not be empty";case 15:y(),p(void 0),e.setOpen(!1),x(!1);case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(0),alert(t.t0.toString()),x(!1);case 25:case"end":return t.stop()}}),t,null,[[0,21]])})))},"Save")))}var Je=a(538),Ke=a.n(Je);function Qe(){const e=Object(n.useContext)(P),t=e.nas,a=e.update,c=Object(n.useState)(!1),o=Object(l.a)(c,2),s=(o[0],o[1],Object(n.useState)()),u=Object(l.a)(s,2),f=u[0],v=(u[1],Object(n.useState)(!1)),h=Object(l.a)(v,2),E=h[0],b=h[1],g=Object(n.useState)(),x=Object(l.a)(g,2),w=x[0],k=x[1];return r.a.createElement("div",{style:{width:"100%",margin:"20px"}},r.a.createElement(p.a,null,r.a.createElement(p.a.Row,null,t.currentFolder&&t.currentFolder.documents.map((e,n)=>r.a.createElement(p.a.Column,{computer:4,mobile:8,style:{padding:10},key:"document-".concat(n)},r.a.createElement(X.a,{variant:"outlined",raised:f===n},r.a.createElement(i.b,{to:"/document/".concat(e.id)},r.a.createElement(qe.a,{style:{height:80}},r.a.createElement(Z.a,null,r.a.createElement("h3",null,e.name)))),r.a.createElement(ae.a,null,r.a.createElement(O.a,{onClick:Object(d.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.deleteDocument(e.id);case 2:a();case 3:case"end":return n.stop()}}),n)})))},r.a.createElement(Ne.a,null)),r.a.createElement(O.a,{onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k(e),b(!0);case 2:case"end":return t.stop()}}),t)})))},r.a.createElement(Ke.a,null)))))))),w&&r.a.createElement(V,{type:"document",open:E,selectedFile:w,onClose:()=>{b(!1),k(void 0),a()}}))}var Ve=a(171);function Xe(e){const t=Object(n.useState)(1),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(1),s=Object(l.a)(i,2);s[0],s[1];return r.a.createElement(Ve.Document,{file:e.file,onLoadSuccess:e=>{o(e.numPages)}},Array.from(new Array(c),(e,t)=>r.a.createElement(Ve.Page,{key:"page-".concat(t),pageNumber:t+1})))}Ve.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Ve.pdfjs.version,"/pdf.worker.js");var Ze=a(550),$e=a.n(Ze),et=a(199),tt=a(575),at=(a(843),a(252));const nt=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at.fetchFromUrl(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();class rt extends r.a.Component{constructor(e){super(e),this.state={}}componentWillMount(){var e=this;return Object(d.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.musicSrc,t.next=3,nt(a);case 3:n=t.sent,e.setState({tag:n});case 5:case"end":return t.stop()}}),t)})))()}componentDidUpdate(e){var t=this;return Object(d.a)(m.a.mark((function a(){var n,r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.props.musicSrc,e.musicSrc===n){a.next=6;break}return a.next=4,nt(n);case 4:r=a.sent,t.setState({tag:r});case 6:case"end":return a.stop()}}),a)})))()}render(){var e,t;const a=this.props,n=a.musicSrc,c=a.onClose,o=this.state.tag,l=null===o||void 0===o?void 0:o.common.picture;let i=void 0;return l&&l.length>0&&(i=l[0].data.toString("base64"),i="data:image/jpeg;base64,"+i),r.a.createElement(F.a,{fullWidth:!0,open:void 0!==n,onClose:c,style:{overflowX:"hidden"}},r.a.createElement(Ae.a,{style:{height:500,width:"100%"},image:i,title:decodeURIComponent(null!==(e=null===o||void 0===o?void 0:o.common.title)&&void 0!==e?e:q.basename(n))}),r.a.createElement(G.a,null,r.a.createElement(et.a,{component:"h5",variant:"h5"},decodeURIComponent(null!==(t=null===o||void 0===o?void 0:o.common.title)&&void 0!==t?t:q.basename(n))),r.a.createElement(et.a,{variant:"subtitle1",color:"textSecondary"},null===o||void 0===o?void 0:o.common.artist),r.a.createElement(et.a,{variant:"subtitle1",color:"textSecondary"},null===o||void 0===o?void 0:o.common.album)),r.a.createElement("div",null,r.a.createElement(tt.a,{volume:.5,src:n})))}}const ct=a(937).Player,ot=[".jpg",".png",".bmp",".JPG",".gif",".jpeg",".JPEG"],lt=[".mov",".mp4",".avi",".m4v",".MOV",".MP4"],it=[".pdf"],st=[".mp3",".m4a"];function ut(){const e=Object(n.useContext)(P),t=e.nas,a=(e.isLoading,e.update),c=e.selectedDocument,o=e.selectDocument,i=r.a.useState(null),s=Object(l.a)(i,2),u=s[0],f=s[1],v=Object(n.useState)([]),E=Object(l.a)(v,2),b=E[0],g=E[1],x=Object(n.useState)(),w=Object(l.a)(x,2),k=w[0],y=w[1],j=Object(n.useState)(),M=Object(l.a)(j,2),D=M[0],L=M[1],N=Object(n.useState)(!1),T=Object(l.a)(N,2),R=T[0],I=T[1],U=Object(n.useState)(!1),z=Object(l.a)(U,2),W=z[0],_=z[1],q=Object(n.useState)(!1),Y=Object(l.a)(q,2),G=Y[0],J=Y[1],K=Object(n.useState)(void 0),Q=Object(l.a)(K,2),Z=Q[0],$=Q[1],ee=Object(n.useState)(void 0),te=Object(l.a)(ee,2),ae=te[0],re=te[1],ce=Object(n.useState)(void 0),oe=Object(l.a)(ce,2),le=oe[0],ie=oe[1],se=Object(n.useState)(void 0),ue=Object(l.a)(se,2),me=ue[0],pe=ue[1],fe=r.a.useState(null),ve=Object(l.a)(fe,2),Ee=ve[0],be=ve[1],ge=()=>{be(null)};function xe(e){return ot.includes(H.a.extname(e))}function we(e){return lt.includes(H.a.extname(e))}return r.a.createElement("div",{id:"file-list"},r.a.createElement(p.a,null,r.a.createElement(Qe,null),r.a.createElement(Te.a,null,r.a.createElement("div",null,0===b.length?r.a.createElement("h2",null,"Files"):r.a.createElement("h2",null,"Selected ",b.length," files")),0===b.length?r.a.createElement("div",null," "):r.a.createElement("div",null,r.a.createElement(ne.a,{title:"Delete"},r.a.createElement(O.a,{"aria-label":"delete",onClick:Object(d.a)(m.a.mark((function e(){var n,r,c,o,l,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete these files?")){e.next=30;break}n=!0,r=!1,c=void 0,e.prev=5,o=b[Symbol.iterator]();case 7:if(n=(l=o.next()).done){e.next=15;break}return i=l.value,e.next=11,t.deleteFile(i.id,!1);case 11:a();case 12:n=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),r=!0,c=e.t0;case 21:e.prev=21,e.prev=22,n||null==o.return||o.return();case 24:if(e.prev=24,!r){e.next=27;break}throw c;case 27:return e.finish(24);case 28:return e.finish(21);case 29:g([]);case 30:case"end":return e.stop()}}),e,null,[[5,17,21,29],[22,,24,28]])})))},r.a.createElement(Ne.a,null))),r.a.createElement(ne.a,{title:"Move To"},r.a.createElement(O.a,{"aria-label":"Move To",onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(!0);case 1:case"end":return e.stop()}}),e)})))},r.a.createElement($e.a,null))))),r.a.createElement(p.a.Row,{style:{overflow:"auto",overflowX:"hidden"}},t.currentFolder&&t.currentFolder.files.length>0&&r.a.createElement(Re.a,null,r.a.createElement(Ie.a,null,r.a.createElement(Ue.a,null,r.a.createElement(ze.a,null,r.a.createElement(Pe.a,null,r.a.createElement(We.a,{onChange:e=>{e.target.checked?t.currentFolder&&g(t.currentFolder.files):g([]),a()},checked:b.length===t.currentFolder.files.length})),r.a.createElement(Pe.a,null,"Name"),r.a.createElement(Pe.a,null,"Last Modify"),r.a.createElement(Pe.a,null,"Size"),r.a.createElement(Pe.a,null,"Actions"))),r.a.createElement(Be.a,null,t.currentFolder.files.map((e,t)=>{return r.a.createElement(ze.a,{hover:!0,selected:b.includes(e)},r.a.createElement(Pe.a,null,r.a.createElement(We.a,{checked:b.includes(e),onChange:t=>{if(t.target.checked)b.push(e);else{let t=b.indexOf(e);b.splice(t,1)}a(),g(b)}})),r.a.createElement(Pe.a,{style:{cursor:"grab"},onMouseOver:t=>{f(t.currentTarget),y(e)},onMouseLeave:()=>{f(null),y(void 0)},onClick:()=>{if(xe(e.file))$(e.file);else if(we(e.file)){var t;ie({src:null!==(t=e.transcode_filepath)&&void 0!==t?t:e.file,cover:e.cover})}else a=e.file,st.includes(H.a.extname(a))?re(e.file):function(e){return it.includes(H.a.extname(e))}(e.file)&&pe(e.file);var a}},r.a.createElement(h.a,{name:(n=e.file,xe(n)?"images":we(n)?"file video":"file"),size:"large",color:"teal"}),H.a.basename(e.filename)),r.a.createElement(Pe.a,null,B()(e.modified_at).format("MMM DD, YYYY")),r.a.createElement(Pe.a,null,Se(e.size)),r.a.createElement(Pe.a,null,r.a.createElement(O.a,{onClick:t=>{L(e),be(t.currentTarget)}},r.a.createElement(A.a,null))));var n}))))),r.a.createElement(C.a,{id:"simple-menu",anchorEl:Ee,keepMounted:!0,open:Boolean(Ee),onClose:ge},r.a.createElement(S.a,{onClick:()=>{if(D){const e=document.createElement("a");e.href="".concat(D.file),document.body.appendChild(e),e.click(),document.body.removeChild(e)}ge()}},"Download"),r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D&&(ge(),I(!0));case 1:case"end":return e.stop()}}),e)})))},"Rename"),r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=5;break}return e.next=3,t.deleteFile(D.id);case 3:ge(),a();case 5:case"end":return e.stop()}}),e)})))},"Delete"),r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D&&(ge(),_(!0));case 1:case"end":return e.stop()}}),e)})))},"Move To")),ae&&r.a.createElement(rt,{musicSrc:ae,onClose:()=>re(void 0)}),c&&r.a.createElement(Ge,{open:void 0!==c,setOpen:e=>{!e&&o(void 0)},document:c}),r.a.createElement(he.a,{open:void 0!==Z,onClose:()=>$(void 0)},r.a.createElement(Me.a,{src:Z,fluid:!0})),r.a.createElement(he.a,{open:void 0!==le,onClose:()=>ie(void 0)},r.a.createElement(ct,{poster:le&&le.cover},r.a.createElement("source",{src:le&&le.src}))),r.a.createElement(he.a,{open:void 0!==me,onClose:()=>pe(void 0)},me&&r.a.createElement(Xe,{file:me})),D&&r.a.createElement(F.a,{open:W,scroll:"paper",onClose:()=>{L(void 0),_(!1)}},r.a.createElement(de,{currentFile:D,onClose:()=>{L(void 0),_(!1)},onMove:function(){var e=Object(d.a)(m.a.mark((function e(n,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.moveFileTo(n.id,r.id);case 2:a();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})),b.length>0&&r.a.createElement(F.a,{open:G,onClose:()=>{J(!1)}},r.a.createElement(de,{currentFile:b[0],onClose:()=>{g([]),J(!1)},onMove:function(){var e=Object(d.a)(m.a.mark((function e(n,r){var c,o,l,i,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=!0,o=!1,l=void 0,e.prev=3,i=b[Symbol.iterator]();case 5:if(c=(s=i.next()).done){e.next=13;break}return u=s.value,e.next=9,t.moveFileTo(u.id,r.id);case 9:a();case 10:c=!0,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),o=!0,l=e.t0;case 19:e.prev=19,e.prev=20,c||null==i.return||i.return();case 22:if(e.prev=22,!o){e.next=25;break}throw l;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}}),e,null,[[3,15,19,27],[20,,22,26]])})));return function(t,a){return e.apply(this,arguments)}}()})),D&&r.a.createElement(V,{type:"file",open:R,selectedFile:D,onClose:()=>{I(!1),L(void 0)}})),r.a.createElement(_e.a,{open:Boolean(u),anchorEl:u},k&&r.a.createElement(X.a,{style:{padding:10}},xe(k.filename)&&r.a.createElement(Ae.a,{style:{height:140,width:140},image:k.file}),we(k.filename)&&k.cover?r.a.createElement(qe.a,null,r.a.createElement(Ae.a,{style:{height:140,width:140},image:k.cover}),r.a.createElement(De.a,null," ",Se(k.size))):r.a.createElement("div",null,k.filename," - ",Se(k.size)))))}var mt=a(552),dt=a.n(mt),pt=a(580),ft=a(551);function vt(){const e=Object(n.useContext)(P),t=e.uploadFiles,a=e.uploadInfo,c=e.uploadedFiles,o=Object(n.useContext)(Ce).systemInfo;let l=t?t.filter(e=>!c.includes(e)):[];return r.a.createElement(E.a,{style:{overflowY:"hidden",height:"100%",overflowX:"hidden"}},o&&r.a.createElement(p.a,null,r.a.createElement(p.a.Row,{style:{height:40}},r.a.createElement(p.a.Column,{width:8},r.a.createElement("div",null,"CPU"),r.a.createElement($.a,{color:"secondary",variant:"determinate",value:o.cpu})),r.a.createElement(p.a.Column,{width:8},r.a.createElement("div",null,"Memory"),r.a.createElement($.a,{title:"Memory",color:"secondary",variant:"determinate",value:o.memory.used/o.memory.total*100})))),r.a.createElement(ft.a,null,({height:e,width:t})=>r.a.createElement(pt.a,{height:e-100,itemCount:Math.min(3e3,l.length),itemSize:80,width:t},({index:e,style:t})=>r.a.createElement(b.a,{key:"upload-".concat(e),style:t},r.a.createElement(ee.a,null,r.a.createElement(h.a,{name:"file"})),r.a.createElement(g.a,{primary:l[e].name,secondary:r.a.createElement($.a,{color:"secondary",variant:a&&a.currentIndex===e?"determinate":"indeterminate",value:a&&a.currentIndex===e?a.progress:void 0})})))),void 0===t&&r.a.createElement(p.a,{centered:!0,verticalAlign:"middle"},r.a.createElement("div",{style:{marginTop:"50px",marginBottom:"auto"}},"No Pending Uploads")))}var ht=a(553),Et=a.n(ht),bt=a(574),gt=a(1162),xt=a(1189),wt=a(26),kt=a(1165),Ot=a(1166),yt=a(1178),jt=a(1167),Ct=a(1163),St=a(1186),Ft=a(1164),Mt=a(260),Dt=a(254),Lt=a.n(Dt);const Nt=Object(gt.a)(e=>Object(xt.a)({popper:{marginTop:10,marginRight:15,width:"40ch",maxHeight:400,overflow:"auto"},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(wt.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(wt.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}}));function Tt(){const e=Nt(),t=Object(n.useContext)(P),a=t.nas,c=t.update,o=Object(n.useState)(!1),i=Object(l.a)(o,2),s=i[0],u=i[1],p=r.a.useState(null),f=Object(l.a)(p,2),v=f[0],h=f[1],E=Object(n.useState)(""),b=Object(l.a)(E,2),g=b[0],x=b[1],w=()=>{h(null)};return r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},s?r.a.createElement(Ct.a,{size:20,color:"inherit"}):r.a.createElement(Lt.a,null)),r.a.createElement(St.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},onClick:e=>h(e.currentTarget),onChange:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,x(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onKeyDown:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=6;break}return u(!0),e.next=4,a.search(g);case 4:c(),u(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement(_e.a,{open:Boolean(v),anchorEl:v},r.a.createElement(Ft.a,{onClickAway:w},r.a.createElement(Mt.a,{className:e.popper},0===a.searchedFiles.length&&r.a.createElement(S.a,null,"No File. Press Enter to search"),a.searchedFiles.map(e=>r.a.createElement(S.a,{key:e.id,onClick:()=>{window.location.href="#/home/".concat(e.parent),w()}},H.a.basename(e.filename)))))))}const Rt=Object(bt.a)({palette:{primary:{main:"#fafafa"}}}),It=Object(gt.a)(e=>Object(xt.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,display:"none",[e.breakpoints.up("sm")]:{display:"block"}},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(wt.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(wt.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}}));function Ut(){const e=Object(n.useContext)(P),t=(e.nas,e.isLoading),a=(e.update,Object(n.useState)(!1)),c=Object(l.a)(a,2),o=c[0],s=c[1],u=It();return r.a.createElement(kt.a,{theme:Rt},r.a.createElement("div",{id:"home",style:{height:"100%",overflow:"hidden"}},r.a.createElement(Ot.a,{position:"static"},r.a.createElement(Te.a,null,r.a.createElement(yt.a,{mdUp:!0},r.a.createElement(O.a,{className:u.menuButton,color:"inherit",onClick:()=>{s(!0)}},r.a.createElement(dt.a,null))),r.a.createElement(et.a,{className:u.title,variant:"h6",noWrap:!0},"Django Nas"),r.a.createElement(ne.a,{title:"Open Music App"},r.a.createElement(i.b,{to:"/music"},r.a.createElement(O.a,null,r.a.createElement(Et.a,null)))),r.a.createElement(Tt,null))),r.a.createElement(jt.a,{open:o,onClose:()=>s(!1)},r.a.createElement("div",{style:{width:300,height:"100%"}},r.a.createElement(pe,null))),r.a.createElement(fe.a,{loading:t,style:{height:"100%",margin:0}},r.a.createElement(p.a,{style:{height:"100%",overflow:"hidden",position:"relative"}},r.a.createElement(p.a.Row,{style:{height:"100%",paddingTop:0,paddingBottom:0}},r.a.createElement(yt.a,{smDown:!0,implementation:"js"},r.a.createElement(p.a.Column,{computer:3,style:{height:"100%",backgroundColor:"#fcfcfc"}},r.a.createElement(we.b,{id:"folder"},r.a.createElement(p.a.Row,{style:{height:"92%"}},r.a.createElement(pe,null)),r.a.createElement(p.a.Row,null,r.a.createElement(Fe,null))))),r.a.createElement(p.a.Column,{computer:10,mobile:16,tablet:16,style:{height:"100%"}},r.a.createElement(we.b,{id:"files"},r.a.createElement(ut,null))),r.a.createElement(yt.a,{smDown:!0,implementation:"js"},r.a.createElement(p.a.Column,{computer:3,style:{height:"100%",backgroundColor:"#fcfcfc"}},r.a.createElement(vt,null)))))),r.a.createElement(ye,null)))}var zt=a(1168),Pt=a(141);function Wt(e){const t=e.title,a=e.used,n=e.total,c=e.color,o=e.color2;let l=[{name:"Used",value:a},{name:"Available",value:n-a}];return r.a.createElement(fe.a,null,r.a.createElement(Pt.d,{minHeight:300,height:"100%",width:"100%",minWidth:200},r.a.createElement(Pt.c,null,r.a.createElement(Pt.b,{data:l,dataKey:"value",label:!0,fill:c,isAnimationActive:!1},r.a.createElement(Pt.a,{fill:c}),r.a.createElement(Pt.a,{fill:o})),r.a.createElement(Pt.e,null))),r.a.createElement("span",null,t))}function Bt(){const e=Object(n.useContext)(Ce).systemInfo;return void 0===e?r.a.createElement("div",null,"Infomation Not Available"):r.a.createElement("div",{id:"home",style:{width:"100%",color:"black"}},r.a.createElement(zt.a,null,r.a.createElement("h1",null,"System Info"),r.a.createElement(p.a,{columns:2},r.a.createElement(p.a.Column,null,r.a.createElement(Wt,{used:Math.round(e.disk.used/1024/1024),total:Math.round(e.disk.total/1024/1024),title:"Disk(MB)",color:"#0088FE",color2:"orange"})),r.a.createElement(p.a.Column,null,r.a.createElement(Wt,{used:Math.round(e.memory.used/1024/1024),total:Math.round(e.memory.total/1024/1024),title:"Memory(MB)",color:"#0088FE",color2:"orange"})),r.a.createElement(p.a.Column,null,r.a.createElement(Wt,{used:e.cpu,total:100,title:"CPU Usage(Percentage)",color:"#0088FE",color2:"orange"})),r.a.createElement(p.a.Column,null,r.a.createElement(fe.a,{style:{height:"100%"}},r.a.createElement("h4",null,"Temperature"),r.a.createElement("h1",null,e.temperature?e.temperature.toFixed(1):"None"))),r.a.createElement(p.a.Column,null,r.a.createElement(fe.a,{style:{height:"100%"}},r.a.createElement("h4",null,"Humidity"),r.a.createElement("h1",null,e.humidity?e.humidity.toFixed(1):"None"))),r.a.createElement(p.a.Column,null,r.a.createElement(fe.a,{style:{height:"100%"}},r.a.createElement("h4",null,"Pressure"),r.a.createElement("h1",null,e.pressure?e.pressure.toFixed(2):"None"))))))}var _t=a(560);const At=a(1010).QuillDeltaToHtmlConverter;class qt extends n.Component{constructor(e){var t;super(e),t=this,this.updateDocument=e=>{this.setState({currentDocument:e})},this.saveDocument=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=t.state.currentDocument)){e.next=6;break}return t.setState({isLoading:!0}),e.next=6,t.state.nas.updateDocument(a.id,a.name,a.content);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.setState({errorMsg:"Failed to save"});case 11:return e.prev=11,t.setState({isLoading:!1}),setTimeout(()=>{t.setState({errorMsg:void 0})},3e3),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,8,11,15]])}))),this.newDocument=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.readFile=e=>new Promise((t,a)=>{var n=new FileReader;n.onload=e=>{let a=n.result;t(a)},n.readAsText(e)}),this.openFromLocal=Object(d.a)(m.a.mark((function e(){var a,n,r,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.state,n=a.currentDocument,r=a.nas;try{(o=null!==(c=document.getElementById("new file"))&&void 0!==c?c:document.createElement("input")).id="new file",o.type="file",o.accept=".md,.html",o.multiple=!1,o.click(),o.addEventListener("change",function(){var e=Object(d.a)(m.a.mark((function e(a){var c,l,i,s,u,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setState({isLoading:!0,errorMsg:"Reading Local Document..."}),!(c=o.files)){e.next=17;break}if(l=c[0],".md"!==q.extname(l.name)){e.next=17;break}return i=new _t.MarkdownToQuill,e.next=9,t.readFile(l);case 9:return s=e.sent,u=i.convert(s),t.setState({errorMsg:"Creating New Document"}),e.next=14,r.createNewDocument(l.name,{ops:u},null===n||void 0===n?void 0:n.parent);case 14:d=e.sent,t.setState({errorMsg:"Document Created. Preparing for redirecting"}),setTimeout(()=>{t.setState({isLoading:!1,errorMsg:void 0}),window.location.href="#/document/"+d.id},1500);case 17:o.remove();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(l){t.setState({errorMsg:"Unable to open file",isLoading:!1})}case 2:case"end":return e.stop()}}),e)}))),this.saveToLocal=function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.state.currentDocument)){e.next=8;break}e.t0=a,e.next="html"===e.t0?5:8;break;case 5:return r=new At(n.content),r.convert(),e.abrupt("break",8);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.setState({isLoading:!0}),e.next=4,t.state.nas.getDocument(a);case 4:n=e.sent,setTimeout(()=>{t.setState({currentDocument:n})},400),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.setState({errorMsg:"Failed to open"});case 11:return e.prev=11,setTimeout(()=>{t.setState({isLoading:!1})},500),t.setState({currentDocument:void 0}),setTimeout(()=>{t.setState({errorMsg:void 0})},3e3),e.finish(11);case 16:case"end":return e.stop()}}),e,null,[[0,8,11,16]])})));return function(t){return e.apply(this,arguments)}}(),this.update=()=>{this.setState({nas:this.state.nas})},this.state={nas:new I,isLoading:!1,update:this.update,updateDocument:this.update,saveDocument:this.saveDocument,saveToLocal:this.saveToLocal,oepnFromLocal:this.openFromLocal,newDocument:this.newDocument}}componentDidUpdate(e){var t=this;return Object(d.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.props.match.params.id===e.match.params.id){a.next=5;break}if(!(n=t.props.match.params.id)){a.next=5;break}return a.next=5,t.fetch(n);case 5:case"end":return a.stop()}}),a)})))()}componentWillMount(){var e=this;return Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.props.match.params.id)){t.next=4;break}return t.next=4,e.fetch(a);case 4:case"end":return t.stop()}}),t)})))()}render(){return r.a.createElement(Yt.Provider,{value:this.state},this.props.children)}}const Ht={nas:new I,update:()=>{},updateDocument:e=>{},saveDocument:()=>Promise.resolve(),oepnFromLocal:()=>Promise.resolve(),newDocument:()=>Promise.resolve(),saveToLocal:()=>Promise.resolve(),isLoading:!1},Yt=r.a.createContext(Ht);var Gt=a(1169),Jt=a(1191),Kt=a(582),Qt=a(343),Vt=a.n(Qt);const Xt=Object(gt.a)(e=>({notchedOutline:{"&:focus":{},border:0,fontWeight:"normal",background:"transparent",fontSize:"18px",paddingTop:5},button:{padding:"0px 5px"}}));function Zt(){const e=Object(n.useContext)(Yt),t=e.currentDocument,a=e.updateDocument,c=e.saveDocument,o=e.isLoading,i=e.nas,s=e.update,u=r.a.useState(),p=Object(l.a)(u,2),f=p[0],v=p[1],h=Object(n.useState)(0),E=Object(l.a)(h,2),b=E[0],g=E[1],x=Xt();return void 0!==t||o?r.a.createElement("div",{style:{marginTop:15,marginLeft:5}},r.a.createElement(y.a,{in:o&&!t,unmountOnExit:!0,mountOnEnter:!0},r.a.createElement("div",{style:{height:24,width:100}},r.a.createElement($.a,{variant:"indeterminate",style:{marginTop:15,width:100}}))),r.a.createElement(y.a,{in:!o&&void 0!==t,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",null,r.a.createElement(ne.a,{title:"Rename"},r.a.createElement(Ft.a,{onClickAway:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b>0)){e.next=4;break}return e.next=3,c();case 3:g(0);case 4:case"end":return e.stop()}}),e)})))},r.a.createElement(Vt.a,{id:"test-input",className:x.notchedOutline,style:{maxWidth:.8*window.innerWidth},value:null===t||void 0===t?void 0:t.name,onChange:e=>{t&&(t.name=e.target.value,g(b+1),a(t))}}))),r.a.createElement(ne.a,{title:"Move"},r.a.createElement(O.a,{className:x.button,onClick:function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(a.currentTarget),!t){e.next=4;break}return e.next=4,i.getContent(t.parent);case 4:s();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(ce.a,null))))),f&&r.a.createElement(Ft.a,{onClickAway:()=>v(void 0)},r.a.createElement(_e.a,{open:Boolean(f),anchorEl:f,style:{zIndex:2e3},placement:"right-end"},t&&r.a.createElement(de,{currentFile:t,onClose:()=>v(void 0),onMove:function(){var e=Object(d.a)(m.a.mark((function e(n,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.moveDocument(n.id,r.id);case 2:t.parent=r.id,a(t);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})))):r.a.createElement("div",null,r.a.createElement(Vt.a,{id:"test-input",className:x.notchedOutline,style:{maxWidth:.8*window.innerWidth},value:"Cannot fetch document"}))}var $t=a(1190),ea=a(9);const ta=Object(gt.a)(e=>Object(xt.a)({divider:{height:"10px",borderLeft:"6px solid black"}}));Object(ea.a)(e=>({grouped:{margin:e.spacing(.5),border:"none",padding:e.spacing(0,1),"&:not(:first-child)":{borderRadius:e.shape.borderRadius},"&:first-child":{borderRadius:e.shape.borderRadius}}}))($t.a);function aa(){ta();return r.a.createElement("div",{id:"toolbar"},r.a.createElement("span",{className:"ql-formats"},r.a.createElement("select",{className:"ql-size"},r.a.createElement("option",{value:"small"}),r.a.createElement("option",{selected:!0}),r.a.createElement("option",{value:"large"}),r.a.createElement("option",{value:"huge"})),r.a.createElement("button",{type:"button",className:"ql-italic"}),r.a.createElement("button",{type:"button",className:"ql-underline"}),r.a.createElement("span",{className:"ql-formats"},r.a.createElement("button",{type:"button",className:"ql-indent",value:"-1"}),r.a.createElement("button",{type:"button",className:"ql-indent",value:"+1"}),r.a.createElement("select",{className:"ql-align"},r.a.createElement("option",{value:"center"}),r.a.createElement("option",{value:"right"}),r.a.createElement("option",{value:"justify"})),r.a.createElement("button",{type:"button",className:"ql-direction",value:"rtl"}),r.a.createElement("button",{type:"button",className:"ql-list",value:"ordered"}),r.a.createElement("button",{type:"button",className:"ql-list",value:"bullet"})),r.a.createElement("span",{className:"ql-formats"},r.a.createElement("button",{type:"button",className:"ql-image"}),r.a.createElement("button",{type:"button",className:"ql-code-block"}),r.a.createElement("button",{type:"button",className:"ql-script",value:"sub"}),r.a.createElement("button",{type:"button",className:"ql-script",value:"super"}),r.a.createElement("button",{type:"button",className:"ql-clean"}))))}var na=a(562),ra=a.n(na);const ca=He.Quill.import("blots/block/embed");class oa extends ca{}oa.blotName="divider",oa.tagName="hr",He.Quill.register(oa);Object(gt.a)(e=>({notchedOutline:{"&:focus":{},border:0,fontWeight:"normal",background:"transparent",fontSize:"20px"}}));function la(){const e=Object(n.useContext)(Yt),t=e.currentDocument,a=e.updateDocument,c=e.saveDocument,o=Object(n.useState)(0),i=Object(l.a)(o,2),s=i[0],u=i[1],p=Object(n.useState)(),f=Object(l.a)(p,2),v=f[0],h=f[1],E=function(){var e=Object(d.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!v){e.next=7;break}return n=v.getEditor().getContents(),t.content=n,a(t),e.next=6,c();case 6:u(0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b={toolbar:{container:"#toolbar"}};return void 0===t?r.a.createElement(Ye.a,{style:{height:"100%",border:0,paddingBottom:"85px"},modules:b}):r.a.createElement(Ft.a,{onClickAway:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s>0)){e.next=3;break}return e.next=3,E();case 3:case"end":return e.stop()}}),e)})))},r.a.createElement(Ye.a,{ref:e=>h(null!=e?e:void 0),onKeyDown:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(s+1),!(s>3)){e.next=4;break}return e.next=4,E();case 4:case"end":return e.stop()}}),e)}))),onChange:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:{height:"100%",border:0,paddingBottom:"85px"},defaultValue:t.content,modules:b}))}a(1020);var ia=a(577);const sa=Object(gt.a)(e=>({button:{padding:"4px 6px",minWidth:"40px",fontSize:"14px",fontWeight:"normal",textTransform:"capitalize"},menuItem:{minWidth:150}}));function ua(){const e=sa(),t=r.a.useContext(Yt),a=t.isLoading,n=t.saveToLocal,c=t.oepnFromLocal,o=r.a.useState(null),i=Object(l.a)(o,2),s=i[0],u=i[1];return r.a.createElement("div",null,r.a.createElement(Q.a,{className:e.button,size:"small",onClick:e=>u(e.currentTarget)},"File"),r.a.createElement(Q.a,{className:e.button,size:"small"},"Edit"),r.a.createElement(Q.a,{className:e.button,size:"small"},"Settings"),r.a.createElement(Q.a,{className:e.button,size:"small"},"Tools"),r.a.createElement(Q.a,{className:e.button,size:"small"},"Help"),r.a.createElement("span",{style:{textDecoration:"underline",color:"grey",marginLeft:20}},a?"Commnucating with server":"All changes saved in Drive"),r.a.createElement(C.a,{anchorEl:s,keepMounted:!0,open:Boolean(s),getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:()=>{u(null)}},r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:u(null);case 3:case"end":return e.stop()}}),e)})))},"Open"),r.a.createElement(ia.a,{label:"Download",parentMenuOpen:Boolean(s),className:e.menuItem},r.a.createElement(S.a,{className:e.menuItem,onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("pdf");case 2:u(null);case 3:case"end":return e.stop()}}),e)})))},"PDF Document (.pdf)"," "),r.a.createElement(S.a,{className:e.menuItem,onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("html");case 2:u(null);case 3:case"end":return e.stop()}}),e)})))},"Web Page (.html)"," "))))}const ma=Object(bt.a)({palette:{secondary:{main:"#ffffff"},primary:{main:"#00b2ff"}}}),da=Object(gt.a)(e=>({appbar:{height:"90px"},container:{paddingTop:"95px",height:"100%"},row:{paddingTop:0,paddingBottom:0},largeIcon:{width:40,height:40}}));function pa(){var e;const t=Object(n.useContext)(Yt),a=t.currentDocument,c=t.isLoading,o=t.errorMsg,l=da();return r.a.createElement(kt.a,{theme:ma},r.a.createElement("div",null,r.a.createElement(Ot.a,{elevation:0,className:l.appbar,color:"secondary"},r.a.createElement(Te.a,null,r.a.createElement(ne.a,{title:"Back"},r.a.createElement(i.b,{to:"/home/".concat(null!==(e=null===a||void 0===a?void 0:a.parent)&&void 0!==e?e:"")},r.a.createElement(ra.a,{className:l.largeIcon,fontSize:"large",color:"primary"}))),r.a.createElement(p.a,{style:{marginLeft:10}},r.a.createElement(p.a.Row,{style:{padding:0}},r.a.createElement(Zt,null)),r.a.createElement(p.a.Row,{style:{paddingTop:0,paddingBottom:0}},r.a.createElement(ua,null)),r.a.createElement(p.a.Row,{style:{padding:0}},a&&r.a.createElement(aa,null))))),r.a.createElement(Gt.a,{id:"container",className:l.container},a&&r.a.createElement(Mt.a,{style:{height:"100%",minHeight:window.innerHeight-95},square:!0},r.a.createElement(la,null))),r.a.createElement(Jt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:void 0!==o,message:o}),r.a.createElement(Kt.a,{open:c&&void 0===a,style:{zIndex:1,color:"#fff"}},r.a.createElement(Ct.a,{color:"inherit"}))))}var fa=a(563),va=a.n(fa);const ha=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at.fetchFromUrl(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();class Ea extends n.Component{constructor(e){var t;super(e),t=this,this.init=Object(d.a)(m.a.mark((function e(){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setState({isLoading:!0,errorMsg:"Loading Music Library"}),!(a=va.a.parse(t.props.location.search)).artist){e.next=8;break}return e.next=5,t.filterBy("artist",a.artist);case 5:n=e.sent,e.next=18;break;case 8:if(!a.album){e.next=14;break}return e.next=11,t.filterBy("album",a.album);case 11:n=e.sent,e.next=18;break;case 14:return e.next=16,t.state.nas.fetchMusicList();case 16:n=e.sent,t.setState({filterField:void 0});case 18:t.setState({musicResponse:n}),setTimeout(()=>{t.setState({isLoading:!1})},400),setTimeout(()=>{t.setState({errorMsg:void 0})},3e3);case 21:case"end":return e.stop()}}),e)}))),this.filterBy=function(){var e=Object(d.a)(m.a.mark((function e(a,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.setState({filterField:n}),e.next=4,L.a.get("".concat(R,"?").concat(a,"=").concat(n));case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(0),t.setState({errorMsg:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),this.updateMetadata=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({isLoading:!0,errorMsg:"Updating music metadata... This may take while"}),e.prev=1,e.next=4,L.a.patch("".concat(R));case 4:return e.next=6,L.a.get(R);case 6:a=e.sent,t.setState({musicResponse:a.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.setState({errorMsg:e.t0});case 13:return e.prev=13,t.setState({isLoading:!1}),setTimeout(()=>{t.setState({errorMsg:void 0})},3e3),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[1,10,13,17]])}))),this.search=function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setState({isLoading:!0}),e.prev=1,""!==a){e.next=9;break}return e.next=5,t.state.nas.fetchMusicList();case 5:n=e.sent,t.setState({musicResponse:n,isLoading:!1,paginationURL:R}),e.next=16;break;case 9:return t.setState({errorMsg:"Searching "+a}),r="".concat(R,"?search=").concat(a),e.next=13,L.a.get(r);case 13:c=e.sent,t.setState({musicResponse:c.data,paginationURL:r,isLoading:!1}),setTimeout(()=>{t.setState({errorMsg:void 0})},3e3);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),t.setState({errorMsg:e.t0});case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.setState({isLoading:!0}),e.next=4,L.a.get(a);case 4:n=e.sent,t.setState({musicResponse:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.setState({errorMsg:e.t0});case 11:return e.prev=11,t.setState({isLoading:!1}),setTimeout(()=>{t.setState({errorMsg:void 0})},1e3),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,8,11,15]])})));return function(t){return e.apply(this,arguments)}}(),this.play=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ha(a.file);case 2:n=e.sent,t.setState({currentTag:n,currentMusic:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stop=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({currentTag:void 0,currentMusic:void 0});case 1:case"end":return e.stop()}}),e)}))),this.update=()=>{this.setState({nas:this.state.nas})},this.state={nas:new I,paginationURL:R,isLoading:!1,update:this.update,play:this.play,stop:this.stop,fetch:this.fetch,search:this.search,updateMetadata:this.updateMetadata}}componentDidUpdate(e){var t=this;return Object(d.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.props.location.search===e.location.search){a.next=4;break}return console.log("update"),a.next=4,t.init();case 4:case"end":return a.stop()}}),a)})))()}componentDidMount(){var e=this;return Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("init"),t.next=3,e.init();case 3:case"end":return t.stop()}}),t)})))()}render(){return r.a.createElement(ga.Provider,{value:this.state},this.props.children)}}const ba={nas:new I,update:()=>{},stop:()=>{},play:e=>Promise.resolve(),isLoading:!1},ga=r.a.createContext(ba);var xa=a(572),wa=a.n(xa),ka=a(1171),Oa=a(571),ya=a.n(Oa),ja=a(564),Ca=a.n(ja);const Sa=e=>{const t=null===e||void 0===e?void 0:e.common.picture;let a=void 0;return t&&t.length>0&&(a=t[0].data.toString("base64"),a="data:image/jpeg;base64,"+a),a};function Fa(){var e,t,a,n,c,o,l,i,s,u;const m=r.a.useContext(ga),d=m.currentMusic,p=m.currentTag;r.a.createRef();return r.a.createElement("div",{style:{marginTop:40}},r.a.createElement(y.a,{in:void 0===d,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(et.a,{variant:"subtitle1"},"No Music Selected")),r.a.createElement(y.a,{in:void 0!==(null===d||void 0===d||null===(e=d.music_metadata)||void 0===e?void 0:e.picture),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(Ae.a,{style:{height:300,width:"100%",marginLeft:"auto",marginRight:"auto"},image:null!==(t=null===d||void 0===d||null===(a=d.music_metadata)||void 0===a?void 0:a.picture)&&void 0!==t?t:Sa(p)})),r.a.createElement(y.a,{in:void 0!==d,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(Z.a,{style:{width:"100%",marginLeft:"auto",marginRight:"auto"}},r.a.createElement(et.a,{component:"h5",variant:"h5"},decodeURIComponent(null!==(n=null===d||void 0===d||null===(c=d.music_metadata)||void 0===c?void 0:c.title)&&void 0!==n?n:q.basename(null!==(o=null===d||void 0===d?void 0:d.filename)&&void 0!==o?o:""))),r.a.createElement(et.a,{variant:"subtitle1",color:"textSecondary"},decodeURIComponent(null!==(l=null===d||void 0===d||null===(i=d.music_metadata)||void 0===i?void 0:i.artist)&&void 0!==l?l:"")),r.a.createElement(et.a,{variant:"subtitle1",color:"textSecondary"},decodeURIComponent(null!==(s=null===d||void 0===d||null===(u=d.music_metadata)||void 0===u?void 0:u.album)&&void 0!==s?s:"")),d&&r.a.createElement("audio",{controls:!0,loop:!0,crossOrigin:"anonymous",autoPlay:!0,src:null===d||void 0===d?void 0:d.file,id:"music"}),d&&r.a.createElement(Ca.a,{id:"audio-canvas",height:200,width:300,meterWidth:6,audioId:"music"}))))}var Ma=a(1170),Da=a(1185),La=a(169),Na=a.n(La),Ta=a(168),Ra=a.n(Ta),Ia=a(1175);function Ua(){var e,t;const a=r.a.useContext(ga),n=a.musicResponse,c=a.play,o=a.currentMusic,s=a.stop,u=a.fetch,p=a.paginationURL,f=r.a.useState(window.innerWidth),v=Object(l.a)(f,2),h=(v[0],v[1],r.a.useState(window.innerHeight)),E=Object(l.a)(h,2),b=E[0],g=(E[1],(e,t)=>(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id));return r.a.createElement(Re.a,{component:Mt.a,style:{marginTop:"40px",marginLeft:30,maxHeight:b-100,width:"100%"}},r.a.createElement(Ie.a,{stickyHeader:!0},r.a.createElement(Ue.a,null,r.a.createElement(ze.a,null,r.a.createElement(Pe.a,null,"Name"),r.a.createElement(Pe.a,null,"Artist"),r.a.createElement(Pe.a,null,"Duration"),r.a.createElement(Pe.a,null,"Actions"))),r.a.createElement(Ma.a,null,n&&n.results.map((e,t)=>{var a,n,l,u,p,f,v,h,E,b;return r.a.createElement(ze.a,{selected:g(o,e)},r.a.createElement(Pe.a,{style:{maxWidth:200}},r.a.createElement(et.a,{noWrap:!0},null!==(a=null===(n=e.music_metadata)||void 0===n?void 0:n.title)&&void 0!==a?a:q.basename(e.filename)),r.a.createElement(i.b,{to:void 0!==(null===(l=e.music_metadata)||void 0===l?void 0:l.album)?"/music?album=".concat(null===(u=e.music_metadata)||void 0===u?void 0:u.album):"/music"},r.a.createElement(et.a,{variant:"subtitle1",noWrap:!0},null===(p=e.music_metadata)||void 0===p?void 0:p.album))),r.a.createElement(Pe.a,{style:{maxWidth:100}},r.a.createElement(i.b,{to:void 0!==(null===(f=e.music_metadata)||void 0===f?void 0:f.artist)?"/music?artist=".concat(null===(v=e.music_metadata)||void 0===v?void 0:v.artist):"/music"},r.a.createElement(et.a,{variant:"subtitle1",noWrap:!0},null===(h=e.music_metadata)||void 0===h?void 0:h.artist))),r.a.createElement(Pe.a,null,(null===e||void 0===e||null===(E=e.music_metadata)||void 0===E?void 0:E.duration)&&B.a.utc(1e3*(null===e||void 0===e||null===(b=e.music_metadata)||void 0===b?void 0:b.duration)).format("mm:ss")),r.a.createElement(Pe.a,null,r.a.createElement(O.a,{onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!g(o,e)){t.next=4;break}s(),t.next=6;break;case 4:return t.next=6,c(e);case 6:case"end":return t.stop()}}),t)})))},g(o,e)?r.a.createElement(Ra.a,null):r.a.createElement(Na.a,null))))})),r.a.createElement(Da.a,null,r.a.createElement(ze.a,null,r.a.createElement(Ia.a,{size:"medium",style:{marginBottom:10,marginTop:10},page:null!==(e=null===n||void 0===n?void 0:n.current_page)&&void 0!==e?e:0,count:null!==(t=null===n||void 0===n?void 0:n.total_pages)&&void 0!==t?t:0,onChange:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p!==R){e.next=5;break}return e.next=3,u("".concat(R,"?page=").concat(a));case 3:e.next=7;break;case 5:return e.next=7,u("".concat(p,"&page=").concat(a));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})))))}var za=a(257),Pa=a.n(za);const Wa=Object(gt.a)(e=>Object(xt.a)({popper:{marginTop:10,marginRight:15,width:"40ch",maxHeight:400,overflow:"auto"},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(wt.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(wt.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}}));function Ba(){const e=Wa(),t=Object(n.useContext)(ga).search,a=Object(n.useState)(!1),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(""),u=Object(l.a)(s,2),p=u[0],f=u[1];return r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},o?r.a.createElement(Ct.a,{size:20,color:"inherit"}):r.a.createElement(Lt.a,null)),r.a.createElement(St.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},value:p,inputProps:{"aria-label":"search"},onChange:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,f(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onKeyDown:function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"===a.key&&(i(!0),t(p),i(!1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement(O.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),f(""),e.next=4,t("");case 4:i(!1);case 5:case"end":return e.stop()}}),e)})))},r.a.createElement(Pa.a,null)))}function _a(){var e,t;const a=r.a.useContext(ga),n=a.musicResponse,c=a.play,o=a.currentMusic,i=a.stop,s=a.fetch,u=a.paginationURL,p=r.a.useState(window.innerWidth),f=Object(l.a)(p,2),v=(f[0],f[1],r.a.useState(window.innerHeight)),h=Object(l.a)(v,2),x=(h[0],h[1],(e,t)=>(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id));return r.a.createElement("div",{style:{marginBottom:100,marginTop:70}},r.a.createElement(E.a,null,n&&n.results.map((e,t)=>{var a,n,l,s;return r.a.createElement("div",null,r.a.createElement(b.a,{button:!0,selected:x(o,e),onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x(o,e)){t.next=3;break}t.next=5;break;case 3:return t.next=5,c(e);case 5:case"end":return t.stop()}}),t)}))),style:{height:80}},r.a.createElement(ee.a,null,r.a.createElement(Ae.a,{style:{height:40,width:40},image:null===(a=e.music_metadata)||void 0===a?void 0:a.picture})),r.a.createElement(g.a,{primary:r.a.createElement(et.a,{noWrap:!0},null!==(n=null===(l=e.music_metadata)||void 0===l?void 0:l.title)&&void 0!==n?n:q.basename(e.filename)),secondary:r.a.createElement(et.a,{noWrap:!0},null===(s=e.music_metadata)||void 0===s?void 0:s.album)}),r.a.createElement(j.a,null,r.a.createElement(O.a,{onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x(o,e)){t.next=4;break}i(),t.next=6;break;case 4:return t.next=6,c(e);case 6:case"end":return t.stop()}}),t)})))},x(o,e)?r.a.createElement(Ra.a,null):r.a.createElement(Na.a,null)))),r.a.createElement(te.a,{style:{color:"black",marginLeft:50}}))})),r.a.createElement(Ia.a,{size:"medium",style:{marginBottom:10,marginTop:10},page:null!==(e=null===n||void 0===n?void 0:n.current_page)&&void 0!==e?e:0,count:null!==(t=null===n||void 0===n?void 0:n.total_pages)&&void 0!==t?t:0,onChange:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u!==R){e.next=5;break}return e.next=3,s("".concat(R,"?page=").concat(a));case 3:e.next=7;break;case 5:return e.next=7,s("".concat(u,"&page=").concat(a));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}))}var Aa=a(1172),qa=a(1089),Ha=a(1192),Ya=a(565),Ga=a.n(Ya),Ja=a(566),Ka=a.n(Ja),Qa=a(569),Va=a.n(Qa),Xa=a(570),Za=a.n(Xa),$a=a(568),en=a.n($a),tn=a(567),an=a.n(tn);const nn=e=>{const t=null===e||void 0===e?void 0:e.common.picture;let a=void 0;return t&&t.length>0&&(a=t[0].data.toString("base64"),a="data:image/jpeg;base64,"+a),a},rn=r.a.forwardRef((function(e,t){return r.a.createElement(qa.a,Object.assign({direction:"up",ref:t},e))}));function cn(){var e,t,a,n,c,o,i,s,u,m,d,p,f,v;const h=r.a.useContext(ga),E=h.currentMusic,b=h.currentTag,g=h.stop,x=r.a.useState(!1),w=Object(l.a)(x,2),k=w[0],y=w[1],j=r.a.useState(),C=Object(l.a)(j,2),S=C[0],M=C[1],D=r.a.useState(),L=Object(l.a)(D,2),N=L[0],T=L[1],R=r.a.useState(.5),I=Object(l.a)(R,2),U=I[0],z=I[1],P=r.a.useState(!1),B=Object(l.a)(P,2),_=B[0],A=B[1],H=r.a.useState("playing"),Y=Object(l.a)(H,2),J=Y[0],K=Y[1];let Q=r.a.useRef(null);return r.a.createElement("div",{style:{margin:10}},r.a.createElement(X.a,null,r.a.createElement(ka.a,{style:{marginLeft:10,marginRight:10},container:!0,alignItems:"center"},r.a.createElement(ka.a,{item:!0,xs:3},E?r.a.createElement(Ae.a,{style:{height:70,width:70},image:null!==(e=null===E||void 0===E||null===(t=E.music_metadata)||void 0===t?void 0:t.picture)&&void 0!==e?e:nn(b)}):r.a.createElement(Aa.a,{width:70,height:70})),r.a.createElement(ka.a,{item:!0,xs:7},E&&r.a.createElement("audio",{onVolumeChange:()=>{var e;z(null===(e=Q.current)||void 0===e?void 0:e.volume)},onCanPlay:()=>{var e,t;M(null===(e=Q.current)||void 0===e?void 0:e.currentTime),T(null===(t=Q.current)||void 0===t?void 0:t.duration),Q.current&&(Q.current.volume=null!==U&&void 0!==U?U:.5,z(U),Q.current.loop=_)},crossOrigin:"anonymous",onTimeUpdate:e=>{var t,a;M(null===(t=Q.current)||void 0===t?void 0:t.currentTime),T(null===(a=Q.current)||void 0===a?void 0:a.duration)},autoPlay:!0,src:null===E||void 0===E?void 0:E.file,ref:Q}),r.a.createElement(ae.a,{onClick:()=>{y(!0)}},void 0===E&&r.a.createElement(et.a,{component:"div"},"No Music Playing"),r.a.createElement(et.a,{noWrap:!0},decodeURIComponent(null!==(a=null===E||void 0===E||null===(n=E.music_metadata)||void 0===n?void 0:n.title)&&void 0!==a?a:q.basename(null!==(c=null===E||void 0===E?void 0:E.filename)&&void 0!==c?c:""))))),r.a.createElement(ka.a,{item:!0,xs:2},E&&r.a.createElement(O.a,{onClick:e=>g(),size:"medium"},r.a.createElement(Ra.a,null))))),r.a.createElement(F.a,{open:k,fullScreen:!0,TransitionComponent:rn},r.a.createElement(Te.a,null,r.a.createElement(O.a,{onClick:()=>y(!1)},r.a.createElement(Ga.a,null))),r.a.createElement(G.a,null,r.a.createElement("div",null,E?r.a.createElement(Ae.a,{style:{height:300,width:"100%"},image:null!==(o=null===E||void 0===E||null===(i=E.music_metadata)||void 0===i?void 0:i.picture)&&void 0!==o?o:nn(b)}):r.a.createElement(Aa.a,{width:"100%",height:300})),r.a.createElement("div",null,r.a.createElement(et.a,{component:"h5",variant:"h5",noWrap:!0},decodeURIComponent(null!==(s=null===E||void 0===E||null===(u=E.music_metadata)||void 0===u?void 0:u.title)&&void 0!==s?s:q.basename(null!==(m=null===E||void 0===E?void 0:E.filename)&&void 0!==m?m:""))),r.a.createElement(et.a,{variant:"subtitle1",color:"textSecondary"},decodeURIComponent(null!==(d=null===E||void 0===E||null===(p=E.music_metadata)||void 0===p?void 0:p.artist)&&void 0!==d?d:"")),r.a.createElement(et.a,{variant:"subtitle1",color:"textSecondary"},decodeURIComponent(null!==(f=null===E||void 0===E||null===(v=E.music_metadata)||void 0===v?void 0:v.album)&&void 0!==f?f:""))),r.a.createElement("div",null,r.a.createElement(ka.a,{container:!0,spacing:2},r.a.createElement(ka.a,{item:!0,xs:!0},r.a.createElement(Ha.a,{value:S,max:N,onChange:(e,t)=>{Q.current&&(Q.current.currentTime=t)},"aria-labelledby":"continuous-slider"}))),r.a.createElement(ka.a,{justify:"space-between",container:!0},r.a.createElement(ka.a,{item:!0},S&&W.utc(1e3*S).format("mm:ss")),r.a.createElement(ka.a,{item:!0},N&&W.utc(1e3*N).format("mm:ss"))),r.a.createElement(ka.a,{item:!0,style:{textAlign:"center"}},r.a.createElement(O.a,{disabled:void 0===E,size:"medium",onClick:()=>{var e,t;E&&Q&&Q.current&&("playing"===J?(K("pause"),null===(e=Q.current)||void 0===e||e.pause()):(K("playing"),null===(t=Q.current)||void 0===t||t.play()))}},"playing"===J?r.a.createElement(Ka.a,{style:{fontSize:40}}):r.a.createElement(Na.a,{style:{fontSize:40}})))),r.a.createElement(ka.a,{container:!0,justify:"center"},r.a.createElement(O.a,{onClick:()=>{Q.current&&(_?(A(!1),Q.current.loop=!1):(A(!0),Q.current.loop=!0))}},_?r.a.createElement(an.a,null):r.a.createElement(en.a,null))),r.a.createElement(ka.a,{container:!0,spacing:2},r.a.createElement(ka.a,{item:!0},r.a.createElement(Va.a,null)),r.a.createElement(ka.a,{item:!0,xs:!0},r.a.createElement(Ha.a,{value:U&&100*U,min:0,max:100,onChange:(e,t)=>{Q.current&&(Q.current.volume=t/100)},"aria-labelledby":"continuous-slider"})),r.a.createElement(ka.a,{item:!0},r.a.createElement(Za.a,null))))))}const on=Object(bt.a)({palette:{primary:ya.a}}),ln=Object(gt.a)(e=>Object(xt.a)({root:{flexGrow:1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,display:"none",[e.breakpoints.up("sm")]:{display:"block"}}}));function sn(){const e=r.a.useContext(ga),t=e.isLoading,a=e.errorMsg,c=e.updateMetadata,o=e.filterField,s=Object(n.useState)(!1),u=Object(l.a)(s,2),p=(u[0],u[1],ln());return r.a.createElement(kt.a,{theme:on},r.a.createElement("div",null,r.a.createElement(Ot.a,null,r.a.createElement(Te.a,null,r.a.createElement(i.b,{to:"/"},r.a.createElement(O.a,null,r.a.createElement(k.a,null))),r.a.createElement(et.a,{className:p.title,variant:"h6",noWrap:!0},null!==o&&void 0!==o?o:"Music",o&&r.a.createElement(ne.a,{title:"Clear field"},r.a.createElement(i.b,{to:"/music"},r.a.createElement(O.a,null,r.a.createElement(Pa.a,null))))),r.a.createElement(ne.a,{title:"Update metadata"},r.a.createElement(O.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:case"end":return e.stop()}}),e)})))},r.a.createElement(wa.a,null))),r.a.createElement(Ba,null))),r.a.createElement(Kt.a,{className:p.backdrop,open:t},r.a.createElement(Ct.a,{color:"inherit"})),r.a.createElement(yt.a,{xsDown:!0,implementation:"js"},r.a.createElement(zt.a,{style:{paddingTop:20,overflow:"hidden",height:"100%",paddingLeft:40,paddingRight:40}},r.a.createElement(ka.a,{container:!0,style:{margin:10}},r.a.createElement(ka.a,{item:!0,sm:4},r.a.createElement(Fa,null)),r.a.createElement(ka.a,{item:!0,sm:8},r.a.createElement(Ua,null))))),r.a.createElement(yt.a,{mdUp:!0,implementation:"js"},r.a.createElement(zt.a,{fluid:!0},r.a.createElement(_a,null)),r.a.createElement("div",{style:{position:"fixed",bottom:0,width:"100%"}},r.a.createElement(cn,null))),r.a.createElement(Jt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:void 0!==a,message:"".concat(a)})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var un=a(573);o.a.render(r.a.createElement(un.I18nProvider,{catalogs:{}},r.a.createElement((function(){const e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=(t[0],t[1],Object(n.useState)(!1)),c=Object(l.a)(a,2),o=(c[0],c[1]);return r.a.createElement(je,null,r.a.createElement(i.a,null,r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(s.b,{exact:!0,path:"/",component:()=>r.a.createElement(s.a,{to:"/home"})}),r.a.createElement(s.b,{exact:!0,path:"/home/:id?",component:e=>r.a.createElement(se,null,r.a.createElement(U,e,r.a.createElement(Ut,null)))}),r.a.createElement(s.b,{exact:!0,path:"/document/:id",component:e=>r.a.createElement(se,null,r.a.createElement(qt,e,r.a.createElement(pa,null)))}),r.a.createElement(s.b,{exact:!0,path:"/info",component:e=>(o(!0),r.a.createElement(Bt,null))}),r.a.createElement(s.b,{path:"/music",component:e=>r.a.createElement(Ea,e,r.a.createElement(sn,null))}))))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},223:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=223},628:function(e,t,a){e.exports=a(1086)},633:function(e,t,a){},812:function(e,t){},814:function(e,t){},815:function(e,t){},816:function(e,t){},817:function(e,t){},888:function(e,t){},890:function(e,t){}},[[628,1,2]]]);
//# sourceMappingURL=main.9a5043f0.chunk.js.map