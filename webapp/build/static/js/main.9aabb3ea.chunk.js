(this["webpackJsonpelectron-react-template"]=this["webpackJsonpelectron-react-template"]||[]).push([[0],{1221:function(e,t,a){},1258:function(e,t){},1260:function(e,t){},1313:function(e,t,a){},1334:function(e,t){},1336:function(e,t){},1337:function(e,t){},1338:function(e,t){},1339:function(e,t){},1732:function(e,t){},1744:function(e,t){},1749:function(e,t,a){},1812:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(49),o=a.n(c),l=a(18),i=(a(955),a(88)),s=a(86),u=a(4),m=a.n(u),d=a(8),p=(a(956),a(1919)),f=a(1918),h=a(543),v=a(235),E=a(1864),g=a(1815),b=a(1873),x=a(1877),w=a(200),k=a.n(w),y=a(1869),O=a(1870),C=a(1878),j=a(893),S=a(1879),F=a(1856),D=a(123),M=a(79),I=a(36),N=a.n(I);const T="/api/folder/",L="/api/file/",B="/api/document/",R="/api/file-content/",W="/api/music/",z="/api/book-collection/",_="/api/gallery/";class P{constructor(){var e=this;this.menus=void 0,this.currentFolder=void 0,this.searchedFiles=void 0,this.errorMsg=void 0,this.moveFileTo=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentFolder){t.next=7;break}return r="".concat(L).concat(a,"/"),t.next=5,N.a.patch(r,{parent:n});case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}(),this.fetchMusicList=Object(d.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="".concat(W),t.next=4,N.a.get(a);case 4:return n=t.sent,t.abrupt("return",n.data);case 8:t.prev=8,t.t0=t.catch(0),console.log("err"),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),this.moveDocument=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentFolder){t.next=7;break}return r="".concat(B).concat(a,"/"),t.next=5,N.a.patch(r,{parent:n});case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}(),this.moveFolderTo=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentFolder){t.next=7;break}return r="".concat(T).concat(a,"/"),t.next=5,N.a.patch(r,{parent:n});case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.errorMsg=t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}(),this.rename=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentFolder){t.next=7;break}return r="".concat(L).concat(a,"/"),t.next=5,N.a.patch(r,{filename:n});case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),e.errorMsg=t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,a){return t.apply(this,arguments)}}(),this.search=function(){var t=Object(d.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="".concat("/api/file?search=").concat(a),t.next=4,N.a.get(n);case 4:r=t.sent,e.searchedFiles=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.errorMsg=t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),this.getContent=function(){var t=Object(d.a)(m.a.mark((function t(a){var n,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a?"".concat(T).concat(a,"/"):T,console.log(n),t.next=5,N.a.get(n);case 5:r=t.sent,c=r.data,e.menus=c.parents,e.currentFolder=c,e.errorMsg=void 0,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),e.errorMsg=t.t0,e.currentFolder=void 0;case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),this.updateFile=function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("/api/update/file/"+t,{content:a});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.uploadFile=function(){var t=Object(d.a)(m.a.mark((function t(a,n,r,c){var o,l,i,s,u,d;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,o=0,l=Object(M.a)(a),t.prev=3,l.s();case 5:if((i=l.n()).done){t.next=26;break}if(s=i.value,!e.currentFolder){t.next=23;break}if(r(o,0,0,s.size),!n){t.next=15;break}return t.next=12,e.getUploadFileAndCreateFolder(s);case 12:t.t0=t.sent,t.next=16;break;case 15:t.t0=e.getSingleUploadFile(s);case 16:return d=t.t0,t.next=19,N.a.post(L,d,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{let t=Math.round(100*e.loaded/e.total);r(o,t,s.size*e.loaded,e.total)}});case 19:return t.next=21,e.getContent(null===(u=e.currentFolder)||void 0===u?void 0:u.id);case 21:return t.next=23,c(s);case 23:o+=1;case 24:t.next=5;break;case 26:t.next=31;break;case 28:t.prev=28,t.t1=t.catch(3),l.e(t.t1);case 31:return t.prev=31,l.f(),t.finish(31);case 34:r(o,100,0,0),t.next=41;break;case 37:t.prev=37,t.t2=t.catch(0),console.log(t.t2),alert("Upload Failed: "+t.t2.toString());case 41:case"end":return t.stop()}}),t,null,[[0,37],[3,28,31,34]])})));return function(e,a,n,r){return t.apply(this,arguments)}}(),this.deleteFile=function(){var t=Object(d.a)(m.a.mark((function t(a,n=!0){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(!n||window.confirm("Are you sure you want to delete this file?"))||!e.currentFolder){t.next=7;break}return t.next=5,N.a.delete("".concat(L).concat(a,"/"));case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert("Upload Failed: "+t.t0.toString());case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),this.deleteFolder=function(){var t=Object(d.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!window.confirm("Are you sure you want to delete this folder?")||!e.currentFolder){t.next=7;break}return t.next=5,N.a.delete("".concat(T).concat(a,"/"));case 5:return t.next=7,e.getContent(e.currentFolder.id);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert("Upload Failed: "+t.t0.toString());case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),this.createNewFolder=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFolder){t.next=7;break}return t.next=3,N.a.post(T,{name:a,parent:e.currentFolder.id?e.currentFolder.id:null});case 3:n=t.sent,e.currentFolder.folders.push(n.data),t.next=8;break;case 7:alert("Create new folder error: empty parent folder");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.renameFolder=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFolder){t.next=8;break}return t.next=3,N.a.patch("".concat(T).concat(a,"/"),{name:n});case 3:r=t.sent,(c=e.currentFolder.folders.findIndex((e=>e.id===a)))>-1&&(e.currentFolder.folders[c]=r.data),t.next=9;break;case 8:alert("Rename new folder error: empty parent folder");case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.renameDocument=function(){var t=Object(d.a)(m.a.mark((function t(a,n){var r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFolder){t.next=8;break}return t.next=3,N.a.patch("".concat(B).concat(a,"/"),{name:n});case 3:r=t.sent,(c=e.currentFolder.documents.findIndex((e=>e.id===a)))>-1&&(e.currentFolder.documents[c]=r.data),t.next=9;break;case 8:alert("Rename new document error");case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.getDocument=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(B).concat(t,"/"));case 2:return a=e.sent,e.abrupt("return",Promise.resolve(Object(D.a)(Object(D.a)({},a.data),{},{content:JSON.parse(a.data.content)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createNewDocument=function(){var t=Object(d.a)(m.a.mark((function t(a,n,r){var c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.post(B,{name:a,parent:e.currentFolder&&e.currentFolder.id?e.currentFolder.id:r,content:n?JSON.stringify(n.ops):void 0});case 2:return c=t.sent,e.currentFolder&&e.currentFolder.documents.push(c.data),t.abrupt("return",c.data);case 5:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),this.updateDocument=function(){var t=Object(d.a)(m.a.mark((function t(a,n,r){var c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.patch("".concat(B).concat(a,"/"),{name:n,content:JSON.stringify(null===r||void 0===r?void 0:r.ops)});case 2:c=t.sent,e.currentFolder&&(o=e.currentFolder.documents.findIndex((e=>e.id===a)))>-1&&(e.currentFolder.documents[o]=c.data);case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),this.deleteDocument=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFolder){t.next=13;break}if(!window.confirm("Do you want to delete this document?")){t.next=11;break}return t.next=5,N.a.delete("".concat(B).concat(a,"/"));case 5:return n=t.sent,t.next=8,e.getContent(e.currentFolder.id);case 8:return t.abrupt("return",Promise.resolve(n.data));case 11:t.next=15;break;case 13:return alert("Create new folder error: empty parent folder"),t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.menus=[],this.searchedFiles=[]}getSingleUploadFile(e){if(this.currentFolder){let t=new FormData;return t.append("file",e),this.currentFolder.id&&t.append("parent",this.currentFolder.id.toString()),t}}getUploadFileAndCreateFolder(e){var t=this;return Object(d.a)(m.a.mark((function a(){var n,r,c;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.currentFolder){a.next=8;break}return r=e.webkitRelativePath,c=new FormData,console.log(t.currentFolder),c.append("file",e),t.currentFolder.id&&c.append("parent","".concat(null===(n=t.currentFolder)||void 0===n?void 0:n.id)),c.append("paths",r),a.abrupt("return",c);case 8:case"end":return a.stop()}}),a)})))()}}class U extends n.Component{constructor(e){var t;super(e),t=this,this.updateDescription=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.setState({isLoading:!0}),e.next=4,N.a.get("/api/update_file_description");case 4:return a=t.props.match.params.id,e.next=7,t.fetch(a);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0);case 12:return e.prev=12,t.setState({isLoading:!1}),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])}))),this.setUploadedFile=e=>{this.setState({uploadedFiles:e})},this.selectDocument=e=>{this.setState({selectedDocument:e})},this.updateUploadInfo=e=>{this.setState({uploadInfo:e})},this.setUploadInfo=e=>{this.setState({uploadFiles:e})},this.fetch=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({isLoading:!0}),n=t.state.nas,e.next=4,n.getContent(a);case 4:t.setState({nas:n,isLoading:!1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.update=()=>{this.setState({nas:this.state.nas})},this.state={nas:new P,selectDocument:this.selectDocument,updateUploadInfo:this.updateUploadInfo,setUploadInfo:this.setUploadInfo,update:this.update,uploadedFiles:[],fetch:this.fetch,setUploadedFiles:this.setUploadedFile,updateDescription:this.updateDescription,isLoading:!1}}componentDidUpdate(e){var t=this;return Object(d.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.props.match.params.id===e.match.params.id){a.next=4;break}return n=t.props.match.params.id,a.next=4,t.fetch(n);case 4:case"end":return a.stop()}}),a)})))()}UNSAFE_componentWillMount(){var e=this;return Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,e.fetch(a);case 3:case"end":return t.stop()}}),t)})))()}render(){return r.a.createElement(H.Provider,{value:this.state},this.props.children)}}const A={nas:new P,uploadedFiles:[],setUploadedFiles:e=>{},update:()=>{},selectDocument:()=>{},updateUploadInfo:e=>{},setUploadInfo:e=>{},isLoading:!1},H=r.a.createContext(A);var q=a(47),G=a.n(q),Y=(a(579),a(392)),J=a.n(Y),K=a(46),V=a.n(K),Q=a(1859),X=a(1860),Z=a(1922),$=a(1865),ee=a(1866);function te(e){const t=Object(n.useContext)(H).nas,a=Object(n.useState)((()=>{switch(e.type){case"file":{let t=K.extname(e.selectedFile.filename);return K.basename(e.selectedFile.filename,t)}case"folder":default:return e.selectedFile.name}})()),c=Object(l.a)(a,2),o=c[0],i=c[1];return r.a.createElement(F.a,{open:e.open,fullWidth:!0},r.a.createElement(Q.a,null,"Rename"),r.a.createElement(X.a,null,r.a.createElement(Z.a,{color:"secondary",fullWidth:!0,value:o,onChange:e=>{i(e.target.value)}})),r.a.createElement($.a,null,r.a.createElement(ee.a,{onClick:()=>{e.onClose(),i("")}},"cancel"),r.a.createElement(ee.a,{onClick:Object(d.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!o){a.next=14;break}a.t0=e.type,a.next="file"===a.t0?4:"folder"===a.t0?8:"document"===a.t0?11:14;break;case 4:return n=K.extname(e.selectedFile.filename),a.next=7,t.rename(e.selectedFile.id,"".concat(o).concat(n));case 7:return a.abrupt("break",14);case 8:return a.next=10,t.renameFolder(e.selectedFile.id,o);case 10:return a.abrupt("break",14);case 11:return a.next=13,t.renameDocument(e.selectedFile.id,o);case 13:return a.abrupt("break",14);case 14:e.onClose();case 15:case"end":return a.stop()}}),a)})))},"ok")))}var ae=a(1867),ne=a(1868),re=a(1871),ce=a(1872),oe=a(1874),le=a(1875),ie=a(1876),se=a(390),ue=a.n(se),me=a(820),de=a.n(me),pe=a(1908);class fe extends n.Component{constructor(e){super(e),this.update=()=>{this.setState({nas:this.state.nas})},this.state={nas:new P,update:this.update}}render(){return r.a.createElement(ve.Provider,{value:this.state},this.props.children)}}const he={nas:new P,update:()=>{}},ve=r.a.createContext(he);function Ee(e){var t,a,c,o,i;const s=Object(n.useContext)(ve),u=s.nas,p=s.update,f=e.currentFile,h=e.onMove,v=e.onClose,x=Object(n.useState)(!1),w=Object(l.a)(x,2),C=w[0],j=w[1],S=Object(n.useState)(void 0===u.currentFolder),F=Object(l.a)(S,2),D=F[0],M=F[1];return u.currentFolder||u.getContent(f.parent).then((()=>{M(!1)})).catch((e=>{alert("".concat(e)),M(!1)})),r.a.createElement(ae.a,{style:{width:"400px"}},r.a.createElement(ne.a,null,r.a.createElement("div",null,r.a.createElement(y.a,{disabled:void 0===(null===(t=u.currentFolder)||void 0===t?void 0:t.parent),onClick:Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.next=3,u.getContent(null===(t=u.currentFolder)||void 0===t?void 0:t.parent);case 3:p(),setTimeout((()=>{M(!1)}),500);case 5:case"end":return e.stop()}}),e)})))},r.a.createElement(k.a,null)),null!==(a=null===(c=u.currentFolder)||void 0===c?void 0:c.name)&&void 0!==a?a:"root"),r.a.createElement(O.a,{in:D,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(re.a,{style:{backgroundColor:"#47bcff"}})),r.a.createElement(O.a,{in:!D,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(E.a,{style:{padding:0,maxHeight:400,overflowY:"auto"}},null===(o=u.currentFolder)||void 0===o||null===(i=o.folders)||void 0===i?void 0:i.map(((e,t)=>r.a.createElement(g.a,{key:"folder-".concat(t),button:!0,onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return M(!0),t.next=3,u.getContent(e.id);case 3:p(),setTimeout((()=>{M(!1)}),500);case 5:case"end":return t.stop()}}),t)})))},r.a.createElement(ce.a,null,r.a.createElement(ue.a,null)),r.a.createElement(b.a,{primary:e.name})))))),r.a.createElement(oe.a,null)),r.a.createElement(le.a,{disableSpacing:!0},r.a.createElement(ie.a,{title:"New Folder"},r.a.createElement(y.a,null,r.a.createElement(de.a,null))),r.a.createElement(pe.a,{loading:C,color:"blue",style:{marginLeft:"auto"},size:"tiny",onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f||!u.currentFolder){e.next=12;break}return e.prev=1,j(!0),e.next=5,h(f,u.currentFolder);case 5:setTimeout((()=>{j(!1),p(),v(),u.currentFolder=void 0}),400),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Cannot move to this location"),j(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))},"Move Here")))}function ge(){const e=Object(n.useContext)(H),t=e.nas,a=e.isLoading,c=e.update,o=Object(n.useState)(!1),i=Object(l.a)(o,2),s=i[0],u=i[1],w=Object(n.useState)(!1),D=Object(l.a)(w,2),M=D[0],I=D[1],T=Object(n.useState)(void 0),L=Object(l.a)(T,2),B=L[0],R=L[1],W=r.a.useState(null),z=Object(l.a)(W,2),_=z[0],P=z[1],U=()=>{P(null)};return r.a.createElement("div",{style:{overflow:"auto",overflowX:"hidden",height:"100%",color:"blue"}},r.a.createElement(E.a,null,r.a.createElement(p.a,{centered:!0},r.a.createElement(p.a.Row,{verticalAlign:"middle"},r.a.createElement(p.a.Column,{width:5},r.a.createElement(y.a,{onClick:()=>{var e,a;window.location.href="#/home/".concat(null!==(e=null===(a=t.currentFolder)||void 0===a?void 0:a.parent)&&void 0!==e?e:"")}},r.a.createElement(k.a,null))),r.a.createElement(p.a.Column,{width:11},r.a.createElement("div",{style:{color:"black"}},t.currentFolder&&t.currentFolder.name)))),t.errorMsg&&r.a.createElement(f.a,{error:!0},r.a.createElement(h.a,null,"Network Error"),r.a.createElement("div",null,t.errorMsg.toString())),r.a.createElement(O.a,{in:!a,timeout:300},t.currentFolder&&t.currentFolder.folders.map(((e,t)=>r.a.createElement(g.a,{button:!0,key:"folder-".concat(e.id)},r.a.createElement(x.a,null,r.a.createElement(v.a,{name:"folder",size:"large",color:"grey"})),r.a.createElement(b.a,{onClick:()=>{window.location.href="#/home/".concat(e.id)},style:{color:"black"},primary:e.name,secondary:G()(e.modified_at).format("MMM DD, YYYY")}),r.a.createElement(C.a,null,r.a.createElement(y.a,{onClick:t=>{P(t.currentTarget),R(e)}},r.a.createElement(J.a,null)))))))),r.a.createElement(j.a,{id:"simple-menu",anchorEl:_,keepMounted:!0,open:Boolean(_),onClose:U},r.a.createElement(S.a,{onClick:()=>{I(!0),U()}},"Rename"),r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=10;break}return e.next=3,N.a.post("".concat("/api/download/").concat(B.id));case 3:t=e.sent,(a=document.createElement("a")).href="".concat(t.data.download_url),console.log(a.href),document.body.appendChild(a),a.click(),document.body.removeChild(a);case 10:case"end":return e.stop()}}),e)})))},"Download Folder"),r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=6;break}return e.next=3,t.deleteFolder(B.id);case 3:U(),c(),R(void 0);case 6:case"end":return e.stop()}}),e)})))},"Delete"),r.a.createElement(S.a,{onClick:()=>{U(),u(!0)}},"Move To")),B&&M&&r.a.createElement(te,{type:"folder",selectedFile:B,open:M,onClose:()=>{R(void 0),I(!1)}}),B&&s&&r.a.createElement(F.a,{open:s,onClose:()=>{u(!1),R(void 0)}},r.a.createElement(Ee,{currentFile:B,onClose:()=>{u(!1),R(void 0)},onMove:function(){var e=Object(d.a)(m.a.mark((function e(a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.id!==n.id){e.next=2;break}throw Error("Cannot move to this place");case 2:return e.next=4,t.moveFolderTo(a.id,n.id);case 4:c();case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})))}var be=a(1920),xe=a(545),we=a(1907),ke=a(1880);function ye(e){const t=Object(n.useContext)(H),a=t.nas,c=t.update,o=t.uploadInfo,l=t.setUploadInfo,i=t.uploadFiles,s=t.updateUploadInfo,u=(t.setUploadedFiles,t.uploadedFiles),f=e=>{let t=e.target.files;if(t){let e=[];for(let a=0;a<t.length;a++)e.push(t[a]);l(e)}};return r.a.createElement(we.a,{open:e.open},r.a.createElement(we.a.Header,null,"Select ",e.isDir?"Folder":"Files"," "),r.a.createElement(we.a.Content,null,r.a.createElement(p.a.Row,null,e.isDir?r.a.createElement("input",{type:"file",multiple:!0,webkitdirectory:"",name:"Upload file",onChange:f}):r.a.createElement("input",{type:"file",multiple:!0,name:"Upload file",onChange:f})),o&&r.a.createElement(p.a.Row,{style:{marginTop:20}},r.a.createElement(be.a,null,r.a.createElement(ke.a,{percent:o.progress,attached:"top",color:"green",active:!0}),o.currentName," ",o.currentIndex,"/",o.total," --- ",o.progress," %",r.a.createElement(ke.a,{percent:o.currentIndex/o.total*100,attached:"bottom",color:"blue",active:!0})))),r.a.createElement(we.a.Actions,null,r.a.createElement(pe.a,{basic:!0,color:"red",onClick:()=>e.setOpen(!1)},r.a.createElement(v.a,{name:"remove"})," ",o?"Minimize":"Close"),r.a.createElement(pe.a,{disabled:void 0===i,color:"green",loading:void 0!==o,inverted:!0,onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=5;break}return t.next=3,a.uploadFile(i,e.isDir,((e,t,a,n)=>{s({total:i.length,currentIndex:e,currentName:i[e]?i[e].name:"Finished",progress:t,uploadedDataSize:a,totalDataSize:n})}),function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.push(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:c(),setTimeout((()=>{e.setOpen(!1),l(void 0),s(void 0)}),300);case 5:case"end":return t.stop()}}),t)})))},r.a.createElement(v.a,{name:"checkmark"})," Upload")))}function Oe(e){const t=Object(n.useContext)(H),a=t.nas,c=t.update,o=Object(n.useState)(""),i=Object(l.a)(o,2),s=i[0],u=i[1],p=Object(n.useState)(!1),f=Object(l.a)(p,2),h=f[0],E=f[1];return r.a.createElement(F.a,{open:e.open,fullWidth:!0},r.a.createElement(Q.a,null,"New Folder"),r.a.createElement(X.a,null,r.a.createElement(Z.a,{onChange:e=>{u(e.target.value)},value:s,color:"secondary",fullWidth:!0,label:"Folder Name",required:!0})),r.a.createElement($.a,null,r.a.createElement(pe.a,{basic:!0,color:"red",onClick:()=>{e.setOpen(!1),u("")}},r.a.createElement(v.a,{name:"remove"})," No"),r.a.createElement(pe.a,{basic:!0,color:"green",onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(!0),t.next=3,a.createNewFolder(s);case 3:c(),E(!1),u(""),e.setOpen(!1);case 7:case"end":return t.stop()}}),t)}))),loading:h},r.a.createElement(v.a,{name:"add"})," Create")))}var Ce=a(234),je=a(1921);function Se(e){const t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(l.a)(i,2),u=s[0],p=s[1],f=(e.document,Object(n.useContext)(H)),h=f.nas,v=f.update;return r.a.createElement(F.a,{open:e.open,onClose:()=>e.setOpen(!1),fullWidth:!0},r.a.createElement(Q.a,null,"Document"),r.a.createElement(X.a,null,r.a.createElement(Z.a,{color:"secondary",value:c,label:"You Document Title",onChange:e=>{o(e.target.value)},fullWidth:!0})),r.a.createElement($.a,null,r.a.createElement(pe.a,{onClick:()=>{e.setOpen(!1)}},"close"),r.a.createElement(pe.a,{loading:u,color:"blue",onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,p(!0),!c){t.next=9;break}return t.next=5,h.createNewDocument(c,void 0);case 5:v(),o(void 0),e.setOpen(!1),p(!1);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0.toString()),p(!1);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))},"Create")))}function Fe(){Object(n.useContext)(H).nas;const e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(l.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(!1),d=Object(l.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(!1),v=Object(l.a)(h,2),E=v[0],g=v[1];return r.a.createElement("div",null,r.a.createElement(Ce.a,{id:"folder"},r.a.createElement(je.a,{id:"folder",vertical:!0},r.a.createElement(Ce.c,{onClick:()=>{f(!0)}},r.a.createElement(xe.a,null,"New Folder")))),r.a.createElement(Ce.a,{id:"files"},r.a.createElement(je.a,{vertical:!0},r.a.createElement(xe.a,{onClick:()=>g(!0)},"New Document"),r.a.createElement(xe.a,{onClick:()=>{c(!0)}},"Upload Files"),r.a.createElement(xe.a,{onClick:()=>{u(!0)}},"Upload Folder"))),r.a.createElement(ye,{isDir:!1,open:a,setOpen:c}),r.a.createElement(ye,{isDir:!0,open:s,setOpen:u}),r.a.createElement(Oe,{open:p,setOpen:f}),r.a.createElement(Se,{open:E,setOpen:g}))}class De extends n.Component{constructor(e){super(e),this.fetchSystemInfo=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/system/");case 2:return t=e.sent,e.abrupt("return",Promise.resolve(t.data));case 4:case"end":return e.stop()}}),e)}))),this.state={}}componentDidMount(){var e=this;return Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchSystemInfo();case 2:(a=t.sent)&&e.setState({systemInfo:a});case 4:case"end":return t.stop()}}),t)})))()}render(){return r.a.createElement(Ie.Provider,{value:this.state},this.props.children)}}const Me={},Ie=r.a.createContext(Me);function Ne(e,t=2){if(0===e)return"0 Bytes";const a=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}function Te(){const e=Object(n.useContext)(Ie).systemInfo;return void 0===e?r.a.createElement(f.a,null,r.a.createElement("p",null,"No Info Avaliable currently")):r.a.createElement("div",null,r.a.createElement("span",null,"Used Sapce: ",Ne(e.disk.used),"/",Ne(e.disk.total)),r.a.createElement(ke.a,{percent:(e.disk.used/e.disk.total*100).toFixed(2),size:"tiny",color:"green"}))}var Le=a(1917),Be=a(175),Re=a.n(Be),We=a(1885),ze=a(1888),_e=a(1889),Pe=a(1890),Ue=a(1891),Ae=a(1892),He=a(1914),qe=a(1893),Ge=a(1816),Ye=a(1887),Je=a(1882),Ke=(a(1126),a(204)),Ve=a.n(Ke);function Qe(e){const t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(),s=Object(l.a)(i,2),u=s[0],p=s[1],f=Object(n.useState)(!1),h=Object(l.a)(f,2),v=h[0],E=(h[1],Object(n.useState)(!1)),g=Object(l.a)(E,2),b=g[0],x=g[1],w=e.document,k=Object(n.useContext)(H),y=k.nas,O=k.update;return void 0===u&&p(w?w.name:""),r.a.createElement(we.a,{open:e.open,centered:!1},r.a.createElement(we.a.Header,null,r.a.createElement(Z.a,{value:u,label:"You Document Title",onChange:e=>{p(e.target.value)},fullWidth:!0})),r.a.createElement(we.a.Content,null,r.a.createElement(Ve.a,{ref:e=>o(null!=e?e:void 0),defaultValue:w&&w.content})),r.a.createElement(we.a.Actions,null,r.a.createElement(pe.a,{onClick:()=>{if(v){window.confirm("Are you sure you want to exit? You will lose unsave data.")&&e.setOpen(!1)}else e.setOpen(!1)}},"close"),r.a.createElement(pe.a,{loading:b,color:"blue",onClick:Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,x(!0),!c||!u){t.next=19;break}if(a=c.getEditor().getContents(),!w){t.next=9;break}return t.next=7,y.updateDocument(w.id,u,a);case 7:t.next=15;break;case 9:if(""===u){t.next=14;break}return t.next=12,y.createNewDocument(u,a);case 12:t.next=15;break;case 14:throw"Name should not be empty";case 15:O(),p(void 0),e.setOpen(!1),x(!1);case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(0),alert(t.t0.toString()),x(!1);case 25:case"end":return t.stop()}}),t,null,[[0,21]])})))},"Save")))}var Xe=a(1881),Ze=a(261),$e=a.n(Ze);function et(){const e=Object(n.useContext)(H),t=e.nas,a=e.update,c=Object(n.useState)(!1),o=Object(l.a)(c,2),s=(o[0],o[1],Object(n.useState)()),u=Object(l.a)(s,2),p=u[0],f=(u[1],Object(n.useState)(!1)),h=Object(l.a)(f,2),v=h[0],E=h[1],g=Object(n.useState)(),b=Object(l.a)(g,2),x=b[0],w=b[1];return r.a.createElement("div",{style:{width:"100%",margin:"20px"}},r.a.createElement(Xe.a,{container:!0,spacing:3},t.currentFolder&&t.currentFolder.documents.map(((e,n)=>r.a.createElement(Xe.a,{item:!0,xs:6,md:3,key:"document-".concat(n)},r.a.createElement(ae.a,{variant:"outlined",raised:p===n},r.a.createElement(i.b,{to:"/document/".concat(e.id)},r.a.createElement(Je.a,{style:{height:80}},r.a.createElement(ne.a,null,r.a.createElement("h3",null,e.name)))),r.a.createElement(le.a,null,r.a.createElement(y.a,{onClick:Object(d.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.deleteDocument(e.id);case 2:a();case 3:case"end":return n.stop()}}),n)})))},r.a.createElement(Re.a,null)),r.a.createElement(y.a,{onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w(e),E(!0);case 2:case"end":return t.stop()}}),t)})))},r.a.createElement($e.a,null)))))))),x&&r.a.createElement(te,{type:"document",open:v,selectedFile:x,onClose:()=>{E(!1),w(void 0),a()}}))}var tt=a(841),at=a.n(tt),nt=a(840),rt=a.n(nt);class ct{constructor(){this.menuString=void 0,this.menuString="Base Plugin"}}var ot=a(837),lt=a.n(ot);class it extends ct{constructor(){super(),this.menuString="Convert to vtt"}shouldShow(e){return e.filename.includes("srt")}onClick(e){return Object(d.a)(m.a.mark((function t(){var a,n,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.post("".concat("/api/convert/caption/").concat(e.id));case 2:return a=t.sent,n=e.filename.replace(".srt",".vtt"),r=a.data.content,c=new Blob([r],{type:"text/plain;charset=utf-8"}),lt.a.saveAs(c,n),t.abrupt("return",void 0);case 8:case"end":return t.stop()}}),t)})))()}}var st=a(393),ut=a.n(st);class mt{constructor(){this.onPageClose=()=>{const e=new CustomEvent("closed-plugin",{detail:{}});window.opener.dispatchEvent(e)}}shouldGetFileContent(){return!1}getIcon(e){let t=null!==e&&void 0!==e?e:40,a=null!==e&&void 0!==e?e:40;return r.a.createElement(ut.a,{style:{height:t,width:a},color:"primary"})}openFile(e){if(this.shouldShow(e.file)){if(this.shouldOpenNewPage(e.file)){window.open("#/plugin/".concat(this.getPluginName(),"/").concat(e.file.id));let t=new Promise((e=>window.addEventListener("closed-plugin",e)));return void e.onClose(t)}return this.render(e)}}}var dt=a(890),pt=a(891),ft=a(1883),ht=a(316),vt=a(1886),Et=a(267),gt=a.n(Et),bt=a(894);class xt{static getFile(e){return Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("".concat(L).concat(e));case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()}static getContentById(e,t){return Object(d.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.get("".concat(R).concat(e),{onDownloadProgress:e=>{let a=Math.round(e.loaded/e.total);t&&t(a)}});case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}),a)})))()}static getContent(e){return Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("".concat(e));case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()}static createFileWithName(e,t){return Object(d.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.post("".concat(R,"/"),{filename:e,parent:null===t||void 0===t?void 0:t.id});case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}),a)})))()}static updateFileContent(e,t){return Object(d.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.patch("".concat(R).concat(e,"/"),{file_content:t});case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}}),a)})))()}}const wt=["abap","aes","apex","azcli","bat","c","cameligo","clojure","coffeescript","cpp","csharp","csp","css","dart","dockerfile","fsharp","go","graphql","handlebars","hcl","html","ini","java","javascript","json","julia","kotlin","less","lexon","lua","markdown","mips","msdax","mysql","objective-c","pascal","pascaligo","perl","pgsql","php","plaintext","postiats","powerquery","powershell","pug","python","r","razor","redis","redshift","restructuredtext","ruby","rust","sb","scala","scheme","scss","shell","sol","sql","st","swift","systemverilog","tcl","twig","typescript","vb","verilog","xml","yaml","text"];var kt=a(1884),yt=a(310),Ot=a.n(yt);const Ct=Object(ft.a)((e=>({appbar:{height:"90px"},container:{marginTop:"100px"},button:{padding:"4px 6px",minWidth:"40px",fontSize:"14px",fontWeight:"normal",textTransform:"capitalize"},menuItem:{minWidth:150},notchedOutline:{"&:focus":{},border:0,fontWeight:"normal",fontSize:"18px",paddingTop:5,paddingBottom:5,marginRight:10},largeIcon:{width:40,height:40},tag:{paddingLeft:6,paddingRight:6,backgroundColor:"#fbbc04"}})));function jt(e){const t=Ct(),a=e.file,n=e.menus,c=e.buttons,o=e.isLoading,i=e.onUpdateFileName,s=e.onClose,u=e.tag,p=e.leadingIcon,f=r.a.useState(a.filename),h=Object(l.a)(f,2),v=h[0],E=h[1];return r.a.useEffect((()=>{window.addEventListener("beforeunload",(()=>{s()}))}),[]),r.a.useEffect((()=>{E(a.filename)}),[a]),r.a.createElement(kt.a,{elevation:0,className:t.appbar,color:"secondary"},r.a.createElement(We.a,null,r.a.createElement(y.a,{onClick:()=>{s(),window.close()}},p),r.a.createElement(Xe.a,{style:{marginLeft:10}},r.a.createElement(Xe.a,{style:{padding:0},container:!0,alignContent:"center",alignItems:"center"},r.a.createElement(Ot.a,{id:"test-input",className:t.notchedOutline,onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},onChange:e=>{E(e.target.value)},onBlur:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(v);case 1:case"end":return e.stop()}}),e)}))),style:{maxWidth:.8*window.innerWidth},value:v}),u&&u),r.a.createElement(Xe.a,{container:!0,alignItems:"baseline"},c,r.a.createElement(ht.a,{variant:"subtitle1",style:{textDecoration:"underline",marginLeft:c.length>0?20:0,fontSize:15}},o?"Commnucating with server":"All changes saved in Drive"))),n))}const St=Object(pt.a)({palette:{secondary:{main:"#ffffff"},primary:{main:"#00b2ff"}}}),Ft=Object(ft.a)((e=>({appbar:{height:"90px"},container:{marginTop:"100px"},button:{padding:"4px 6px",minWidth:"40px",fontSize:"14px",fontWeight:"normal",textTransform:"capitalize"},menuItem:{minWidth:150},notchedOutline:{"&:focus":{},border:0,fontWeight:"normal",background:"transparent",fontSize:"18px",paddingTop:5,paddingBottom:5,marginRight:10},largeIcon:{width:40,height:40},tag:{paddingLeft:6,paddingRight:6,backgroundColor:"#fbbc04"}})));function Dt(e){const t=Ft(),a=r.a.useState(null),n=Object(l.a)(a,2),c=n[0],o=n[1],i=r.a.useState(!1),s=Object(l.a)(i,2),u=s[0],p=s[1],f=r.a.useState("text"),h=Object(l.a)(f,2),v=h[0],E=h[1],g=e.file,b=e.codeMapping,x=e.onClose,w=e.leadingIcon;r.a.useEffect((()=>{var e;const t=null!==(e=b[K.extname(g.filename)])&&void 0!==e?e:"text";E(t)}),[g]);const k=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),a="".concat(L).concat(g.id,"/"),e.next=5,N.a.patch(a,{filename:t});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.alert("Cannot rename");case 10:return e.prev=10,p(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,xt.updateFileContent(g.id,t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),window.alert("Cannot save file: ".concat(e.t0));case 9:return e.prev=9,setTimeout((()=>p(!1)),400),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t){return e.apply(this,arguments)}}(),O=Object(bt.a)(y,500),C=r.a.createElement(ie.a,{title:"Current language"},r.a.createElement(ae.a,{elevation:0,className:t.tag},r.a.createElement(ht.a,{variant:"button",style:{fontWeight:"normal"}},v))),F=[r.a.createElement(ee.a,{key:"Languages",className:t.button,size:"small",onClick:e=>o(e.currentTarget)},"Languages")],D=[r.a.createElement(j.a,{key:"menus",style:{marginLeft:20},anchorEl:c,keepMounted:!0,open:Boolean(c),getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:()=>{o(null)}},wt.map(((e,a)=>r.a.createElement(S.a,{key:e,className:t.menuItem,onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o(null),E(e);case 2:case"end":return t.stop()}}),t)})))},e," ",e===v&&r.a.createElement(gt.a,null)))))];return r.a.createElement(vt.a,{theme:St},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(jt,{leadingIcon:w,file:g,menus:D,buttons:F,onClose:x,tag:C,isLoading:u,onUpdateFileName:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement("div",{className:t.container},r.a.createElement(dt.a,{height:"87vh",language:v,defaultValue:g.file_content,onChange:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(null!==t&&void 0!==t?t:"");case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}))))}const Mt={".py":"python",".java":"java",".jsx":"javascript",".tsx":"typescript",".lua":"lua",".html":"html",".js":"javascript",".ts":"typescript",".dart":"dart",".c":"c",".h":"c",".yml":"yaml",".swift":"swift",".md":"markdown",".txt":"text",".rtf":"text",".css":"css",".scss":"css",".cpp":"cpp",".xml":"xml",".ipynb":"json"},It=[".py",".java",".jsx",".tsx",".lua",".html",".js",".ts",".dart",".c",".h",".yml",".swift",".md",".txt",".rtf",".css",".scss",".cpp",".xml","Dockerfile",".go"];class Nt extends mt{shouldGetFileContent(){return!0}getPluginName(){return"coder"}shouldOpenNewPage(e){return!0}shouldShow(e){return e.size>107374182400?(window.alert("Too large to open"),!1):It.includes(K.extname(e.filename)||e.filename)}render(e){e.file,e.onClose;return r.a.createElement(Dt,{file:e.file,codeMapping:Mt,onClose:this.onPageClose,leadingIcon:this.getIcon()})}}class Tt extends ct{constructor(){super(),this.menuString="Open With Code Editor"}shouldShow(e){return!0}onClick(e){return Object(d.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Nt,window.open("#/plugin/".concat(a.getPluginName(),"/").concat(e.id)),n=new Promise((e=>window.addEventListener("closed-plugin",e))),t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()}}class Lt extends n.Component{constructor(e){var t;super(e),t=this,this.plugins=void 0,this.openMenu=(e,t,a)=>{this.setState({currentFile:t,anchor:e,nas:a})},this.closeMenu=()=>{this.setState({currentFile:void 0,anchor:void 0})},this.hideMenu=()=>{this.setState({anchor:void 0})},this.setCurrentFile=e=>{this.setState({currentFile:e})},this.closeRenameDialog=()=>{this.setState({showRenameDialog:!1,currentFile:void 0})},this.closeMoveToDialog=()=>{this.setState({showMoveToDialog:!1,currentFile:void 0})},this.renderMenu=()=>{const e=this.state,a=e.currentFile,n=e.anchor,c=e.nas;return void 0===c?r.a.createElement("div",null):c?r.a.createElement(j.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:this.closeMenu},r.a.createElement(S.a,{onClick:()=>{if(a){const e=document.createElement("a");e.setAttribute("download",a.filename),e.href="".concat(a.file),document.body.appendChild(e),e.click(),document.body.removeChild(e)}this.closeMenu()}},"Download"),r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&(t.hideMenu(),t.setState({showRenameDialog:!0}));case 1:case"end":return e.stop()}}),e)})))},"Rename"),r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,c.deleteFile(a.id);case 3:t.closeMenu(),t.setState({nas:c});case 5:case"end":return e.stop()}}),e)})))},"Delete"),r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&(t.hideMenu(),t.setState({showMoveToDialog:!0}));case 1:case"end":return e.stop()}}),e)})))},"Move To"),this.plugins.map(((e,n)=>a&&e.shouldShow(a)&&r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function n(){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.onClick(a);case 2:if(r=n.sent,t.closeMenu(),!r){n.next=8;break}return n.next=7,r;case 7:window.location.reload();case 8:case"end":return n.stop()}}),n)})))},e.menuString)))):void 0},this.plugins=[new it,new Tt],this.state={showRenameDialog:!1,showMoveToDialog:!1,openMenu:this.openMenu,closeMoveToDialog:this.closeMoveToDialog,closeRenameDialog:this.closeRenameDialog,setCurrentFile:this.setCurrentFile,closeMenu:this.closeMenu,renderMenu:this.renderMenu}}render(){return r.a.createElement(Rt.Provider,{value:this.state},this.props.children)}}const Bt={},Rt=r.a.createContext(Bt),Wt=a(1136).Player,zt=[".mov",".mp4",".avi",".m4v",".MOV",".MP4"];const _t=[".jpg",".png",".bmp",".JPG",".gif",".jpeg",".JPEG"];function Pt(e){return _t.includes(V.a.extname(e))}function Ut(e){return zt.includes(V.a.extname(e))}function At(e){const t=e.plugins,a=Object(n.useContext)(H),c=a.nas,o=(a.isLoading,a.update),i=a.selectedDocument,s=a.selectDocument,u=a.fetch,f=Object(n.useContext)(Rt),h=f.openMenu,E=f.renderMenu,g=f.currentFile,b=f.showRenameDialog,x=f.showMoveToDialog,w=f.closeMoveToDialog,k=f.closeRenameDialog,O=r.a.useState(null),C=Object(l.a)(O,2),j=C[0],S=C[1],D=Object(n.useState)(),I=Object(l.a)(D,2),T=I[0],L=I[1],B=Object(n.useState)([]),R=Object(l.a)(B,2),W=R[0],z=R[1],_=Object(n.useState)(),P=Object(l.a)(_,2),U=P[0],A=P[1],q=Object(n.useState)(!1),Y=Object(l.a)(q,2),K=Y[0],Q=Y[1],X=r.a.useCallback(function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(void 0),!t){e.next=6;break}return e.next=4,t;case 4:return e.next=6,u(null===(a=c.currentFolder)||void 0===a?void 0:a.id);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return r.a.createElement("div",{id:"file-list"},r.a.createElement(p.a,null,r.a.createElement(et,null),r.a.createElement(We.a,null,r.a.createElement("div",null,0===W.length?r.a.createElement("h2",null,"Files"):r.a.createElement("h2",null,"Selected ",W.length," files")),0===W.length?r.a.createElement("div",null," "):r.a.createElement("div",null,r.a.createElement(ie.a,{title:"Download files"},r.a.createElement(y.a,{"aria-label":"download",onClick:Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("".concat("/api/download_multiple/"),W.map((e=>e.id)));case 3:t=e.sent,(a=document.createElement("a")).href="".concat(t.data.download_url),console.log(a.href),document.body.appendChild(a),a.click(),document.body.removeChild(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))},r.a.createElement(rt.a,null))),r.a.createElement(ie.a,{title:"Delete"},r.a.createElement(y.a,{"aria-label":"delete",onClick:Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete these files?")){e.next=21;break}t=Object(M.a)(W),e.prev=3,t.s();case 5:if((a=t.n()).done){e.next=12;break}return n=a.value,e.next=9,c.deleteFile(n.id,!1);case 9:o();case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:z([]);case 21:case"end":return e.stop()}}),e,null,[[3,14,17,20]])})))},r.a.createElement(Re.a,null))),r.a.createElement(ie.a,{title:"Move To"},r.a.createElement(y.a,{"aria-label":"Move To",onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(!0);case 1:case"end":return e.stop()}}),e)})))},r.a.createElement(at.a,null))))),r.a.createElement(p.a.Row,{style:{overflow:"auto",overflowX:"hidden"}},c.currentFolder&&c.currentFolder.files.length>0&&r.a.createElement(ze.a,null,r.a.createElement(_e.a,null,r.a.createElement(Pe.a,null,r.a.createElement(Ue.a,null,r.a.createElement(Ae.a,null,r.a.createElement(He.a,{onChange:e=>{e.target.checked?c.currentFolder&&z(c.currentFolder.files):z([]),o()},checked:W.length===c.currentFolder.files.length})),r.a.createElement(Ae.a,null,"Name"),r.a.createElement(Ae.a,null,"Last Modify"),r.a.createElement(Ae.a,null,"Size"),r.a.createElement(Ae.a,null,"Actions"))),r.a.createElement(qe.a,null,c.currentFolder.files.map(((e,t)=>{return r.a.createElement(Ue.a,{key:"file-".concat(t),hover:!0,selected:W.includes(e)},r.a.createElement(Ae.a,null,r.a.createElement(He.a,{checked:W.includes(e),onChange:t=>{if(t.target.checked)W.push(e);else{let t=W.indexOf(e);W.splice(t,1)}o(),z(W)}})),r.a.createElement(Ae.a,{style:{cursor:"grab"},onMouseOver:t=>{S(t.currentTarget),A(e)},onMouseLeave:()=>{S(null),A(void 0)},onClick:()=>{L(e)}},r.a.createElement(v.a,{name:(a=e.file,Pt(a)?"images":Ut(a)?"file video":"file"),size:"large",color:"teal"}),V.a.basename(e.filename)),r.a.createElement(Ae.a,null,G()(e.modified_at).format("MMM DD, YYYY")),r.a.createElement(Ae.a,null,Ne(e.size)),r.a.createElement(Ae.a,null,r.a.createElement(y.a,{onClick:t=>{h(t.currentTarget,e,c)}},r.a.createElement(J.a,null))));var a})))))),g&&E(),t.map(((e,t)=>{if(T){return e.openFile({file:T,onClose:X})}})),i&&r.a.createElement(Qe,{open:void 0!==i,setOpen:e=>{!e&&s(void 0)},document:i}),g&&r.a.createElement(F.a,{open:x,scroll:"paper",onClose:()=>{w()}},r.a.createElement(Ee,{currentFile:g,onClose:()=>{w()},onMove:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.moveFileTo(t.id,a.id);case 2:o();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})),W.length>0&&r.a.createElement(F.a,{open:K,onClose:()=>{Q(!1)}},r.a.createElement(Ee,{currentFile:W[0],onClose:()=>{z([]),Q(!1)},onMove:function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(M.a)(W),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=10;break}return l=r.value,e.next=7,c.moveFileTo(l.id,a.id);case 7:o();case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t,a){return e.apply(this,arguments)}}()})),g&&r.a.createElement(te,{type:"file",open:b,selectedFile:g,onClose:()=>{k()}})),r.a.createElement(Ge.a,{open:Boolean(j),anchorEl:j},U&&r.a.createElement(ae.a,{style:{padding:10}},Pt(U.filename)&&r.a.createElement(Ye.a,{style:{height:140,width:140},image:U.file}),Ut(U.filename)&&U.cover?r.a.createElement(Je.a,null,r.a.createElement(Ye.a,{style:{height:140,width:140},image:U.cover}),r.a.createElement(Le.a,null," ",Ne(U.size))):r.a.createElement("div",null,U.filename," - ",Ne(U.size)))))}var Ht=a(396),qt=a.n(Ht),Gt=a(412),Yt=a(262);function Jt(){const e=Object(n.useContext)(H),t=e.uploadFiles,a=e.uploadInfo,c=e.uploadedFiles,o=Object(n.useContext)(Ie).systemInfo;let l=t?t.filter((e=>!c.includes(e))):[];return r.a.createElement(E.a,{style:{overflowY:"hidden",height:"100%",overflowX:"hidden"}},o&&r.a.createElement(p.a,null,r.a.createElement(p.a.Row,{style:{height:40}},r.a.createElement(p.a.Column,{width:8},r.a.createElement("div",null,"CPU"),r.a.createElement(re.a,{color:"secondary",variant:"determinate",value:o.cpu})),r.a.createElement(p.a.Column,{width:8},r.a.createElement("div",null,"Memory"),r.a.createElement(re.a,{title:"Memory",color:"secondary",variant:"determinate",value:o.memory.used/o.memory.total*100})))),r.a.createElement(Yt.a,null,(({height:e,width:t})=>r.a.createElement(Gt.a,{height:e-100,itemCount:Math.min(3e3,l.length),itemSize:80,width:t},(({index:e,style:t})=>r.a.createElement(g.a,{key:"upload-".concat(e),style:t},r.a.createElement(ce.a,null,r.a.createElement(v.a,{name:"file"})),r.a.createElement(b.a,{primary:l[e].name,secondary:r.a.createElement(re.a,{color:"secondary",variant:(a&&a.currentIndex,"determinate"),value:a&&a.currentIndex===e?a.progress:0})})))))),void 0===t&&r.a.createElement(p.a,{centered:!0,verticalAlign:"middle"},r.a.createElement("div",{style:{marginTop:"50px",marginBottom:"auto"}},"No Pending Uploads")))}var Kt=a(397),Vt=a.n(Kt),Qt=a(842),Xt=a.n(Qt),Zt=a(1925),$t=a(53),ea=a(1915),ta=a(1896),aa=a(1894),na=a(901),ra=a(1895),ca=a(415),oa=a(395),la=a.n(oa);const ia=Object(ft.a)((e=>Object(Zt.a)({popper:{marginTop:10,marginRight:15,width:"40ch",maxHeight:400,overflow:"auto"},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object($t.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object($t.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}})));function sa(){const e=ia(),t=Object(n.useContext)(H),a=t.nas,c=t.update,o=Object(n.useState)(!1),i=Object(l.a)(o,2),s=i[0],u=i[1],p=r.a.useState(null),f=Object(l.a)(p,2),h=f[0],v=f[1],E=Object(n.useState)(""),x=Object(l.a)(E,2),w=x[0],k=x[1],y=()=>{v(null)};return r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},s?r.a.createElement(aa.a,{size:20,color:"inherit"}):r.a.createElement(la.a,null)),r.a.createElement(na.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},onClick:e=>v(e.currentTarget),onChange:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,k(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onKeyDown:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=6;break}return u(!0),e.next=4,a.search(w);case 4:c(),u(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement(Ge.a,{open:Boolean(h),anchorEl:h},r.a.createElement(ra.a,{onClickAway:y},r.a.createElement(ca.a,{className:e.popper},0===a.searchedFiles.length&&r.a.createElement(g.a,null,"No File. Press Enter to search"),a.searchedFiles.map((e=>r.a.createElement(S.a,{key:e.id,onClick:()=>{window.location.href="#/home/".concat(e.parent),y()}},r.a.createElement(b.a,{primary:r.a.createElement(ht.a,{noWrap:!0},V.a.basename(e.filename)),secondary:r.a.createElement(ht.a,null,e.created_at)}))))))))}const ua=Object(ft.a)((e=>Object(Zt.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,display:"none",[e.breakpoints.up("sm")]:{display:"block"}},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object($t.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object($t.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}})));function ma(e){const t=Object(n.useContext)(H),a=(t.nas,t.isLoading),c=(t.update,t.updateDescription),o=e.plugins,s=Object(n.useState)(!1),u=Object(l.a)(s,2),f=u[0],h=u[1],v=r.a.useState(null),E=Object(l.a)(v,2),g=E[0],b=E[1],x=ua();return r.a.createElement("div",{id:"home",style:{height:"100%",overflow:"hidden"}},r.a.createElement(kt.a,{position:"static"},r.a.createElement(We.a,null,r.a.createElement(ea.a,{mdUp:!0},r.a.createElement(y.a,{className:x.menuButton,color:"inherit",onClick:()=>{h(!0)}},r.a.createElement(qt.a,null))),r.a.createElement(ht.a,{className:x.title,variant:"h6",noWrap:!0},"Django Nas"),r.a.createElement(ie.a,{title:"Refresh description"},r.a.createElement(y.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:case"end":return e.stop()}}),e)})))},r.a.createElement(Vt.a,null))),r.a.createElement(ie.a,{title:"Open Apps"},r.a.createElement(y.a,{onClick:e=>b(e.currentTarget)},r.a.createElement(Xt.a,null))),r.a.createElement(sa,null))),r.a.createElement(ta.a,{open:f,onClose:()=>h(!1)},r.a.createElement("div",{style:{width:300,height:"100%"}},r.a.createElement(ge,null))),r.a.createElement(be.a,{loading:a,style:{height:"100%",margin:0}},r.a.createElement(p.a,{style:{height:"100%",overflow:"hidden",position:"relative"}},r.a.createElement(p.a.Row,{style:{height:"100%",paddingTop:0,paddingBottom:0}},r.a.createElement(ea.a,{smDown:!0,implementation:"js"},r.a.createElement(p.a.Column,{computer:3,style:{height:"100%",backgroundColor:"#fcfcfc"}},r.a.createElement(Ce.b,{id:"folder"},r.a.createElement(p.a.Row,{style:{height:"92%"}},r.a.createElement(ge,null)),r.a.createElement(p.a.Row,null,r.a.createElement(Te,null))))),r.a.createElement(p.a.Column,{computer:10,mobile:16,tablet:16,style:{height:"100%"}},r.a.createElement(Ce.b,{id:"files"},r.a.createElement(At,{plugins:o}))),r.a.createElement(ea.a,{smDown:!0,implementation:"js"},r.a.createElement(p.a.Column,{computer:3,style:{height:"100%",backgroundColor:"#fcfcfc"}},r.a.createElement(Jt,null)))))),r.a.createElement(Fe,null),r.a.createElement(j.a,{anchorEl:g,open:Boolean(g),onClose:()=>b(null)},r.a.createElement(i.b,{to:"/music"},r.a.createElement(S.a,null,"Open Music")),r.a.createElement(i.b,{to:"/book"},r.a.createElement(S.a,null,"Open Book")),r.a.createElement(i.b,{to:"/gallery"},r.a.createElement(S.a,null,"Open Gallery"))))}var da=a(1897),pa=a(236);function fa(e){const t=e.title,a=e.used,n=e.total,c=e.color,o=e.color2;let l=[{name:"Used",value:a},{name:"Available",value:n-a}];return r.a.createElement(be.a,null,r.a.createElement(pa.d,{minHeight:300,height:"100%",width:"100%",minWidth:200},r.a.createElement(pa.c,null,r.a.createElement(pa.b,{data:l,dataKey:"value",label:!0,fill:c,isAnimationActive:!1},r.a.createElement(pa.a,{fill:c}),r.a.createElement(pa.a,{fill:o})),r.a.createElement(pa.e,null))),r.a.createElement("span",null,t))}function ha(){const e=Object(n.useContext)(Ie).systemInfo;return void 0===e?r.a.createElement("div",null,"Infomation Not Available"):r.a.createElement("div",{id:"home",style:{width:"100%",color:"black"}},r.a.createElement(da.a,null,r.a.createElement("h1",null,"System Info"),r.a.createElement(p.a,{columns:2},r.a.createElement(p.a.Column,null,r.a.createElement(fa,{used:Math.round(e.disk.used/1024/1024),total:Math.round(e.disk.total/1024/1024),title:"Disk(MB)",color:"#0088FE",color2:"orange"})),r.a.createElement(p.a.Column,null,r.a.createElement(fa,{used:Math.round(e.memory.used/1024/1024),total:Math.round(e.memory.total/1024/1024),title:"Memory(MB)",color:"#0088FE",color2:"orange"})),r.a.createElement(p.a.Column,null,r.a.createElement(fa,{used:e.cpu,total:100,title:"CPU Usage(Percentage)",color:"#0088FE",color2:"orange"})),r.a.createElement(p.a.Column,null,r.a.createElement(be.a,{style:{height:"100%"}},r.a.createElement("h4",null,"Temperature"),r.a.createElement("h1",null,e.temperature?e.temperature.toFixed(1):"None"))),r.a.createElement(p.a.Column,null,r.a.createElement(be.a,{style:{height:"100%"}},r.a.createElement("h4",null,"Humidity"),r.a.createElement("h1",null,e.humidity?e.humidity.toFixed(1):"None"))),r.a.createElement(p.a.Column,null,r.a.createElement(be.a,{style:{height:"100%"}},r.a.createElement("h4",null,"Pressure"),r.a.createElement("h1",null,e.pressure?e.pressure.toFixed(2):"None"))))))}var va=a(1903),Ea=a(849);const ga=a(1209).QuillDeltaToHtmlConverter;class ba extends n.Component{constructor(e){var t;super(e),t=this,this.updateDocument=e=>{this.setState({currentDocument:e})},this.saveDocument=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=t.state.currentDocument)){e.next=6;break}return t.setState({isLoading:!0}),e.next=6,t.state.nas.updateDocument(a.id,a.name,a.content);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.setState({errorMsg:"Failed to save"});case 11:return e.prev=11,setTimeout((()=>{t.setState({isLoading:!1})}),1e3),setTimeout((()=>{t.setState({errorMsg:void 0})}),3e3),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,8,11,15]])}))),this.newDocument=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.readFile=e=>new Promise(((t,a)=>{let n=new FileReader;n.onload=e=>{let a=n.result;t(a)},n.readAsText(e)})),this.openFromLocal=Object(d.a)(m.a.mark((function e(){var a,n,r,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.state,n=a.currentDocument,r=a.nas;try{(o=null!==(c=document.getElementById("new file"))&&void 0!==c?c:document.createElement("input")).id="new file",o.type="file",o.accept=".md,.html",o.multiple=!1,o.click(),o.addEventListener("change",function(){var e=Object(d.a)(m.a.mark((function e(a){var c,l,i,s,u,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setState({isLoading:!0,errorMsg:"Reading Local Document..."}),!(c=o.files)){e.next=17;break}if(l=c[0],".md"!==K.extname(l.name)){e.next=17;break}return i=new Ea.MarkdownToQuill,e.next=9,t.readFile(l);case 9:return s=e.sent,u=i.convert(s),t.setState({errorMsg:"Creating New Document"}),e.next=14,r.createNewDocument(l.name,{ops:u},null===n||void 0===n?void 0:n.parent);case 14:d=e.sent,t.setState({errorMsg:"Document Created. Preparing for redirecting"}),setTimeout((()=>{t.setState({isLoading:!1,errorMsg:void 0}),window.location.href="#/document/"+d.id}),1500);case 17:o.remove();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(l){t.setState({errorMsg:"Unable to open file",isLoading:!1})}case 2:case"end":return e.stop()}}),e)}))),this.saveToLocal=function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.state.currentDocument)){e.next=8;break}e.t0=a,e.next="html"===e.t0?5:8;break;case 5:return r=new ga(n.content),r.convert(),e.abrupt("break",8);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.setState({isLoading:!0}),e.next=4,t.state.nas.getDocument(a);case 4:n=e.sent,setTimeout((()=>{t.setState({currentDocument:n})}),400),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.setState({errorMsg:"Failed to open"});case 11:return e.prev=11,setTimeout((()=>{t.setState({isLoading:!1})}),500),t.setState({currentDocument:void 0}),setTimeout((()=>{t.setState({errorMsg:void 0})}),3e3),e.finish(11);case 16:case"end":return e.stop()}}),e,null,[[0,8,11,16]])})));return function(t){return e.apply(this,arguments)}}(),this.update=()=>{this.setState({nas:this.state.nas})},this.state={nas:new P,isLoading:!1,update:this.update,updateDocument:this.update,saveDocument:this.saveDocument,saveToLocal:this.saveToLocal,oepnFromLocal:this.openFromLocal,newDocument:this.newDocument}}componentDidUpdate(e){var t=this;return Object(d.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.props.match.params.id===e.match.params.id){a.next=5;break}if(!(n=t.props.match.params.id)){a.next=5;break}return a.next=5,t.fetch(n);case 5:case"end":return a.stop()}}),a)})))()}UNSAFE_componentWillMount(){var e=this;return Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.props.match.params.id)){t.next=4;break}return t.next=4,e.fetch(a);case 4:case"end":return t.stop()}}),t)})))()}render(){return r.a.createElement(wa.Provider,{value:this.state},this.props.children)}}const xa={nas:new P,update:()=>{},updateDocument:e=>{},saveDocument:()=>Promise.resolve(),oepnFromLocal:()=>Promise.resolve(),newDocument:()=>Promise.resolve(),saveToLocal:()=>Promise.resolve(),isLoading:!1},wa=r.a.createContext(xa);var ka=a(1898),ya=a(1899),Oa=a(1926),Ca=a(899);const ja=Object(ft.a)((e=>({notchedOutline:{"&:focus":{},border:0,fontWeight:"normal",background:"transparent",fontSize:"18px",paddingTop:5},button:{padding:"0px 5px"}})));function Sa(){const e=Object(n.useContext)(wa),t=e.currentDocument,a=e.updateDocument,c=e.saveDocument,o=e.isLoading,i=e.nas,s=e.update,u=r.a.useState(),p=Object(l.a)(u,2),f=p[0],h=p[1],v=Object(n.useState)(0),E=Object(l.a)(v,2),g=E[0],b=E[1],x=ja();return void 0!==t||o?r.a.createElement("div",{style:{marginTop:15,marginLeft:5}},r.a.createElement(O.a,{in:o&&!t,unmountOnExit:!0,mountOnEnter:!0},r.a.createElement("div",{style:{height:24,width:100}},r.a.createElement(re.a,{variant:"indeterminate",style:{marginTop:15,width:100}}))),r.a.createElement(O.a,{in:!o||void 0!==t,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",null,r.a.createElement(ie.a,{title:"Rename"},r.a.createElement(ra.a,{onClickAway:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g>0)){e.next=4;break}return e.next=3,c();case 3:b(0);case 4:case"end":return e.stop()}}),e)})))},r.a.createElement(Ot.a,{id:"test-input",className:x.notchedOutline,style:{maxWidth:.8*window.innerWidth},value:null===t||void 0===t?void 0:t.name,onChange:e=>{t&&(t.name=e.target.value,b(g+1),a(t))}}))),(null===t||void 0===t?void 0:t.show_in_folder)&&r.a.createElement(ie.a,{title:"Move"},r.a.createElement(y.a,{className:x.button,onClick:function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(a.currentTarget),!t){e.next=4;break}return e.next=4,i.getContent(t.parent);case 4:s();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement(ue.a,null))))),f&&r.a.createElement(ra.a,{onClickAway:()=>h(void 0)},r.a.createElement(Ge.a,{open:Boolean(f),anchorEl:f,style:{zIndex:2e3},placement:"right-end"},t&&r.a.createElement(Ee,{currentFile:t,onClose:()=>h(void 0),onMove:function(){var e=Object(d.a)(m.a.mark((function e(n,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.moveDocument(n.id,r.id);case 2:t.parent=r.id,a(t);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})))):r.a.createElement("div",null,r.a.createElement(Ot.a,{id:"test-input",className:x.notchedOutline,style:{maxWidth:.8*window.innerWidth},value:"Cannot fetch document"}))}var Fa=a(1930),Da=a(20);const Ma=Object(ft.a)((e=>Object(Zt.a)({divider:{height:"10px",borderLeft:"6px solid black"}})));Object(Da.a)((e=>({grouped:{margin:e.spacing(.5),border:"none",padding:e.spacing(0,1),"&:not(:first-child)":{borderRadius:e.shape.borderRadius},"&:first-child":{borderRadius:e.shape.borderRadius}}})))(Fa.a);function Ia(){Ma();return r.a.createElement("div",{id:"toolbar"},r.a.createElement("span",{className:"ql-formats"},r.a.createElement("select",{className:"ql-size"},r.a.createElement("option",{value:"small"}),r.a.createElement("option",{selected:!0}),r.a.createElement("option",{value:"large"}),r.a.createElement("option",{value:"huge"})),r.a.createElement("button",{type:"button",className:"ql-italic"}),r.a.createElement("button",{type:"button",className:"ql-underline"}),r.a.createElement("span",{className:"ql-formats"},r.a.createElement("button",{type:"button",className:"ql-indent",value:"-1"}),r.a.createElement("button",{type:"button",className:"ql-indent",value:"+1"}),r.a.createElement("select",{className:"ql-align"},r.a.createElement("option",{value:"center"}),r.a.createElement("option",{value:"right"}),r.a.createElement("option",{value:"justify"})),r.a.createElement("button",{type:"button",className:"ql-direction",value:"rtl"}),r.a.createElement("button",{type:"button",className:"ql-list",value:"ordered"}),r.a.createElement("button",{type:"button",className:"ql-list",value:"bullet"})),r.a.createElement("span",{className:"ql-formats"},r.a.createElement("button",{type:"button",className:"ql-image"}),r.a.createElement("button",{type:"button",className:"ql-code-block"}),r.a.createElement("button",{type:"button",className:"ql-script",value:"sub"}),r.a.createElement("button",{type:"button",className:"ql-script",value:"super"}),r.a.createElement("button",{type:"button",className:"ql-clean"}))))}const Na=Ke.Quill.import("blots/block/embed");class Ta extends Na{}Ta.blotName="divider",Ta.tagName="hr",Ke.Quill.register(Ta);Object(ft.a)((e=>({notchedOutline:{"&:focus":{},border:0,fontWeight:"normal",background:"transparent",fontSize:"20px"}})));function La(){const e=Object(n.useContext)(wa),t=e.currentDocument,a=e.updateDocument,c=e.saveDocument,o=Object(n.useState)(0),i=Object(l.a)(o,2),s=i[0],u=i[1],p=Object(n.useState)(),f=Object(l.a)(p,2),h=f[0],v=f[1],E=function(){var e=Object(d.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!h){e.next=7;break}return n=h.getEditor().getContents(),t.content=n,a(t),e.next=6,c();case 6:u(0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g={toolbar:{container:"#toolbar"}};return void 0===t?r.a.createElement(Ve.a,{style:{height:"100%",border:0,paddingBottom:"85px"},modules:g}):r.a.createElement(ra.a,{onClickAway:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s>0)){e.next=3;break}return e.next=3,E();case 3:case"end":return e.stop()}}),e)})))},r.a.createElement(Ve.a,{ref:e=>v(null!=e?e:void 0),onKeyDown:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(s+1),!(s>3)){e.next=4;break}return e.next=4,E();case 4:case"end":return e.stop()}}),e)}))),onChange:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:{height:"100%",border:0,paddingBottom:"85px"},defaultValue:t.content,modules:g}))}a(1221);var Ba=a(895);const Ra=Object(ft.a)((e=>({button:{padding:"4px 6px",minWidth:"40px",fontSize:"14px",fontWeight:"normal",textTransform:"capitalize"},menuItem:{minWidth:150}})));function Wa(){const e=Ra(),t=r.a.useContext(wa),a=t.isLoading,n=t.saveToLocal,c=t.oepnFromLocal,o=r.a.useState(null),i=Object(l.a)(o,2),s=i[0],u=i[1];return r.a.createElement("div",null,r.a.createElement(ee.a,{className:e.button,size:"small",onClick:e=>u(e.currentTarget)},"File"),r.a.createElement(ee.a,{className:e.button,size:"small"},"Edit"),r.a.createElement(ee.a,{className:e.button,size:"small"},"Settings"),r.a.createElement(ee.a,{className:e.button,size:"small"},"Tools"),r.a.createElement(ee.a,{className:e.button,size:"small"},"Help"),r.a.createElement("span",{style:{textDecoration:"underline",color:"grey",marginLeft:20}},a?"Commnucating with server":"All changes saved in Drive"),r.a.createElement(j.a,{anchorEl:s,keepMounted:!0,open:Boolean(s),getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:()=>{u(null)}},r.a.createElement(S.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:u(null);case 3:case"end":return e.stop()}}),e)})))},"Open"),r.a.createElement(Ba.a,{label:"Download",parentMenuOpen:Boolean(s),className:e.menuItem},r.a.createElement(S.a,{className:e.menuItem,onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("pdf");case 2:u(null);case 3:case"end":return e.stop()}}),e)})))},"PDF Document (.pdf)"," "),r.a.createElement(S.a,{className:e.menuItem,onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("html");case 2:u(null);case 3:case"end":return e.stop()}}),e)})))},"Web Page (.html)"," "))))}var za=a(400),_a=a.n(za),Pa=a(401),Ua=a.n(Pa),Aa=a(402),Ha=a.n(Aa);class qa extends n.Component{constructor(e){var t;super(e),t=this,this.fetch=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({isLoading:!0}),e.prev=1,e.next=4,N.a.get(z);case 4:a=e.sent,t.setState({books:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.setState({errorMsg:e.t0});case 11:return e.prev=11,setTimeout((()=>{t.setState({isLoading:!1})}),300),setTimeout((()=>{t.setState({errorMsg:void 0})}),3e3),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[1,8,11,15]])}))),this.onCloseDetailDialog=()=>{this.setState({currentBook:void 0})},this.fetchBookDetail=function(){var e=Object(d.a)(m.a.mark((function e(a,n=!0){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n&&t.setState({isLoading:!0}),e.next=4,N.a.get("".concat(z).concat(a,"/"));case 4:return r=e.sent,t.setState({currentBook:r.data}),e.abrupt("return",r.data);case 9:e.prev=9,e.t0=e.catch(0),t.setState({errorMsg:e.t0});case 12:return e.prev=12,setTimeout((()=>{t.setState({isLoading:!1})}),300),setTimeout((()=>{t.setState({errorMsg:void 0})}),3e3),e.finish(12);case 16:return e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[0,9,12,16]])})));return function(t){return e.apply(this,arguments)}}(),this.deleteDocument=function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("".concat(B).concat(a,"/"));case 3:if(e.sent,!t.state.currentBook){e.next=7;break}return e.next=7,t.fetchBookDetail(t.state.currentBook.id,!1);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.setState({errorMsg:e.t0});case 12:return e.prev=12,setTimeout((()=>{t.setState({errorMsg:void 0})}),3e3),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),this.moveDocumentTo=function(){var e=Object(d.a)(m.a.mark((function e(a,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.patch("".concat(B).concat(a.id,"/"),{collection:n.id});case 3:if(e.sent,!t.state.currentBook){e.next=7;break}return e.next=7,t.fetchBookDetail(null===(r=t.state.currentBook)||void 0===r?void 0:r.id,!1);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.setState({errorMsg:e.t0});case 12:return e.prev=12,setTimeout((()=>{t.setState({errorMsg:void 0})}),3e3),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t,a){return e.apply(this,arguments)}}(),this.createDocument=function(){var e=Object(d.a)(m.a.mark((function e(a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("".concat(B,"/"),{collection:n.id,name:a,show_in_folder:!1});case 3:if(e.sent,!t.state.currentBook){e.next=7;break}return e.next=7,t.fetchBookDetail(t.state.currentBook.id,!1);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.setState({errorMsg:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),this.addNewBook=function(){var e=Object(d.a)(m.a.mark((function e(a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("".concat(z),{name:a,description:n});case 3:return e.sent,e.next=6,t.fetch();case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.setState({errorMsg:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),this.updateBook=function(){var e=Object(d.a)(m.a.mark((function e(a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.state.currentBook){e.next=7;break}return e.next=4,N.a.patch("".concat(z).concat(t.state.currentBook.id,"/"),{name:a,description:n});case 4:return e.sent,e.next=7,t.fetchBookDetail(t.state.currentBook.id,!1);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t.setState({errorMsg:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),this.deleteBook=function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.delete("".concat(z,"/").concat(a.id,"/"));case 3:return e.sent,e.next=6,t.fetch();case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.setState({errorMsg:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),this.state={nas:new P,isLoading:!1,books:[],deleteBook:this.deleteBook,addNewBook:this.addNewBook,updateBook:this.updateBook,createDocument:this.createDocument,moveDocumentTo:this.moveDocumentTo,deleteDocument:this.deleteDocument,fetchBookDetail:this.fetchBookDetail,onCloseDetailDialog:this.onCloseDetailDialog}}componentDidMount(){var e=this;return Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetch();case 2:case"end":return t.stop()}}),t)})))()}render(){return r.a.createElement(Ya.Provider,{value:this.state},this.props.children)}}const Ga={},Ya=r.a.createContext(Ga);var Ja=a(1863),Ka=a(1924),Va=a(1913);function Qa(e){const t=e.open,a=e.onClose,n=e.currentDoc,c=r.a.useContext(Ya).books,o=r.a.useState(null===n||void 0===n?void 0:n.collection),i=Object(l.a)(o,2),s=i[0],u=i[1];console.log(n);const p=r.a.useState(!1),f=Object(l.a)(p,2),h=f[0],v=f[1];return r.a.createElement(F.a,{open:t,fullWidth:!0},r.a.createElement(Q.a,null,"Move Document to Collection "),r.a.createElement(X.a,null,r.a.createElement(O.a,{in:h,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(re.a,null)),r.a.createElement(Ja.a,{fullWidth:!0},r.a.createElement(Ka.a,null,"Book Collections"),r.a.createElement(Va.a,{value:s,onChange:e=>{u(e.target.value)}},c.map(((e,t)=>r.a.createElement(S.a,{key:"book-selection-".concat(t),value:e.id},e.name)))))),r.a.createElement($.a,null,r.a.createElement(ee.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,a();case 3:v(!1);case 4:case"end":return e.stop()}}),e)})))},"Close"),r.a.createElement(ee.a,{onClick:Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),!s){e.next=6;break}if(!((t=c.filter((e=>e.id===s))).length>0)){e.next=6;break}return e.next=6,a(t[0]);case 6:v(!1);case 7:case"end":return e.stop()}}),e)})))},"OK")))}function Xa(e){const t=e.open,a=e.onClose,n=r.a.useContext(Ya),c=(n.books,n.currentBook),o=r.a.useState(null===c||void 0===c?void 0:c.name),i=Object(l.a)(o,2),s=i[0],u=i[1],p=r.a.useState(null===c||void 0===c?void 0:c.description),f=Object(l.a)(p,2),h=f[0],v=f[1],E=r.a.useState(!1),g=Object(l.a)(E,2),b=g[0],x=g[1];return r.a.createElement(F.a,{open:t,fullWidth:!0},r.a.createElement(Q.a,null,"Update collection info "),r.a.createElement(X.a,null,r.a.createElement(O.a,{in:b,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(re.a,null)),r.a.createElement(Z.a,{onChange:e=>u(e.target.value),value:s,label:"Name",title:"Name",fullWidth:!0}),r.a.createElement(Z.a,{value:h,label:"Description",title:"Description",fullWidth:!0,multiline:!0,onChange:e=>v(e.target.value),rows:4})),r.a.createElement($.a,null,r.a.createElement(ee.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,a();case 3:x(!1);case 4:case"end":return e.stop()}}),e)})))},"Close"),r.a.createElement(ee.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,a(s,h);case 3:x(!1);case 4:case"end":return e.stop()}}),e)})))},"OK")))}const Za=Object(ft.a)((e=>Object(Zt.a)({root:{flexGrow:1},title:{flexGrow:1,display:"none",[e.breakpoints.up("sm")]:{display:"block"}}})));function $a(){var e;Za();const t=r.a.useContext(Ya),a=t.deleteDocument,n=t.moveDocumentTo,c=t.createDocument,o=t.updateBook,i=t.currentBook,s=(t.deleteBook,r.a.useState(!1)),u=Object(l.a)(s,2),p=u[0],f=u[1],h=r.a.useState(),v=Object(l.a)(h,2),x=v[0],w=v[1],k=r.a.useState(!1),j=Object(l.a)(k,2),S=j[0],F=j[1];return r.a.createElement("div",{style:{width:350}},r.a.createElement("div",{style:{marginLeft:20,marginTop:30,marginBottom:30}},r.a.createElement(ht.a,{variant:"h5"},null===i||void 0===i?void 0:i.name,r.a.createElement(y.a,{onClick:()=>{F(!0)}},r.a.createElement($e.a,null))),r.a.createElement(oe.a,null),r.a.createElement(ht.a,{variant:"subtitle2",style:{color:"#b5b5b5"}},null===i||void 0===i?void 0:i.description)),r.a.createElement(O.a,{mountOnEnter:!0,unmountOnExit:!0,in:p},r.a.createElement(re.a,null)),r.a.createElement(E.a,null,null===i||void 0===i||null===(e=i.documents)||void 0===e?void 0:e.map(((e,t)=>r.a.createElement(g.a,{button:!0,key:"document-".concat(t),onClick:()=>{window.location.href="#/document/"+e.id}},r.a.createElement(ce.a,null,r.a.createElement(_a.a,null)),r.a.createElement(b.a,{primary:r.a.createElement(ie.a,{title:e.name},r.a.createElement(ht.a,{style:{maxWidth:150},noWrap:!0},e.name))}),r.a.createElement(C.a,null,r.a.createElement(y.a,{onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Do you want to delete this document?")){t.next=6;break}return f(!0),t.next=5,a(e.id);case 5:setTimeout((()=>{f(!1)}),300);case 6:case"end":return t.stop()}}),t)})))},r.a.createElement(Re.a,null)),r.a.createElement(y.a,{onClick:()=>{w(e)}},r.a.createElement(Ua.a,null)))))),r.a.createElement(ee.a,{style:{width:"100%",padding:20},color:"primary",startIcon:r.a.createElement(Ha.a,null),onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=3;break}return e.next=3,c("unnamed document",i);case 3:case"end":return e.stop()}}),e)})))},"Add New Document")),x&&r.a.createElement(Qa,{open:Boolean(x),onClose:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(void 0),!t){e.next=4;break}return e.next=4,n(x,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),currentDoc:x}),i&&r.a.createElement(Xa,{open:S,onClose:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a){e.next=3;break}return e.next=3,o(t,a);case 3:F(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}))}const en=Object(pt.a)({palette:{secondary:{main:"#ffffff"},primary:{main:"#00b2ff"}}}),tn=Object(ft.a)((e=>({appbar:{height:"90px"},container:{paddingTop:"95px",height:"100%"},row:{paddingTop:0,paddingBottom:0},largeIcon:{width:40,height:40},menuIcon:{position:"fixed",top:100,left:30}})));function an(){var e;const t=Object(n.useContext)(wa),a=t.currentDocument,c=t.isLoading,o=t.errorMsg,s=Object(n.useContext)(Ya).fetchBookDetail,u=Object(n.useState)(!1),f=Object(l.a)(u,2),h=f[0],v=f[1],E=tn();return r.a.createElement(vt.a,{theme:en},r.a.createElement("div",null,r.a.createElement(kt.a,{elevation:0,className:E.appbar,color:"secondary"},r.a.createElement(We.a,null,r.a.createElement(ie.a,{title:"Back"},r.a.createElement(i.b,{to:"/home/".concat(null!==(e=null===a||void 0===a?void 0:a.parent)&&void 0!==e?e:"")},r.a.createElement(ut.a,{className:E.largeIcon,fontSize:"large",color:"primary"}))),r.a.createElement(p.a,{style:{marginLeft:10}},r.a.createElement(p.a.Row,{style:{padding:0}},r.a.createElement(Sa,null)),r.a.createElement(p.a.Row,{style:{paddingTop:0,paddingBottom:0}},r.a.createElement(Wa,null)),r.a.createElement(p.a.Row,{style:{padding:0}},a&&r.a.createElement(Ia,null))))),r.a.createElement(ka.a,{id:"container",className:E.container},r.a.createElement(ca.a,{style:{height:"90vh",maxHeight:"90%"},square:!0},a&&r.a.createElement(La,null))),r.a.createElement(ta.a,{open:h,onClose:()=>{v(!1)}},r.a.createElement($a,null)),r.a.createElement(O.a,{in:!1===(null===a||void 0===a?void 0:a.show_in_folder)},r.a.createElement(ie.a,{title:"Show Index"},r.a.createElement(ya.a,{className:E.menuIcon,onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return console.log(a),e.next=4,s(null===a||void 0===a?void 0:a.collection);case 4:v(!0);case 5:case"end":return e.stop()}}),e)})))},r.a.createElement(qt.a,null)))),r.a.createElement(Oa.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:void 0!==o,message:o}),r.a.createElement(Ca.a,{open:c&&void 0===a,style:{zIndex:1,color:"#fff"}},r.a.createElement(aa.a,{color:"inherit"}))))}var nn=a(403),rn=a(851),cn=a.n(rn);class on extends n.Component{constructor(e){var t;super(e),t=this,this.getAlbumsByArtist=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("".concat(W,"album/?artist=").concat(a));case 3:n=e.sent,t.setState({artistDetail:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.setState({errorMsg:e.t0});case 10:return e.prev=10,setTimeout((()=>{t.setState({errorMsg:void 0,isLoading:!1})})),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),this.init=Object(d.a)(m.a.mark((function e(){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setState({isLoading:!0,errorMsg:"Loading Music Library"}),!(a=cn.a.parse(t.props.location.search)).artist){e.next=8;break}return e.next=5,t.filterBy("artist",a.artist);case 5:n=e.sent,e.next=18;break;case 8:if(!a.album){e.next=14;break}return e.next=11,t.filterBy("album",a.album);case 11:n=e.sent,e.next=18;break;case 14:return e.next=16,t.state.nas.fetchMusicList();case 16:n=e.sent,t.setState({filterField:void 0});case 18:t.setState({musicResponse:n}),setTimeout((()=>{t.setState({isLoading:!1})}),400),setTimeout((()=>{t.setState({errorMsg:void 0})}),3e3);case 21:case"end":return e.stop()}}),e)}))),this.setTabIndex=function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state.currentTabIndex,t.setState({currentTabIndex:a,isLoading:!0}),e.t0=a,e.next=1===e.t0?5:2===e.t0?10:3===e.t0?15:18;break;case 5:return e.next=7,N.a.get("".concat(W,"album/"));case 7:return r=e.sent,t.setState({albums:r.data,isLoading:!1}),e.abrupt("break",22);case 10:return e.next=12,N.a.get("".concat(W,"artist/"));case 12:return c=e.sent,t.setState({artists:c.data,isLoading:!1}),e.abrupt("break",22);case 15:return e.next=17,t.fetch("".concat(W,"?like=true/"));case 17:return e.abrupt("break",22);case 18:if(3!==n){e.next=21;break}return e.next=21,t.init();case 21:t.setState({isLoading:!1});case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.filterBy=function(){var e=Object(d.a)(m.a.mark((function e(a,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.setState({filterField:n}),e.next=4,N.a.get("".concat(W,"?").concat(a,"=").concat(n));case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(0),t.setState({errorMsg:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),this.updateMetadata=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({isLoading:!0,errorMsg:"Updating music metadata... This may take while"}),e.prev=1,e.next=4,N.a.patch("".concat(W));case 4:return e.next=6,N.a.get(W);case 6:a=e.sent,t.setState({musicResponse:a.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.setState({errorMsg:e.t0});case 13:return e.prev=13,t.setState({isLoading:!1}),setTimeout((()=>{t.setState({errorMsg:void 0})}),3e3),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[1,10,13,17]])}))),this.search=function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setState({isSearching:!0}),window.location.replace("#/music"),t.setState({isLoading:!0}),e.prev=3,""!==a){e.next=11;break}return e.next=7,t.state.nas.fetchMusicList();case 7:n=e.sent,t.setState({musicResponse:n,isLoading:!1,paginationURL:W}),e.next=18;break;case 11:return t.setState({errorMsg:"Searching "+a}),r="".concat(W,"?search=").concat(a),e.next=15,N.a.get(r);case 15:c=e.sent,t.setState({musicResponse:c.data,paginationURL:r,isLoading:!1,filterField:void 0}),setTimeout((()=>{t.setState({errorMsg:void 0})}),3e3);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),t.setState({errorMsg:e.t0});case 23:return e.prev=23,t.setState({isSearching:!1}),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[3,20,23,26]])})));return function(t){return e.apply(this,arguments)}}(),this.fetch=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.setState({isLoading:!0}),e.next=4,N.a.get(a);case 4:n=e.sent,t.setState({musicResponse:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.setState({errorMsg:e.t0});case 11:return e.prev=11,t.setState({isLoading:!1}),setTimeout((()=>{t.setState({errorMsg:void 0})}),1e3),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[0,8,11,15]])})));return function(t){return e.apply(this,arguments)}}(),this.presslike=function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a.music_metadata){e.next=7;break}return e.next=4,N.a.patch("".concat("/api/music-metadata/").concat(null===(n=a.music_metadata)||void 0===n?void 0:n.id,"/"),{like:!(null===(r=a.music_metadata)||void 0===r?void 0:r.like)});case 4:e.sent,a.music_metadata.like=!a.music_metadata.like,t.setState({musicResponse:t.state.musicResponse});case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),t.setState({errorMsg:e.t0}),setTimeout((()=>{t.setState({errorMsg:void 0})}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),this.play=function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({currentMusic:a});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stop=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({currentTag:void 0,currentMusic:void 0});case 1:case"end":return e.stop()}}),e)}))),this.update=()=>{this.setState({nas:this.state.nas})},this.state={nas:new P,paginationURL:W,isLoading:!1,currentTabIndex:0,artistDetail:[],albums:[],artists:[],isSearching:!1,update:this.update,play:this.play,stop:this.stop,fetch:this.fetch,search:this.search,updateMetadata:this.updateMetadata,setTabIndex:this.setTabIndex,getAlbumsByArtist:this.getAlbumsByArtist,presslike:this.presslike}}componentDidUpdate(e){var t=this;return Object(d.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.props.location.search===e.location.search||t.state.isSearching){a.next=4;break}return console.log("update"),a.next=4,t.init();case 4:case"end":return a.stop()}}),a)})))()}componentDidMount(){var e=this;return Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("init"),t.next=3,e.init();case 3:case"end":return t.stop()}}),t)})))()}render(){return r.a.createElement(sn.Provider,{value:this.state},this.props.children)}}const ln={},sn=r.a.createContext(ln);var un=a(860),mn=a.n(un),dn=a(1909),pn=a(1902),fn=a(859),hn=a.n(fn),vn=a(404),En=a.n(vn);const gn=Object(ft.a)((e=>Object(Zt.a)({popper:{marginTop:10,marginRight:15,width:"40ch",maxHeight:400,overflow:"auto"},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object($t.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object($t.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}})));function bn(){const e=gn(),t=Object(n.useContext)(sn).search,a=Object(n.useState)(!1),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(""),u=Object(l.a)(s,2),p=u[0],f=u[1];return r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},o?r.a.createElement(aa.a,{size:20,color:"inherit"}):r.a.createElement(la.a,null)),r.a.createElement(na.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},value:p,inputProps:{"aria-label":"search"},onChange:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,f(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onKeyDown:function(){var e=Object(d.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"===a.key&&(i(!0),t(p),i(!1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement(y.a,{disabled:""===p,onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),f(""),e.next=4,t("");case 4:i(!1);case 5:case"end":return e.stop()}}),e)})))},r.a.createElement(En.a,null)))}var xn=a(852),wn=a.n(xn);const kn=e=>{const t=null===e||void 0===e?void 0:e.common.picture;let a;return t&&t.length>0&&(a=t[0].data.toString("base64"),a="data:image/jpeg;base64,"+a),a};function yn(){var e,t,a,n,c,o,l,i,s,u;const m=r.a.useContext(sn),d=m.currentMusic,p=m.currentTag;return r.a.createElement("div",{style:{marginTop:40}},r.a.createElement(O.a,{in:void 0===d,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(ht.a,{variant:"subtitle1"},"No Music Selected")),r.a.createElement(O.a,{in:void 0!==(null===d||void 0===d||null===(e=d.music_metadata)||void 0===e?void 0:e.picture),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(Ye.a,{style:{height:300,width:"100%",marginLeft:"auto",marginRight:"auto"},image:null!==(t=null===d||void 0===d||null===(a=d.music_metadata)||void 0===a?void 0:a.picture)&&void 0!==t?t:kn(p)})),r.a.createElement(O.a,{in:void 0!==d,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(ne.a,{style:{width:"100%",marginLeft:"auto",marginRight:"auto"}},r.a.createElement(ht.a,{component:"h5",variant:"h5"},decodeURIComponent(null!==(n=null===d||void 0===d||null===(c=d.music_metadata)||void 0===c?void 0:c.title)&&void 0!==n?n:K.basename(null!==(o=null===d||void 0===d?void 0:d.filename)&&void 0!==o?o:""))),r.a.createElement(ht.a,{variant:"subtitle1",color:"textSecondary"},decodeURIComponent(null!==(l=null===d||void 0===d||null===(i=d.music_metadata)||void 0===i?void 0:i.artist)&&void 0!==l?l:"")),r.a.createElement(ht.a,{variant:"subtitle1",color:"textSecondary"},decodeURIComponent(null!==(s=null===d||void 0===d||null===(u=d.music_metadata)||void 0===u?void 0:u.album)&&void 0!==s?s:"")),d&&r.a.createElement("audio",{controls:!0,loop:!0,crossOrigin:"anonymous",autoPlay:!0,src:null===d||void 0===d?void 0:d.file,id:"music"}),d&&r.a.createElement(wn.a,{id:"audio-canvas",height:200,width:300,meterWidth:6,audioId:"music"}))))}var On=a(1900),Cn=a(1817),jn=a(1927),Sn=a(406),Fn=a.n(Sn),Dn=a(407),Mn=a.n(Dn),In=a(853),Nn=a.n(In),Tn=a(405),Ln=a.n(Tn),Bn=a(856),Rn=a.n(Bn),Wn=a(857),zn=a.n(Wn),_n=a(855),Pn=a.n(_n),Un=a(854),An=a.n(Un);const Hn=e=>{const t=null===e||void 0===e?void 0:e.common.picture;let a;return t&&t.length>0&&(a=t[0].data.toString("base64"),a="data:image/jpeg;base64,"+a),a},qn=r.a.forwardRef((function(e,t){return r.a.createElement(Cn.a,Object.assign({direction:"up",ref:t},e))}));function Gn(){var e,t,a,n,c,o,i,s,u,m,d,p,f,h;const v=r.a.useContext(sn),E=v.currentMusic,g=v.currentTag,b=v.stop,x=r.a.useState(!1),w=Object(l.a)(x,2),k=w[0],O=w[1],C=r.a.useState(),j=Object(l.a)(C,2),S=j[0],D=j[1],M=r.a.useState(),I=Object(l.a)(M,2),N=I[0],T=I[1],L=r.a.useState(.5),B=Object(l.a)(L,2),R=B[0],W=B[1],z=r.a.useState(!1),_=Object(l.a)(z,2),P=_[0],U=_[1],A=r.a.useState("playing"),H=Object(l.a)(A,2),G=H[0],Y=H[1];let J=r.a.useRef(null);return r.a.createElement("div",{style:{margin:10}},r.a.createElement(ae.a,null,r.a.createElement(Xe.a,{style:{marginLeft:10,marginRight:10},container:!0,alignItems:"center"},r.a.createElement(Xe.a,{item:!0,xs:3},E?r.a.createElement(Ye.a,{style:{height:70,width:70},image:null!==(e=null===E||void 0===E||null===(t=E.music_metadata)||void 0===t?void 0:t.picture)&&void 0!==e?e:Hn(g)}):r.a.createElement(On.a,{width:70,height:70})),r.a.createElement(Xe.a,{item:!0,xs:7},E&&r.a.createElement("audio",{onVolumeChange:()=>{var e;W(null===(e=J.current)||void 0===e?void 0:e.volume)},onCanPlay:()=>{var e,t;D(null===(e=J.current)||void 0===e?void 0:e.currentTime),T(null===(t=J.current)||void 0===t?void 0:t.duration),J.current&&(J.current.volume=null!==R&&void 0!==R?R:.5,W(R),J.current.loop=P)},crossOrigin:"anonymous",onTimeUpdate:e=>{var t,a;D(null===(t=J.current)||void 0===t?void 0:t.currentTime),T(null===(a=J.current)||void 0===a?void 0:a.duration)},autoPlay:!0,src:null===E||void 0===E?void 0:E.file,ref:J}),r.a.createElement(le.a,{onClick:()=>{O(!0)}},void 0===E&&r.a.createElement(ht.a,{component:"div"},"No Music Playing"),r.a.createElement(ht.a,{noWrap:!0},decodeURIComponent(null!==(a=null===E||void 0===E||null===(n=E.music_metadata)||void 0===n?void 0:n.title)&&void 0!==a?a:K.basename(null!==(c=null===E||void 0===E?void 0:E.filename)&&void 0!==c?c:""))))),r.a.createElement(Xe.a,{item:!0,xs:2},E&&r.a.createElement(y.a,{onClick:e=>b(),size:"medium"},r.a.createElement(Ln.a,null))))),r.a.createElement(F.a,{open:k,fullScreen:!0,TransitionComponent:qn},r.a.createElement(We.a,null,r.a.createElement(y.a,{onClick:()=>O(!1)},r.a.createElement(Fn.a,null))),r.a.createElement(X.a,null,r.a.createElement("div",null,E?r.a.createElement(Ye.a,{style:{height:300,width:"100%"},image:null!==(o=null===E||void 0===E||null===(i=E.music_metadata)||void 0===i?void 0:i.picture)&&void 0!==o?o:Hn(g)}):r.a.createElement(On.a,{width:"100%",height:300})),r.a.createElement("div",null,r.a.createElement(ht.a,{component:"h5",variant:"h5",noWrap:!0},decodeURIComponent(null!==(s=null===E||void 0===E||null===(u=E.music_metadata)||void 0===u?void 0:u.title)&&void 0!==s?s:K.basename(null!==(m=null===E||void 0===E?void 0:E.filename)&&void 0!==m?m:""))),r.a.createElement(ht.a,{variant:"subtitle1",color:"textSecondary"},decodeURIComponent(null!==(d=null===E||void 0===E||null===(p=E.music_metadata)||void 0===p?void 0:p.artist)&&void 0!==d?d:"")),r.a.createElement(ht.a,{variant:"subtitle1",color:"textSecondary"},decodeURIComponent(null!==(f=null===E||void 0===E||null===(h=E.music_metadata)||void 0===h?void 0:h.album)&&void 0!==f?f:""))),r.a.createElement("div",null,r.a.createElement(Xe.a,{container:!0,spacing:2},r.a.createElement(Xe.a,{item:!0,xs:!0},r.a.createElement(jn.a,{value:S,max:N,onChange:(e,t)=>{J.current&&(J.current.currentTime=t)},"aria-labelledby":"continuous-slider"}))),r.a.createElement(Xe.a,{justify:"space-between",container:!0},r.a.createElement(Xe.a,{item:!0},S&&q.utc(1e3*S).format("mm:ss")),r.a.createElement(Xe.a,{item:!0},N&&q.utc(1e3*N).format("mm:ss"))),r.a.createElement(Xe.a,{item:!0,style:{textAlign:"center"}},r.a.createElement(y.a,{disabled:void 0===E,size:"medium",onClick:()=>{var e,t;E&&J&&J.current&&("playing"===G?(Y("pause"),null===(e=J.current)||void 0===e||e.pause()):(Y("playing"),null===(t=J.current)||void 0===t||t.play()))}},"playing"===G?r.a.createElement(Nn.a,{style:{fontSize:40}}):r.a.createElement(Mn.a,{style:{fontSize:40}})))),r.a.createElement(Xe.a,{container:!0,justify:"center"},r.a.createElement(y.a,{onClick:()=>{J.current&&(P?(U(!1),J.current.loop=!1):(U(!0),J.current.loop=!0))}},P?r.a.createElement(An.a,null):r.a.createElement(Pn.a,null))),r.a.createElement(Xe.a,{container:!0,spacing:2},r.a.createElement(Xe.a,{item:!0},r.a.createElement(Rn.a,null)),r.a.createElement(Xe.a,{item:!0,xs:!0},r.a.createElement(jn.a,{value:R&&100*R,min:0,max:100,onChange:(e,t)=>{J.current&&(J.current.volume=t/100)},"aria-labelledby":"continuous-slider"})),r.a.createElement(Xe.a,{item:!0},r.a.createElement(zn.a,null))))))}var Yn=a(1901),Jn=a(1928),Kn=a(1911),Vn=a(408),Qn=a.n(Vn);function Xn(){var e,t;const a=r.a.useContext(sn),n=a.musicResponse,c=a.play,o=a.currentMusic,s=a.stop,u=a.fetch,p=a.paginationURL,f=a.presslike,h=r.a.useState(window.innerWidth),v=Object(l.a)(h,2),E=(v[0],v[1],r.a.useState(window.innerHeight)),g=Object(l.a)(E,2),b=g[0],x=(g[1],(e,t)=>(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id));return r.a.createElement(ze.a,{component:ca.a,style:{marginTop:"40px",marginLeft:30,maxHeight:b-180,width:"100%"}},r.a.createElement(_e.a,{stickyHeader:!0},r.a.createElement(Pe.a,null,r.a.createElement(Ue.a,null,r.a.createElement(Ae.a,null,"Name"),r.a.createElement(Ae.a,null,"Artist"),r.a.createElement(Ae.a,null,"Duration"),r.a.createElement(Ae.a,null,"Actions"))),r.a.createElement(Yn.a,null,n&&n.results.map(((e,t)=>{var a,n,l,u,p,h,v,E,g,b,w;return r.a.createElement(Ue.a,{selected:x(o,e),key:"music-".concat(t)},r.a.createElement(Ae.a,{style:{maxWidth:200}},r.a.createElement(Xe.a,{container:!0},r.a.createElement(Xe.a,{item:!0,xs:3},r.a.createElement(y.a,{onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:case"end":return t.stop()}}),t)})))},r.a.createElement(Qn.a,{style:{color:(null===(a=e.music_metadata)||void 0===a?void 0:a.like)?"pink":void 0}}))),r.a.createElement(Xe.a,{item:!0,xs:9},r.a.createElement(ht.a,{noWrap:!0},null!==(n=null===(l=e.music_metadata)||void 0===l?void 0:l.title)&&void 0!==n?n:K.basename(e.filename)),r.a.createElement(i.b,{to:void 0!==(null===(u=e.music_metadata)||void 0===u?void 0:u.album)?"/music?album=".concat(null===(p=e.music_metadata)||void 0===p?void 0:p.album):"/music"},r.a.createElement(ht.a,{variant:"subtitle1",noWrap:!0},null===(h=e.music_metadata)||void 0===h?void 0:h.album))))),r.a.createElement(Ae.a,{style:{maxWidth:100}},r.a.createElement(i.b,{to:void 0!==(null===(v=e.music_metadata)||void 0===v?void 0:v.artist)?"/music?artist=".concat(null===(E=e.music_metadata)||void 0===E?void 0:E.artist):"/music"},r.a.createElement(ht.a,{variant:"subtitle1",noWrap:!0},null===(g=e.music_metadata)||void 0===g?void 0:g.artist))),r.a.createElement(Ae.a,null,(null===e||void 0===e||null===(b=e.music_metadata)||void 0===b?void 0:b.duration)&&G.a.utc(1e3*(null===e||void 0===e||null===(w=e.music_metadata)||void 0===w?void 0:w.duration)).format("mm:ss")),r.a.createElement(Ae.a,null,r.a.createElement(y.a,{onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x(o,e)){t.next=4;break}s(),t.next=6;break;case 4:return t.next=6,c(e);case 6:case"end":return t.stop()}}),t)})))},x(o,e)?r.a.createElement(Ln.a,null):r.a.createElement(Mn.a,null))))}))),r.a.createElement(Jn.a,null,r.a.createElement(Ue.a,null,r.a.createElement(Kn.a,{size:"medium",style:{marginBottom:10,marginTop:10},page:null!==(e=null===n||void 0===n?void 0:n.current_page)&&void 0!==e?e:0,count:null!==(t=null===n||void 0===n?void 0:n.total_pages)&&void 0!==t?t:0,onChange:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p!==W){e.next=5;break}return e.next=3,u("".concat(W,"?page=").concat(a));case 3:e.next=7;break;case 5:return e.next=7,u("".concat(p,"&page=").concat(a));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})))))}var Zn=a(264),$n=a.n(Zn);function er(){var e,t;const a=r.a.useContext(sn),n=a.musicResponse,c=a.play,o=a.currentMusic,i=(a.stop,a.fetch),s=a.paginationURL,u=a.presslike,p=r.a.useState(window.innerWidth),f=Object(l.a)(p,2),h=(f[0],f[1],r.a.useState(window.innerHeight)),v=Object(l.a)(h,2),x=(v[0],v[1],(e,t)=>(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id));return r.a.createElement("div",{style:{marginTop:10}},r.a.createElement(E.a,{style:{backgroundColor:"white",overflowY:"auto"}},n&&n.results.map(((e,t)=>{var a,n,l,i,s;return r.a.createElement("div",{key:"music-".concat(t)},r.a.createElement(g.a,{button:!0,selected:x(o,e),onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x(o,e)){t.next=3;break}t.next=5;break;case 3:return t.next=5,c(e);case 5:case"end":return t.stop()}}),t)}))),style:{height:80}},r.a.createElement(ce.a,null,r.a.createElement($n.a,{height:40},r.a.createElement(Ye.a,{style:{height:40,width:40},image:null===(a=e.music_metadata)||void 0===a?void 0:a.picture}))),r.a.createElement(b.a,{primary:r.a.createElement(ht.a,{noWrap:!0},null!==(n=null===(l=e.music_metadata)||void 0===l?void 0:l.title)&&void 0!==n?n:K.basename(e.filename)),secondary:r.a.createElement(ht.a,{noWrap:!0},null===(i=e.music_metadata)||void 0===i?void 0:i.album)}),r.a.createElement(C.a,null,r.a.createElement(y.a,{onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e);case 2:case"end":return t.stop()}}),t)})))},r.a.createElement(Qn.a,{style:{color:(null===(s=e.music_metadata)||void 0===s?void 0:s.like)?"pink":void 0}})))),r.a.createElement(oe.a,{style:{color:"black",marginLeft:50}}))}))),r.a.createElement(Kn.a,{size:"medium",style:{marginBottom:10,marginTop:10,height:140},page:null!==(e=null===n||void 0===n?void 0:n.current_page)&&void 0!==e?e:0,count:null!==(t=null===n||void 0===n?void 0:n.total_pages)&&void 0!==t?t:0,onChange:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s!==W){e.next=5;break}return e.next=3,i("".concat(W,"?page=").concat(a));case 3:e.next=7;break;case 5:return e.next=7,i("".concat(s,"&page=").concat(a));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}))}function tr(){return r.a.createElement("div",null,r.a.createElement(ea.a,{xsDown:!0,implementation:"js"},r.a.createElement(da.a,null,r.a.createElement(Xe.a,{container:!0,style:{margin:10}},r.a.createElement(Xe.a,{item:!0,sm:4},r.a.createElement(yn,null)),r.a.createElement(Xe.a,{item:!0,sm:8},r.a.createElement(Xn,null))))),r.a.createElement(ea.a,{mdUp:!0,implementation:"js"},r.a.createElement(da.a,{fluid:!0},r.a.createElement(er,null)),r.a.createElement("div",{style:{position:"fixed",bottom:0,width:"100%"}},r.a.createElement(Gn,null))))}function ar(){const e=r.a.useContext(sn),t=e.albums,a=e.setTabIndex;return r.a.createElement(ka.a,null,r.a.createElement(Xe.a,{container:!0,spacing:2},t.map(((e,t)=>r.a.createElement(Xe.a,{item:!0,xs:6,md:4,lg:3,key:"album-".concat(t)},r.a.createElement(ae.a,null,r.a.createElement(Je.a,{style:{height:300},onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.location.replace("#music/?album="+e.album),a(0);case 2:case"end":return t.stop()}}),t)})))},t<5?r.a.createElement(Ye.a,{style:{height:200,width:"100%"},image:e.picture}):r.a.createElement($n.a,{height:200,offset:120},r.a.createElement(Ye.a,{style:{height:200,width:"100%"},image:e.picture})),r.a.createElement(ne.a,null,r.a.createElement(ht.a,null,e.album)))))))))}var nr=a(858),rr=a.n(nr);function cr(){const e=r.a.useContext(sn),t=e.artists,a=e.setTabIndex,n=e.getAlbumsByArtist,c=e.artistDetail,o=r.a.useState(!1),i=Object(l.a)(o,2),s=i[0],u=i[1];return r.a.createElement(da.a,null,r.a.createElement(ca.a,null,r.a.createElement(E.a,null,t.map(((e,t)=>r.a.createElement("div",{key:"artist-".concat(t)},r.a.createElement(g.a,{onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(e.artist);case 2:u(!0);case 3:case"end":return t.stop()}}),t)}))),button:!0,key:"artist-".concat(t),style:{height:50}},r.a.createElement(x.a,null,r.a.createElement(rr.a,null)),r.a.createElement(b.a,{primary:e.artist})),r.a.createElement(oe.a,null)))))),r.a.createElement(F.a,{open:s,fullWidth:!0,scroll:"paper",onClose:()=>u(!1)},r.a.createElement(Q.a,null,c.length>0&&c[0].artist),r.a.createElement(X.a,null,r.a.createElement(Xe.a,{container:!0,spacing:2},c.map(((e,t)=>r.a.createElement(Xe.a,{item:!0,key:"artist-detail-".concat(t),xs:6},r.a.createElement(ae.a,{elevation:0},r.a.createElement(Je.a,{onClick:()=>{u(!1),window.location.replace("#music/?album="+e.album),a(0)}},r.a.createElement(Ye.a,{style:{height:250},image:e.picture}),r.a.createElement(Le.a,null,r.a.createElement(ht.a,null,e.album)))))))))))}const or=Object(pt.a)({palette:{primary:hn.a}}),lr=Object(ft.a)((e=>Object(Zt.a)({root1:{paddingTop:80},root:{paddingTop:120,height:"100%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,display:"none",[e.breakpoints.up("sm")]:{display:"block"}}})));function ir(){const e=r.a.useContext(sn),t=e.isLoading,a=e.errorMsg,c=e.updateMetadata,o=e.filterField,s=e.currentTabIndex,u=e.setTabIndex,p=Object(n.useState)(!1),f=Object(l.a)(p,2),h=(f[0],f[1],lr());return r.a.createElement(vt.a,{theme:or},r.a.createElement("div",{style:{maxHeight:"100%"}},r.a.createElement(kt.a,null,r.a.createElement(We.a,null,r.a.createElement(i.b,{to:"/"},r.a.createElement(y.a,null,r.a.createElement(k.a,null))),r.a.createElement(ht.a,{className:h.title,variant:"h6",noWrap:!0},null!==o&&void 0!==o?o:"Music",o&&r.a.createElement(ie.a,{title:"Clear field"},r.a.createElement(i.b,{to:"/music"},r.a.createElement(y.a,null,r.a.createElement(En.a,null))))),r.a.createElement(ie.a,{title:"Update metadata"},r.a.createElement(y.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:case"end":return e.stop()}}),e)})))},r.a.createElement(mn.a,null))),r.a.createElement(bn,null)),r.a.createElement(dn.a,{value:s,variant:"scrollable",onChange:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),"aria-label":"simple tabs example"},r.a.createElement(pn.a,{label:"Music",value:0}),r.a.createElement(pn.a,{label:"Album",value:1}),r.a.createElement(pn.a,{label:"Artist",value:2}),r.a.createElement(pn.a,{label:"Playlist",value:3}))),r.a.createElement(Ca.a,{className:h.backdrop,open:t},r.a.createElement(aa.a,{color:"inherit"})),r.a.createElement(O.a,{in:0===s,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:h.root1,style:{overflow:"hidden"}},r.a.createElement(tr,null))),r.a.createElement(O.a,{in:1===s,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:h.root},r.a.createElement(ar,null))),r.a.createElement(O.a,{in:2===s,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:h.root},r.a.createElement(cr,null))),r.a.createElement(O.a,{in:3===s,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:h.root1,style:{overflow:"hidden"}},r.a.createElement(tr,null))),r.a.createElement(Oa.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:void 0!==a,message:"".concat(a)})))}var sr=a(862),ur=a.n(sr);const mr=Object(ft.a)((e=>Object(Zt.a)({root:{flexGrow:1},title:{flexGrow:1,display:"none",[e.breakpoints.up("sm")]:{display:"block"}}})));function dr(e){var t;const a=e.book,n=e.open,c=e.onClose,o=mr(),i=r.a.useContext(Ya),s=i.deleteDocument,u=i.moveDocumentTo,p=i.createDocument,f=i.updateBook,h=i.currentBook,v=i.deleteBook,x=r.a.useState(!1),w=Object(l.a)(x,2),k=w[0],j=w[1],S=r.a.useState(),D=Object(l.a)(S,2),M=D[0],I=D[1],N=r.a.useState(!1),T=Object(l.a)(N,2),L=T[0],B=T[1];return r.a.createElement(F.a,{open:n,fullScreen:!0},r.a.createElement(We.a,null,r.a.createElement(y.a,{edge:"start",onClick:()=>{c()}},r.a.createElement(Fn.a,null)),r.a.createElement(ht.a,{variant:"h6",component:"div",className:o.title},a.name),r.a.createElement(ie.a,{title:"Edit Document"},r.a.createElement(y.a,{edge:"end",onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h&&B(!0);case 1:case"end":return e.stop()}}),e)})))},r.a.createElement($e.a,null))),r.a.createElement(ie.a,{title:"Delete Document"},r.a.createElement(y.a,{edge:"end",onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete this book?")){e.next=5;break}return c(),e.next=5,v(a);case 5:case"end":return e.stop()}}),e)})))},r.a.createElement(Re.a,null))),r.a.createElement(ie.a,{title:"Add Document"},r.a.createElement(y.a,{edge:"end",onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=5;break}return j(!0),e.next=4,p("unnamed document",h);case 4:setTimeout((()=>{j(!1)}),300);case 5:case"end":return e.stop()}}),e)})))},r.a.createElement(Ha.a,null)))),r.a.createElement(X.a,null,r.a.createElement(da.a,null,r.a.createElement(O.a,{mountOnEnter:!0,unmountOnExit:!0,in:k},r.a.createElement(re.a,null)),r.a.createElement(ht.a,{variant:"subtitle1"},null===h||void 0===h?void 0:h.description),r.a.createElement(E.a,null,null===(t=a.documents)||void 0===t?void 0:t.map(((e,t)=>r.a.createElement(g.a,{button:!0,key:"document-".concat(t),onClick:()=>{window.location.href="#/document/"+e.id}},r.a.createElement(ce.a,null,r.a.createElement(_a.a,null)),r.a.createElement(b.a,{primary:e.name}),r.a.createElement(C.a,null,r.a.createElement(y.a,{onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Do you want to delete this document?")){t.next=6;break}return j(!0),t.next=5,s(e.id);case 5:setTimeout((()=>{j(!1)}),300);case 6:case"end":return t.stop()}}),t)})))},r.a.createElement(Re.a,null)),r.a.createElement(y.a,{onClick:()=>{I(e)}},r.a.createElement(Ua.a,null))))))))),M&&r.a.createElement(Qa,{open:Boolean(M),onClose:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(void 0),!t){e.next=4;break}return e.next=4,u(M,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),currentDoc:M}),h&&r.a.createElement(Xa,{open:L,onClose:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a){e.next=3;break}return e.next=3,f(t,a);case 3:B(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}))}var pr=a(861),fr=a.n(pr);function hr(){const e=r.a.useContext(Ya),t=e.books,a=e.fetchBookDetail,n=e.isLoading,c=e.currentBook,o=e.addNewBook,i=e.onCloseDetailDialog,s=r.a.useState(!1),u=Object(l.a)(s,2),p=u[0],f=u[1];return r.a.createElement(Xe.a,{container:!0,spacing:3,alignItems:"center",justify:"center"},t.map(((e,t)=>r.a.createElement(Xe.a,{item:!0,key:"book-".concat(t),xs:6,sm:4,md:2},r.a.createElement(ae.a,{style:{height:200,alignContent:"center",alignItems:"center",justifyItems:"center"}},r.a.createElement(Je.a,{style:{height:"100%"},onClick:Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e.id);case 2:case"end":return t.stop()}}),t)})))},r.a.createElement(ne.a,null,r.a.createElement(ht.a,{align:"center"},e.name))))))),r.a.createElement(Xe.a,{item:!0,xs:6,sm:4,md:2},r.a.createElement(ae.a,{style:{height:200,alignContent:"center",alignItems:"center",justifyItems:"center"}},r.a.createElement(ie.a,{title:"Add Book"},r.a.createElement(Je.a,{style:{height:"100%"},onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(!0);case 1:case"end":return e.stop()}}),e)})))},r.a.createElement(ne.a,null,r.a.createElement(fr.a,{fontSize:"large",style:{display:"block",marginLeft:"auto",marginRight:"auto"}})))))),c&&r.a.createElement(dr,{open:void 0!==c&&!n,book:c,onClose:()=>{i()}}),p&&r.a.createElement(Xa,{open:p,onClose:function(){var e=Object(d.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a){e.next=3;break}return e.next=3,o(t,a);case 3:f(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}))}const vr=Object(ft.a)((e=>Object(Zt.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})));function Er(){const e=vr(),t=r.a.useContext(Ya),a=t.isLoading,n=t.errorMsg;return r.a.createElement("div",null,r.a.createElement(kt.a,{position:"static"},r.a.createElement(We.a,null,r.a.createElement(i.b,{to:"/"},r.a.createElement(y.a,{edge:"start",style:{color:"white"},"aria-label":"menu"},r.a.createElement(ur.a,null))),r.a.createElement(ht.a,{variant:"h6"},"Books"))),r.a.createElement(ka.a,{style:{marginTop:10}},r.a.createElement(hr,null)),r.a.createElement(Oa.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:void 0!==n,message:n}),r.a.createElement(Ca.a,{className:e.backdrop,open:a},r.a.createElement(aa.a,{color:"inherit"})))}class gr extends n.Component{constructor(e){var t;super(e),t=this,this.onImageClick=e=>{e?this.setState({openDialog:!0,selectedImage:e}):this.setState({openDialog:!1,selectedImage:void 0})},this.refresh=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.setState({isLoading:!0}),e.next=4,N.a.patch(_+"2/");case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Error: "+e.t0);case 10:return e.prev=10,t.setState({isLoading:!1}),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])}))),this.fetchImages=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({isLoading:!0}),e.prev=1,e.next=4,N.a.get(_);case 4:a=e.sent,t.setState({files:a.data.results,nextURL:a.data.next}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:return e.prev=11,t.setState({isLoading:!1}),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),this.fetchMore=Object(d.a)(m.a.mark((function e(){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.state.files,t.setState({isLoading:!0}),!t.state.nextURL){e.next=10;break}return t.setState({isLoading:!0}),e.next=7,N.a.get(t.state.nextURL);case 7:(n=e.sent).data.results.forEach((e=>a.push(e))),t.setState({files:a,nextURL:n.data.next});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:return e.prev=15,t.setState({isLoading:!1}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])}))),this.state={isLoading:!1,files:[],openDialog:!1,fetchImages:this.fetchImages,fetchMore:this.fetchMore,refresh:this.refresh,onImageClick:this.onImageClick}}render(){return r.a.createElement(xr.Provider,{value:this.state},this.props.children)}}const br={},xr=r.a.createContext(br);var wr=a(1906);const kr=Object(ft.a)((e=>Object(Zt.a)({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",marginLeft:20,marginRight:20},gridList:{width:"100%",height:"100%"}})));function yr(e){return e%7===0?12:6}function Or(e){return e%5===0?6:3}function Cr(){const e=r.a.useContext(xr),t=e.files,a=e.fetchMore,n=e.nextURL,c=e.onImageClick,o=kr(),i=r.a.useState(!1),s=Object(l.a)(i,2);s[0],s[1];return r.a.createElement("div",{className:o.root},r.a.createElement(Xe.a,{container:!0},t.map(((e,t)=>{var a,n;return r.a.createElement(Xe.a,{key:e.id,item:!0,md:Or(t),xs:yr(t),style:{padding:2,cursor:"grab",position:"relative"},onClick:()=>c(e)},r.a.createElement($n.a,{once:!0,height:350,throttle:200,offset:100},r.a.createElement(Ye.a,{image:e.file,style:{height:350,width:"100%"}}),r.a.createElement("div",{style:{backgroundColor:"black",position:"absolute",left:0,bottom:0,margin:2}},r.a.createElement(ht.a,{variant:"h6",style:{color:"white"}},e.filename),r.a.createElement(ht.a,{variant:"h6",style:{color:"white"}},null===(a=e.image_metadata)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.datetime))))})),r.a.createElement(Xe.a,{item:!0,xs:12},n&&r.a.createElement(ee.a,{onClick:a,style:{marginLeft:"auto",marginRight:"auto"}},"Load More"))))}a(1313);var jr=e=>{const t=e.color,a=e.name;e.id;return r.a.createElement("div",null,r.a.createElement("div",{className:"pin bounce",style:{backgroundColor:t,cursor:"pointer"},title:a}),r.a.createElement("div",{className:"pulse"}))},Sr=a(863),Fr=a.n(Sr);const Dr=Object(ft.a)((e=>Object(Zt.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})));function Mr(e){if(3===(null===e||void 0===e?void 0:e.length))return e[0]+e[1]/60+e[2]/3600}function Ir(e){var t,a;return e?{lat:("N"===e.data.gps_latitude_ref?1:-1)*(null!==(t=Mr(e.data.gps_latitude))&&void 0!==t?t:59.95),lng:("E"===e.data.gps_longitude_ref?1:-1)*(null!==(a=Mr(e.data.gps_longitude))&&void 0!==a?a:30.33)}:{lat:59.95,lng:30.33}}function Nr(){var e;const t=Dr(),a=r.a.useContext(xr),n=a.fetchImages,c=a.refresh,o=a.isLoading,l=a.selectedImage,s=a.openDialog,u=a.onImageClick;return r.a.useEffect((()=>{n().then((()=>{}))}),[]),r.a.createElement("div",null,r.a.createElement(kt.a,null,r.a.createElement(We.a,null,r.a.createElement(i.b,{to:"/"},r.a.createElement(y.a,null,r.a.createElement(k.a,null))),r.a.createElement(ht.a,{variant:"h6",className:t.title},"Gallery"),r.a.createElement(y.a,{onClick:Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to update all image's metadata?")){e.next=4;break}return e.next=4,c();case 4:case"end":return e.stop()}}),e)})))},r.a.createElement(Vt.a,null)))),r.a.createElement(wr.a,{pt:10},r.a.createElement(Cr,null)),r.a.createElement(F.a,{open:s,fullWidth:!0},r.a.createElement(Q.a,null,null===l||void 0===l?void 0:l.filename),r.a.createElement(X.a,null,r.a.createElement(Ye.a,{image:null===l||void 0===l?void 0:l.file,style:{height:300,width:"100%"}}),r.a.createElement("div",{style:{height:400,width:"100%",marginTop:20}},(null===l||void 0===l?void 0:l.image_metadata)&&r.a.createElement(Fr.a,{defaultCenter:Ir(l.image_metadata),defaultZoom:11,bootstrapURLKeys:{key:null!==(e="AIzaSyAEoAfIJVWtfQHbImyN2KeJLadBPjHqJmM")?e:""}},r.a.createElement(jr,{lat:Ir(l.image_metadata).lat,lng:Ir(l.image_metadata).lng}))),r.a.createElement(E.a,null,(null===l||void 0===l?void 0:l.image_metadata)&&Object.entries(l.image_metadata.data).map((([e,t])=>r.a.createElement(g.a,{key:e},r.a.createElement(b.a,{primary:e,secondary:JSON.stringify(t)})))))),r.a.createElement($.a,null,r.a.createElement(ee.a,{onClick:()=>u(void 0)},"Close"))),r.a.createElement(Ca.a,{className:t.backdrop,open:o},r.a.createElement(aa.a,{color:"inherit"})))}var Tr=a(892);a(1333);const Lr=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn.fetchFromUrl(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();class Br extends r.a.Component{constructor(e){super(e),this.state={}}UNSAFE_componentWillMount(){var e=this;return Object(d.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.musicSrc,t.next=3,Lr(a);case 3:n=t.sent,e.setState({tag:n});case 5:case"end":return t.stop()}}),t)})))()}componentDidUpdate(e){var t=this;return Object(d.a)(m.a.mark((function a(){var n,r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.props.musicSrc,e.musicSrc===n){a.next=6;break}return a.next=4,Lr(n);case 4:r=a.sent,t.setState({tag:r});case 6:case"end":return a.stop()}}),a)})))()}render(){var e,t;const a=this.props,n=a.musicSrc,c=a.onClose,o=this.state.tag,l=null===o||void 0===o?void 0:o.common.picture;let i;return l&&l.length>0&&(i=l[0].data.toString("base64"),i="data:image/jpeg;base64,"+i),r.a.createElement(F.a,{fullWidth:!0,open:void 0!==n,onClose:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((()=>c())),style:{overflowX:"hidden"}},r.a.createElement(Ye.a,{style:{height:500,width:"100%"},image:i,title:decodeURIComponent(null!==(e=null===o||void 0===o?void 0:o.common.title)&&void 0!==e?e:K.basename(n))}),r.a.createElement(X.a,null,r.a.createElement(ht.a,{component:"h5",variant:"h5"},decodeURIComponent(null!==(t=null===o||void 0===o?void 0:o.common.title)&&void 0!==t?t:K.basename(n))),r.a.createElement(ht.a,{variant:"subtitle1",color:"textSecondary"},null===o||void 0===o?void 0:o.common.artist),r.a.createElement(ht.a,{variant:"subtitle1",color:"textSecondary"},null===o||void 0===o?void 0:o.common.album)),r.a.createElement("div",null,r.a.createElement(Tr.a,{volume:.5,src:n})))}}const Rr=[".mp3",".m4a"];var Wr=a(270);function zr(e){const t=Object(n.useState)(1),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(1),s=Object(l.a)(i,2);s[0],s[1];return r.a.createElement("div",{id:"document"},r.a.createElement(Wr.Document,{style:{width:"100%"},file:e.file,onLoadSuccess:e=>{o(e.numPages)}},Array.from(new Array(c),((e,t)=>r.a.createElement(Wr.Page,{style:{width:"100%"},size:"A4",key:"page-".concat(t),pageNumber:t+1})))))}Wr.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Wr.pdfjs.version,"/pdf.worker.js");const _r=[".pdf"];var Pr=a(874),Ur=a.n(Pr);function Ar(e){const t=r.a.useState(),a=Object(l.a)(t,2),n=a[0],c=a[1],o=e.src;return r.a.useEffect((()=>{N.a.get(o).then((e=>{c(e.data)}))}),[]),void 0===n?r.a.createElement(re.a,{color:"secondary"}):r.a.createElement(Ur.a,{src:n})}var Hr=a(875),qr=a.n(Hr);function Gr(e){return e.filter((e=>void 0!==e.msgstr)).length/e.length}const Yr=Object(pt.a)({palette:{secondary:{main:"#ffffff"},primary:{main:"#00b2ff"}}}),Jr=Object(ft.a)((e=>({appbar:{height:"90px"},container:{marginTop:"100px"},button:{padding:"4px 6px",minWidth:"40px",fontSize:"14px",fontWeight:"normal",textTransform:"capitalize"},menuItem:{minWidth:150},notchedOutline:{"&:focus":{},border:0,fontWeight:"normal",background:"transparent",fontSize:"18px",paddingTop:5,paddingBottom:5,marginRight:10},largeIcon:{width:40,height:40},tag:{paddingLeft:6,paddingRight:6,backgroundColor:"#fbbc04"}})));function Kr(e){const t=Jr(),a=r.a.useState(),n=Object(l.a)(a,2),c=n[0],o=n[1],i=r.a.useState(!1),s=Object(l.a)(i,2),u=s[0],p=s[1],f=e.file,h=e.onClose,v=e.leadingIcon,E=r.a.useContext(H),g=(E.nas,E.update),b=r.a.useState(null),x=Object(l.a)(b,2);x[0],x[1];r.a.useEffect((()=>{try{let e=qr.a.parse(f.file_content);o(e.items)}catch(e){}}),[]);const w=r.a.createElement(ie.a,{title:"Current language"},r.a.createElement(ae.a,{elevation:0,className:t.tag},r.a.createElement(ht.a,{variant:"button",style:{fontWeight:"normal"}},"poFile")));return void 0===c?r.a.createElement(Ca.a,{open:!0}):r.a.createElement(vt.a,{theme:Yr},r.a.createElement(va.a,null),r.a.createElement("div",{style:{height:"100%",overflow:"hidden",width:"100%"}},r.a.createElement(jt,{leadingIcon:v,file:f,isLoading:u,tag:w,onClose:h,onUpdateFileName:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),a="".concat(L).concat(f.id,"/"),e.next=5,N.a.patch(a,{filename:t});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.alert("Cannot rename");case 10:return e.prev=10,p(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),menus:[],buttons:[]}),r.a.createElement(ka.a,{style:{height:"85vh",width:"100%",marginTop:100}},r.a.createElement(Xe.a,{style:{height:"100%",overflow:"hidden",width:"100%"}},r.a.createElement(wr.a,{display:"flex",alignItems:"center"},r.a.createElement(wr.a,{width:"100%",mr:1},r.a.createElement(re.a,{variant:"determinate",value:Gr(c),color:"primary"})),r.a.createElement(wr.a,{minWidth:35},r.a.createElement(ht.a,{variant:"body2",color:"textSecondary"},"".concat(Math.round(Gr(c)),"%")))),r.a.createElement(Yt.a,null,(({height:e,width:t})=>r.a.createElement(Gt.b,{height:e,itemCount:c.length,width:t,itemSize:e=>30*(c[e].msgid.length/200+1)+90},(({style:e,index:t})=>r.a.createElement(Vr,{key:"item-".concat(t),index:t,style:e,item:c[t],update:function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),c[a].msgstr=[t],o(c),c.forEach((e=>e.flags.fuzzy=!1)),n=c.reduce(((e,t)=>e+t.toString()+"\n\n"),""),e.prev=5,e.next=8,xt.updateFileContent(f.id,n);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),alert("Saving error "+e.t0);case 13:g(),setTimeout((()=>{p(!1)}),300);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t,a){return e.apply(this,arguments)}}()})))))))))}function Vr(e){var t;const a=e.item,n=e.style,c=e.update,o=e.index,i=r.a.useState(null!==(t=a.msgstr[0])&&void 0!==t?t:""),s=Object(l.a)(i,2),u=s[0],m=s[1];return r.a.createElement(Xe.a,{container:!0,style:Object(D.a)({},n),spacing:3,key:a.msgid},r.a.createElement(Xe.a,{item:!0,xs:12},r.a.createElement(ht.a,{variant:"body1",style:{color:"grey"}},a.comments),r.a.createElement(ht.a,{variant:"body1",style:{color:"grey"}},a.references),r.a.createElement(ht.a,{variant:"body1"},a.msgid),r.a.createElement(Z.a,{label:"Translation",variant:"filled",fullWidth:!0,color:"secondary",value:u,onChange:e=>m(e.target.value),onBlur:()=>{c(u,o)}})))}const Qr=[".po"];var Xr=a(898),Zr=a(876),$r=a.n(Zr);const ec=Object(pt.a)({palette:{primary:$r.a}}),tc=Object(ft.a)((e=>({backdrop:{zIndex:e.zIndex.drawer+1,color:"#42c8f5",background:"wheat"}})));function ac(e){const t=e.pluginsMapping,a=Object(s.f)(),n=a.pluginName,c=a.fileId,o=r.a.useState(),i=Object(l.a)(o,2),u=i[0],p=i[1],f=r.a.useState(),h=Object(l.a)(f,2),v=h[0],E=h[1],g=r.a.useState(),b=Object(l.a)(g,2),x=b[0],w=b[1],k=tc();return r.a.useEffect((()=>{try{let e=t[n];e?(window.document.title=e.getPluginName(),setTimeout((()=>{p(e),setTimeout((()=>{e.shouldGetFileContent()?xt.getContentById(c,(e=>{E(e)})).then(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(t),E(void 0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((e=>{E(void 0),window.alert("Cannot fetch file with this id\n"+e)})):xt.getFile(c).then((e=>{w(e)})).catch((e=>{window.alert("Cannot fetch file with this id\n"+e),window.close()}))}),500)}),500)):window.alert("Cannot find this plugin")}catch(e){window.alert("Cannot find plugin with this name"),window.close()}}),[n,c]),r.a.createElement(vt.a,{theme:ec},r.a.createElement("div",{style:{height:"100vh",display:"flex"}},u&&x&&u.render({file:x,onClose:()=>{}}),r.a.createElement(Ca.a,{className:k.backdrop,open:void 0===x},r.a.createElement(wr.a,null,r.a.createElement(Xr.a,{in:void 0!==u},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},null===u||void 0===u?void 0:u.getIcon(100))),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(aa.a,{variant:"indeterminate",color:"secondary",style:{margin:10}}),u?r.a.createElement(ht.a,{variant:"h5"},u.getPluginName()," Loading File..."):r.a.createElement(ht.a,{variant:"h5"}," Loading Plugin...")),r.a.createElement("div",null,void 0!==u&&r.a.createElement(re.a,{value:null!==v&&void 0!==v?v:100,color:"secondary",variant:"determinate"}))))))}var nc=a(882),rc=a.n(nc),cc=a(1904),oc=a(551),lc=a.n(oc),ic=a(889);a(747);const sc=Object(pt.a)({palette:{secondary:{main:"#ffffff"},primary:{main:"#00b2ff"}}}),uc=Object(ft.a)((e=>({appbar:{height:"90px"},container:{marginTop:"100px"},button:{padding:"4px 6px",minWidth:"40px",fontSize:"14px",fontWeight:"normal",textTransform:"capitalize"},menuItem:{minWidth:150},notchedOutline:{"&:focus":{},border:0,fontWeight:"normal",background:"transparent",fontSize:"18px",paddingTop:5,paddingBottom:5,marginRight:10},largeIcon:{width:40,height:40},tag:{paddingLeft:6,paddingRight:6,backgroundColor:"#fbbc04"}})));function mc(e){const t=uc(),a=r.a.useState(!1),n=Object(l.a)(a,2),c=n[0],o=n[1],i=e.file,s=e.onClose,u=e.leadingIcon,p=r.a.useState(null),f=Object(l.a)(p,2),h=f[0],v=f[1],E=r.a.useState(null),g=Object(l.a)(E,2),b=g[0],x=g[1],w=r.a.useState([[]]),k=Object(l.a)(w,2),y=k[0],O=k[1],C=r.a.useState(","),F=Object(l.a)(C,2),D=F[0],M=F[1],I=r.a.useState(!0),T=Object(l.a)(I,2),B=T[0],R=T[1],W=r.a.useState(!1),z=Object(l.a)(W,2),_=z[0],P=(z[1],r.a.createRef());r.a.useEffect((()=>{if(i.file_content)try{let e=lc.a.parse(i.file_content);O(e.data)}catch(e){window.alert("Cannot parse data."+e)}}),[]);const U=r.a.createElement(ie.a,{title:"Current language"},r.a.createElement(ae.a,{elevation:0,className:t.tag},r.a.createElement(ht.a,{variant:"button",style:{fontWeight:"normal"}},"csv"))),A=[r.a.createElement(ee.a,{className:t.button,size:"small",onClick:e=>v(e.currentTarget),key:"edit"},"Edit"),r.a.createElement(ee.a,{className:t.button,size:"small",onClick:e=>x(e.currentTarget),key:"settings"},"Settings")],H=[r.a.createElement(j.a,{key:"Edit-menu",style:{marginLeft:20},anchorEl:h,keepMounted:!0,open:Boolean(h),getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:()=>{v(null)}},r.a.createElement(S.a,null,"Insert Column left"),r.a.createElement(S.a,null,"Insert Column right"),r.a.createElement(cc.a,null),r.a.createElement(S.a,null,"Insert Row above"),r.a.createElement(S.a,null,"Insert Row below")),r.a.createElement(j.a,{key:"ESettings-menu",style:{marginLeft:20},anchorEl:b,keepMounted:!0,open:Boolean(b),getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:()=>{x(null)}},r.a.createElement(S.a,{onClick:()=>R((e=>!e))},"First row is header ",B&&r.a.createElement(gt.a,{color:"primary"})),r.a.createElement(cc.a,null),r.a.createElement(S.a,{onClick:()=>M("\t")},"Use tab as seperator"," ","\t"===D&&r.a.createElement(gt.a,{color:"primary"})," "),r.a.createElement(S.a,{onClick:()=>M(",")},"Use comma as seperator"," ",","===D&&r.a.createElement(gt.a,{color:"primary"})," "))],q=()=>{let e=y;return B&&(e=_?[e[0].map((e=>"")),...e.slice(1)]:e.slice(1)),_&&(e=e.map((e=>e.slice(1)))),e},G=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,a=t.exportAsString("csv",{columnHeaders:B,rowHeaders:_}),e.next=5,xt.updateFileContent(i.id,a);case 5:return n=e.sent,e.abrupt("return",lc.a.parse(n.file_content).data);case 9:e.prev=9,e.t0=e.catch(1),window.alert("Cannot save csv data. "+e.t0);case 12:return e.prev=12,setTimeout((()=>{o(!1)}),400),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(vt.a,{theme:sc},r.a.createElement(va.a,null),r.a.createElement("div",{style:{height:"100%",overflow:"hidden",width:"100%"}},r.a.createElement(jt,{leadingIcon:u,file:i,isLoading:c,tag:U,onClose:s,onUpdateFileName:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),a="".concat(L).concat(i.id,"/"),e.next=5,N.a.patch(a,{filename:t});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.alert("Cannot rename");case 10:return e.prev=10,o(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),menus:H,buttons:A}),r.a.createElement(wr.a,{p:1,style:{height:"85vh",width:"100%",marginTop:100}},r.a.createElement(Yt.a,null,(({height:e,width:t})=>r.a.createElement(ic.a,{ref:P,data:q(),colHeaders:!!B&&y[0].map((e=>e.replaceAll('"',""))),rowHeaders:!!_&&y.map((e=>e[0])),width:t,height:e,contextMenu:!0,licenseKey:"non-commercial-and-evaluation",afterChange:function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,a),!(r=null===(n=P.current)||void 0===n?void 0:n.hotInstance)||"loadData"===a){e.next=9;break}if(!(c=r.getPlugin("exportFile"))){e.next=9;break}return e.next=7,G(c);case 7:(o=e.sent)&&O(o);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}))))))}const dc=[".csv"];var pc=a(887),fc=a.n(pc),hc=a(883),vc=a.n(hc),Ec=a(553),gc=a(1905),bc=a(1912),xc=a(884),wc=a.n(xc);class kc{}a(1476);var yc=a(1916);const Oc={inlineMath:({value:e})=>r.a.createElement(Ec.a,{math:e}),math:({value:e})=>r.a.createElement(Ec.a,{block:!0,math:e}),code:({language:e,value:t})=>r.a.createElement(bc.a,{style:gc.a,language:e},t)};var Cc,jc=a(886),Sc=a.n(jc);!function(e){e.stream="stream",e.display_data="display_data",e.execute_result="execute_result"}(Cc||(Cc={}));function Fc(e){const t=e.cell,a=e.renderHTML,n=e.renderCode,c=e.renderImage,o=r.a.useState(!0),i=Object(l.a)(o,2),s=i[0],u=i[1];return r.a.createElement(wr.a,{my:1,key:"code-".concat(t.metadata.id)},r.a.createElement(ae.a,{variant:"outlined",style:{backgroundColor:"transparent"}},r.a.createElement(O.a,{in:s,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(wr.a,{p:1},n(t.metadata.id+"code",t.source,t.execution_count),t.outputs.length>0&&r.a.createElement(ht.a,{style:{fontWeight:"bold"}},"Output:"),t.outputs.map(((e,n)=>{let o=[],l=[];if(void 0===e.data){let a=e.text;return a?r.a.createElement("div",{key:"".concat(t.metadata.id,"-stream-").concat(n)},a.map(((e,a)=>r.a.createElement(ht.a,{key:"".concat(t.metadata.id,"-stream-").concat(n,"-").concat(a)},e)))):r.a.createElement("div",{key:"".concat(t.metadata.id,"-empty-").concat(n)})}return Object.keys(e.data).forEach(((i,s)=>{if(i.includes("image")){let a=c("".concat(t.metadata.id,"-img-").concat(n,"-").concat(s),i,e.data[i]);o.push(a)}let u=e.data["text/html"],m=e.data["text/plain"];void 0!==u&&o.push(a("".concat(t.metadata.id,"-html-").concat(n,"-").concat(s),u)),void 0!==m&&void 0===u&&(l.includes(m)||(o.push(r.a.createElement(ht.a,{variant:"subtitle1",key:"".concat(t.metadata.id,"-puretext-").concat(n,"-").concat(s)},m)),l.push(m)))})),o})))),r.a.createElement(Xe.a,{container:!0,alignItems:"flex-end",alignContent:"space-around"},r.a.createElement(Xe.a,{item:!0,xs:11}),r.a.createElement(Xe.a,{item:!0,xs:1},r.a.createElement(ee.a,{onClick:e=>u(!s)},s?"Hide":"Show")))))}a(1749);const Dc=Object(pt.a)({palette:{type:"dark",secondary:{main:"#424242"},primary:{main:"#00b2ff"}}}),Mc=Object(ft.a)((e=>({appbar:{height:"90px"},container:{marginTop:"100px"},button:{padding:"4px 6px",minWidth:"40px",fontSize:"14px",fontWeight:"normal",textTransform:"capitalize"},menuItem:{minWidth:150},notchedOutline:{"&:focus":{},border:0,fontWeight:"normal",background:"transparent",fontSize:"18px",paddingTop:5,paddingBottom:5,marginRight:10},largeIcon:{width:40,height:40},tag:{paddingLeft:6,paddingRight:6,backgroundColor:"#fbbc04"}}))),Ic=[new class extends kc{cellType(e){return"markdown"===e}renderCell(e){return r.a.createElement(r.a.Fragment,{key:Object(yc.a)()},r.a.createElement(vc.a,{plugins:[wc.a],renderers:Oc},e.source.reduce(((e,t)=>e+t))))}},new class extends kc{constructor(...e){super(...e),this.state={open:!1}}cellType(e){return"code"===e}renderHTML(e,t){let a=t.reduce(((e,t)=>e+t)),n=Sc()(a);return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:n},key:e})}renderImage(e,t,a){let n="data:".concat(t,";base64,").concat(a);return r.a.createElement("img",{src:n,key:e})}renderCode(e,t,a){let n=t.reduce(((e,t)=>e+t));return r.a.createElement(Xe.a,{container:!0,spacing:1},r.a.createElement(Xe.a,{xs:1,item:!0},r.a.createElement(ht.a,null,"[",null!==a&&void 0!==a?a:"    ","]")),r.a.createElement(Xe.a,{xs:11,item:!0},r.a.createElement(bc.a,{language:"python",style:gc.a,key:e},n)))}renderCell(e){return r.a.createElement(Fc,{key:e.metadata.id,cell:e,renderCode:this.renderCode,renderHTML:this.renderHTML,renderImage:this.renderImage})}}];function Nc(e){const t=Mc(),a=r.a.useState(!1),n=Object(l.a)(a,2),c=n[0],o=n[1],i=e.file,s=e.onClose,u=e.leadingIcon,p=r.a.useState(null),f=Object(l.a)(p,2),h=f[0],v=f[1],E=r.a.useState(),g=Object(l.a)(E,2),b=g[0],x=g[1],w=r.a.useState([]),k=Object(l.a)(w,2);k[0],k[1];r.a.useEffect((()=>{if(document.querySelector("html").style.overflow="hidden",i.file_content)try{const e=JSON.parse(i.file_content);x(e)}catch(e){window.alert("Cannot parse data."+e)}}),[]);const y=r.a.createElement(ie.a,{title:"Jupyter Notebook"},r.a.createElement(ae.a,{elevation:0,className:t.tag},r.a.createElement(ht.a,{variant:"button",style:{fontWeight:"normal"}},"ipynb"))),O=[r.a.createElement(ee.a,{className:t.button,size:"small",onClick:e=>v(e.currentTarget),key:"file"},"File")],C=[r.a.createElement(j.a,{key:"File-menu",style:{marginLeft:20},anchorEl:h,keepMounted:!0,open:Boolean(h),getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:()=>{v(null)}},r.a.createElement(S.a,null,"Help"))];return r.a.createElement(vt.a,{theme:Dc},r.a.createElement(va.a,null),r.a.createElement("div",{style:{height:"100%",overflow:"hidden",width:"100%",maxHeight:"100vh"}},r.a.createElement(jt,{leadingIcon:u,file:i,isLoading:c,tag:y,onClose:s,onUpdateFileName:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),a="".concat(L).concat(i.id,"/"),e.next=5,N.a.patch(a,{filename:t});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.alert("Cannot rename");case 10:return e.prev=10,o(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),menus:C,buttons:O}),r.a.createElement("div",{style:{height:"100%",overflow:"auto",marginTop:90,paddingBottom:120}},r.a.createElement(ka.a,{style:{height:"100%"}},r.a.createElement("div",null),b&&b.cells.map(((e,t)=>{var a,n=Object(M.a)(Ic);try{for(n.s();!(a=n.n()).done;){let t=a.value;if(t.cellType(e.cell_type))return t.renderCell(e)}}catch(r){n.e(r)}finally{n.f()}}))))))}const Tc=[".ipynb"];const Lc=Object(pt.a)({palette:{primary:{main:"#fafafa"}}}),Bc=[new class extends mt{getPluginName(){return"music"}shouldOpenNewPage(e){return!1}shouldShow(e){return Rr.includes(K.extname(e.filename))}render(e){const t=e.file,a=e.onClose;return r.a.createElement(Br,{musicSrc:t.file,onClose:a})}},new class extends mt{getPluginName(){return"image"}shouldOpenNewPage(e){return!1}shouldShow(e){return _t.includes(K.extname(e.filename))}render(e){const t=e.file,a=e.onClose;return r.a.createElement(F.a,{open:!0,onClose:()=>a(),fullWidth:!0},r.a.createElement(Ye.a,{image:t.file,style:{width:"100%",height:700}}),r.a.createElement($.a,null,r.a.createElement(ee.a,{onClick:()=>a()},"Close")))}},new class extends mt{getPluginName(){return"pdf-file"}shouldOpenNewPage(e){return!1}shouldShow(e){return _r.includes(K.extname(e.filename))}render(e){const t=e.file,a=e.onClose;return r.a.createElement(F.a,{key:t.id,open:!0,onClose:()=>a(),fullWidth:!0},r.a.createElement(zr,{file:t.file}))}},new class extends mt{getPluginName(){return"video"}shouldOpenNewPage(e){return!1}shouldShow(e){return zt.includes(K.extname(e.filename))}render(e){const t=e.file,a=e.onClose;return r.a.createElement(F.a,{key:t.id,open:!0,onClose:()=>a(),fullWidth:!0},r.a.createElement(Q.a,null,K.basename(t.filename)),r.a.createElement(Wt,{poster:t.cover},r.a.createElement("source",{src:t.file})),r.a.createElement($.a,null,r.a.createElement(ee.a,{onClick:()=>a()},"Close")))}},new class extends mt{getPluginName(){return"json_file_viewer"}shouldOpenNewPage(e){return!1}shouldShow(e){return[".json"].includes(K.extname(e.filename))}render(e){const t=e.file,a=e.onClose;return r.a.createElement(F.a,{open:!0,onClose:()=>a(),fullWidth:!0},r.a.createElement(Q.a,null," ",K.basename(t.filename)),r.a.createElement(X.a,null,r.a.createElement(Ar,{src:t.file})),r.a.createElement($.a,null,r.a.createElement(ee.a,{onClick:()=>a()},"Close")))}},new Nt,new class extends mt{getPluginName(){return"po-filer"}shouldGetFileContent(){return!0}shouldOpenNewPage(e){return!0}shouldShow(e){return Qr.includes(K.extname(e.filename))}render(e){const t=e.file;e.onClose;return r.a.createElement(Kr,{file:t,onClose:this.onPageClose,leadingIcon:this.getIcon()})}},new class extends mt{getPluginName(){return"csv-editor"}shouldGetFileContent(){return!0}getIcon(e){let t=null!==e&&void 0!==e?e:40,a=null!==e&&void 0!==e?e:40;return r.a.createElement(rc.a,{style:{height:t,width:a},color:"primary"})}shouldOpenNewPage(e){return!0}shouldShow(e){return dc.includes(K.extname(e.filename))}render(e){const t=e.file;e.onClose;return r.a.createElement(mc,{file:t,onClose:this.onPageClose,leadingIcon:this.getIcon()})}},new class extends mt{getPluginName(){return"jupyter-notebook"}shouldGetFileContent(){return!0}getIcon(e){let t=null!==e&&void 0!==e?e:40,a=null!==e&&void 0!==e?e:40;return r.a.createElement(fc.a,{style:{height:t,width:a},color:"primary"})}shouldOpenNewPage(e){return!0}shouldShow(e){return Tc.includes(K.extname(e.filename))}render(e){const t=e.file;e.onClose;return r.a.createElement(Nc,{file:t,onClose:this.onPageClose,leadingIcon:this.getIcon()})}}],Rc={};for(var Wc=0,zc=Bc;Wc<zc.length;Wc++){let e=zc[Wc];Rc[e.getPluginName()]=e}function _c(){const e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=(t[0],t[1]);return r.a.createElement(vt.a,{theme:Lc},r.a.createElement(va.a,null),r.a.createElement(De,null,r.a.createElement(i.a,null,r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(s.b,{exact:!0,path:"/",component:()=>r.a.createElement(s.a,{to:"/home"})}),r.a.createElement(s.b,{path:"/plugin/:pluginName/:fileId",component:e=>r.a.createElement(ac,{pluginsMapping:Rc})}),r.a.createElement(s.b,{exact:!0,path:"/home/:id?",component:e=>r.a.createElement(Lt,null,r.a.createElement(fe,null,r.a.createElement(U,e,r.a.createElement(ma,{plugins:Bc}))))}),r.a.createElement(s.b,{exact:!0,path:"/document/:id",component:e=>r.a.createElement(qa,null,r.a.createElement(fe,null,r.a.createElement(ba,e,r.a.createElement(an,null))))}),r.a.createElement(s.b,{exact:!0,path:"/book",component:e=>r.a.createElement(fe,null,r.a.createElement(qa,null,r.a.createElement(Er,null)))}),r.a.createElement(s.b,{exact:!0,path:"/gallery",component:e=>r.a.createElement(gr,null,r.a.createElement(Nr,null))}),r.a.createElement(s.b,{exact:!0,path:"/info",component:e=>(a(!0),r.a.createElement(ha,null))}),r.a.createElement(s.b,{path:"/music",component:e=>r.a.createElement(on,e,r.a.createElement(ir,null))})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pc=a(888);o.a.render(r.a.createElement(Pc.I18nProvider,{catalogs:{}},r.a.createElement(_c,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))},352:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=352},785:function(e,t){},955:function(e,t,a){}},[[1812,1,2]]]);
//# sourceMappingURL=main.9aabb3ea.chunk.js.map